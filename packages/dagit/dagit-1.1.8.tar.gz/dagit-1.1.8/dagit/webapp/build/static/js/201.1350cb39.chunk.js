(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[201],{77523:function(e,n,t){"use strict";t.d(n,{C:function(){return h}});var r=t(19065),o=t(8358),i=t(32030),s=t(75453),a=t(24971),l=t(325),c=t(93141),d=t(76336),u=t(32289),h=function(){var e=l.useContext(d.C5),n=e.allRepos,t=e.visibleRepos,h=e.toggleVisible,p=l.useState(!1),f=(0,r.Z)(p,2),x=f[0],m=f[1];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(o.Vq,{canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:x,style:{width:"auto"},onClose:function(){return m(!1)},children:[(0,u.jsx)(o.fK,{icon:"repo",label:"Filter code locations"}),(0,u.jsx)(c.e,{options:n,onBrowse:function(){return m(!1)},onToggle:h,selected:t}),(0,u.jsx)(o.cN,{children:(0,u.jsx)(i.x,{padding:{top:8},children:(0,u.jsx)(s.zx,{intent:"none",onClick:function(){return m(!1)},children:"Done"})})})]}),(0,u.jsx)(s.zx,{intent:"none",icon:(0,u.jsx)(a.JO,{name:"folder"}),rightIcon:(0,u.jsx)(a.JO,{name:"expand_more"}),onClick:function(){return m(!0)},children:"".concat(t.length," of ").concat(n.length)})]})}},8467:function(e,n,t){"use strict";t.r(n),t.d(n,{OverviewRoot:function(){return En},default:function(){return Nn}});var r=t(325),o=t(27601),i=t(95764),s=t(73701),a=t(30804),l=t(31112),c=t(12745),d=t(32030),u=t(89646),h=t(60736),p=t(47387),f=t(12436),x=t(19102),m=t(78093),g=t(96560),v=t(82348),j=t(31269),y=t(37286),w=t(32289),b=function(e){var n=e.refreshState,t=e.tab;return(0,w.jsxs)(d.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,w.jsxs)(j.mQ,{selectedTabId:t,children:[(0,w.jsx)(y.f,{id:"timeline",title:"Timeline",to:"/overview/timeline"}),(0,w.jsx)(y.f,{id:"jobs",title:"Jobs",to:"/overview/jobs"}),(0,w.jsx)(y.f,{id:"schedules",title:"Schedules",to:"/overview/schedules"}),(0,w.jsx)(y.f,{id:"sensors",title:"Sensors",to:"/overview/sensors"}),(0,w.jsx)(y.f,{id:"backfills",title:"Backfills",to:"/overview/backfills"})]}),n?(0,w.jsx)(d.x,{padding:{bottom:8},children:(0,w.jsx)(x.xi,{refreshState:n})}):null]})},k=t(77892),C=t(50741),S=t(76450),T=function(){(0,m.Px)();var e=(0,s.a)(E),n=(0,k.l)({query:N,variables:{},pageSize:10,nextCursorForResult:function(e){var n;return"PartitionBackfills"===e.partitionBackfillsOrError.__typename?null===(n=e.partitionBackfillsOrError.results[9])||void 0===n?void 0:n.backfillId:void 0},getResultArray:function(e){return"PartitionBackfills"===(null===e||void 0===e?void 0:e.partitionBackfillsOrError.__typename)?e.partitionBackfillsOrError.results:[]}}),t=n.queryResult,r=n.paginationProps,o=(0,x.C4)(t,x.dT);return(0,v.j)("Backfills"),(0,w.jsxs)(a.T,{children:[(0,w.jsx)(l.m,{title:(0,w.jsx)(c.X6,{children:"Overview"}),tabs:(0,w.jsx)(b,{tab:"backfills",refreshState:o})}),(0,w.jsx)(C.g,{queryResult:t,allowStaleData:!0,children:function(n){var o,s=n.partitionBackfillsOrError;if("PythonError"===s.__typename)return(0,w.jsx)(f.T9,{error:s});if(!s.results.length)return(0,w.jsx)(d.x,{padding:{vertical:64},children:(0,w.jsx)(u.t,{icon:"no-results",title:"No backfills found",description:(0,w.jsx)("p",{children:"This instance does not have any backfill jobs."})})});var a=((null===(o=e.data)||void 0===o?void 0:o.instance.daemonHealth.allDaemonStatuses)||[]).filter((function(e){return"BACKFILL"===e.daemonType})).map((function(e){return e.required&&e.healthy})),l=a.length&&a.every((function(e){return e}));return(0,w.jsxs)("div",{children:[l?null:(0,w.jsx)(d.x,{padding:{horizontal:24,vertical:16},children:(0,w.jsx)(h.b,{intent:"warning",title:"The backfill daemon is not running.",description:(0,w.jsxs)("div",{children:["See the"," ",(0,w.jsx)("a",{href:"https://docs.dagster.io/deployment/dagster-daemon",target:"_blank",rel:"noreferrer",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})}),(0,w.jsx)(S.G,{backfills:s.results.slice(0,10),refetch:t.refetch}),s.results.length>0?(0,w.jsx)("div",{style:{marginTop:"16px"},children:(0,w.jsx)(p.b$,(0,i.Z)({},r))}):null]})}})]})},E=(0,g.B)("\n  query InstanceHealthForBackfillsQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n  }\n"),N=(0,g.B)("\n  query InstanceBackfillsQuery($cursor: String, $limit: Int) {\n    partitionBackfillsOrError(cursor: $cursor, limit: $limit) {\n      ... on PartitionBackfills {\n        results {\n          backfillId\n          status\n          numPartitions\n          timestamp\n          partitionSetName\n          partitionSet {\n            id\n            name\n            mode\n            pipelineName\n            repositoryOrigin {\n              id\n              repositoryName\n              repositoryLocationName\n            }\n          }\n          error {\n            ...PythonErrorFragment\n          }\n\n          ...BackfillTableFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n"),_=t(47427),A=t(19065),I=t(34595),O=t(7838),L=t(88863),Z=t(39061),R=t(77523),z=t(76336),P=t(37099),F=t(33902),M=t(11831),D=t(54268),U=t(519),G=t(3580),$=function(e){var n=new Set,t=new Set;return e.forEach((function(e){n.has(e)?t.add(e):n.add(e)})),t},K=t(52848),B=t(76314),W=function(e){return Array.isArray(e)?e:[]},q=function(e,n){var t=function(e,n){return"".concat(e,":dagit.").concat(n)}(r.useContext(K.I).basePath,e),o=(0,B.U)(t,W),i=(0,A.Z)(o,2),s=i[0],a=i[1],l=r.useCallback((function(e){var n=(0,F.Uz)(e);a((function(e){var t=new Set(e||[]);return t.has(n)?t.delete(n):t.add(n),Array.from(t)}))}),[a]),c=r.useCallback((function(e){a((function(t){var r=new Set(t||[]);return n.forEach((function(n){e?r.delete(n):r.add(n)})),Array.from(r)}))}),[n,a]),d=r.useMemo((function(){var e=new Set(s);return n.filter((function(n){return!e.has(n)}))}),[n,s]);return r.useMemo((function(){return{expandedKeys:d,onToggle:l,onToggleAll:c}}),[d,l,c])},H=t(82426),V=t(16279),J="overview-collapsed-state",Q=function(e){var n=e.repos,t=r.useRef(null),o=r.useMemo((function(){return n.map((function(e){var n=e.repoAddress;return(0,F.Uz)(n)}))}),[n]),i=q(J,o),s=i.expandedKeys,a=i.onToggle,l=i.onToggleAll,c=r.useMemo((function(){var e=[];return n.forEach((function(n){var t=n.repoAddress,r=n.jobs;e.push({type:"header",repoAddress:t,jobCount:r.length});var o=(0,F.Uz)(t);s.includes(o)&&r.forEach((function(n){var r=n.isJob,o=n.name;e.push({type:"job",repoAddress:t,isJob:r,name:o})}))})),e}),[n,s]),d=$(n.map((function(e){return e.repoAddress.name}))),u=(0,U.useVirtualizer)({count:c.length,getScrollElement:function(){return t.current},estimateSize:function(e){var n=c[e];return"header"===(null===n||void 0===n?void 0:n.type)?32:64},overscan:10}),h=u.getTotalSize(),p=u.getVirtualItems();return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(H.I,{}),(0,w.jsx)("div",{style:{overflow:"hidden"},children:(0,w.jsx)(G.W2,{ref:t,children:(0,w.jsx)(G.Nh,{$totalHeight:h,children:p.map((function(e){var n=e.index,t=e.key,r=e.size,o=e.start,i=c[n];return"header"===i.type?(0,w.jsx)(V.vG,{repoAddress:i.repoAddress,height:r,start:o,onToggle:a,onToggleAll:l,expanded:s.includes((0,F.Uz)(i.repoAddress)),showLocation:d.has(i.repoAddress.name),rightElement:(0,w.jsx)(M.u,{content:1===i.jobCount?"1 job":"".concat(i.jobCount," jobs"),placement:"top",children:(0,w.jsx)(D.V,{children:i.jobCount})})},t):(0,w.jsx)(H.b,{name:i.name,isJob:i.isJob,repoAddress:i.repoAddress,height:r,start:o},t)}))})})})]})},Y=t(59019),X=function(e){return(0,Y.Z)(e).sort((function(e,n){var t=(0,F.Uz)(e.repoAddress),r=(0,F.Uz)(n.repoAddress);return t.localeCompare(r)}))},ee=function(e){return new Set(e.map((function(e){return(0,F.Uz)((0,P.kQ)(e.repository.name,e.repositoryLocation.name))})))},ne=function(){(0,m.Px)();var e=r.useState(""),n=(0,A.Z)(e,2),t=n[0],o=n[1],i=r.useContext(z.C5),a=i.allRepos,h=i.visibleRepos,p=a.length,f=(0,s.a)(re,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),g=f.data,v=f.loading,j=(0,x.C4)(f,x.dT),y=r.useMemo((function(){var e=ee(h);return te(g).filter((function(n){var t=n.repoAddress;return e.has((0,F.Uz)(t))}))}),[g,h]),k=t.trim().toLocaleLowerCase(),C=k.length>0,S=r.useMemo((function(){var e=k.toLocaleLowerCase();return y.map((function(n){return{repoAddress:n.repoAddress,jobs:n.jobs.filter((function(n){return n.name.toLocaleLowerCase().includes(e)}))}})).filter((function(e){return e.jobs.length>0}))}),[y,k]);return(0,w.jsxs)(d.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,w.jsx)(l.m,{title:(0,w.jsx)(c.X6,{children:"Overview"}),tabs:(0,w.jsx)(b,{tab:"jobs",refreshState:j})}),(0,w.jsxs)(d.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[p>1?(0,w.jsx)(R.C,{}):null,(0,w.jsx)(L.oi,{icon:"search",value:t,onChange:function(e){return o(e.target.value)},placeholder:"Filter by job name\u2026",style:{width:"340px"}})]}),v&&!p?(0,w.jsx)(d.x,{padding:64,children:(0,w.jsx)(I.$,{purpose:"page"})}):function(){if(v&&!g)return(0,w.jsx)(d.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,w.jsxs)(d.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,w.jsx)(I.$,{purpose:"body-text"}),(0,w.jsx)("div",{style:{color:O.w.Gray600},children:"Loading jobs\u2026"})]})});var e=a.length>h.length;return S.length?(0,w.jsx)(Q,{repos:S}):C?(0,w.jsx)(d.x,{padding:{top:20},children:(0,w.jsx)(u.t,{icon:"search",title:"No matching jobs",description:e?(0,w.jsxs)("div",{children:["No jobs matching ",(0,w.jsx)("strong",{children:t})," were found in the selected code locations"]}):(0,w.jsxs)("div",{children:["No jobs matching ",(0,w.jsx)("strong",{children:t})," were found in your definitions"]})})}):(0,w.jsx)(d.x,{padding:{top:20},children:(0,w.jsx)(u.t,{icon:"search",title:"No jobs",description:e?"No jobs were found in the selected code locations":"No jobs were found in your definitions"})})}()]})},te=function(e){if("Workspace"!==(null===e||void 0===e?void 0:e.workspaceOrError.__typename))return[];var n,t=e.workspaceOrError.locationEntries.map((function(e){return e.locationOrLoadError})),r=[],o=(0,_.Z)(t);try{for(o.s();!(n=o.n()).done;){var i=n.value;if("RepositoryLocation"===(null===i||void 0===i?void 0:i.__typename)){var s,a=(0,_.Z)(i.repositories);try{for(a.s();!(s=a.n()).done;){var l=s.value,c=l.name,d=l.pipelines,u=(0,P.kQ)(c,i.name),h=d.filter((function(e){var n=e.name;return!(0,Z.pv)(n)})).map((function(e){return{isJob:e.isJob,name:e.name}}));h.length>0&&r.push({repoAddress:u,jobs:h})}}catch(p){a.e(p)}finally{a.f()}}}}catch(p){o.e(p)}finally{o.f()}return X(r)},re=(0,g.B)("\n  query OverviewJobsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n"),oe=t(75453),ie=t(8358),se=t(60857),ae=t(89324),le=t(31834),ce=function(e){var n=e.repos,t=r.useRef(null),o=r.useMemo((function(){return n.map((function(e){var n=e.repoAddress;return(0,F.Uz)(n)}))}),[n]),i=q(J,o),s=i.expandedKeys,a=i.onToggle,l=i.onToggleAll,c=r.useMemo((function(){var e=[];return n.forEach((function(n){var t=n.repoAddress,r=n.schedules;e.push({type:"header",repoAddress:t,scheduleCount:r.length});var o=(0,F.Uz)(t);s.includes(o)&&r.forEach((function(n){e.push({type:"schedule",repoAddress:t,name:n})}))})),e}),[n,s]),d=$(n.map((function(e){return e.repoAddress.name}))),u=(0,U.useVirtualizer)({count:c.length,getScrollElement:function(){return t.current},estimateSize:function(e){var n=c[e];return"header"===(null===n||void 0===n?void 0:n.type)?32:64},overscan:10}),h=u.getTotalSize(),p=u.getVirtualItems();return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(le.o,{}),(0,w.jsx)("div",{style:{overflow:"hidden"},children:(0,w.jsx)(G.W2,{ref:t,children:(0,w.jsx)(G.Nh,{$totalHeight:h,children:p.map((function(e){var n=e.index,t=e.key,r=e.size,o=e.start,i=c[n];return"header"===i.type?(0,w.jsx)(V.vG,{repoAddress:i.repoAddress,height:r,start:o,onToggle:a,onToggleAll:l,expanded:s.includes((0,F.Uz)(i.repoAddress)),showLocation:d.has(i.repoAddress.name),rightElement:(0,w.jsx)(M.u,{content:1===i.scheduleCount?"1 schedule":"".concat(i.scheduleCount," schedules"),placement:"top",children:(0,w.jsx)(D.V,{children:i.scheduleCount})})},t):(0,w.jsx)(le.i,{name:i.name,repoAddress:i.repoAddress,height:r,start:o},t)}))})})})]})},de=function(){(0,m.Px)();var e=r.useState(""),n=(0,A.Z)(e,2),t=n[0],o=n[1],i=r.useContext(z.C5),a=i.allRepos,h=i.visibleRepos,p=a.length,f=(0,s.a)(fe,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),g=f.data,v=f.loading,j=(0,x.C4)(f,x.dT),y=r.useMemo((function(){var e=ee(h);return pe(g).filter((function(n){var t=n.repoAddress;return e.has((0,F.Uz)(t))}))}),[g,h]),k=t.trim().toLocaleLowerCase(),C=k.length>0,S=r.useMemo((function(){var e=k.toLocaleLowerCase();return y.map((function(n){return{repoAddress:n.repoAddress,schedules:n.schedules.filter((function(n){return n.toLocaleLowerCase().includes(e)}))}})).filter((function(e){return e.schedules.length>0}))}),[y,k]);return(0,w.jsxs)(d.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,w.jsx)(l.m,{title:(0,w.jsx)(c.X6,{children:"Overview"}),tabs:(0,w.jsx)(b,{tab:"schedules",refreshState:j})}),(0,w.jsxs)(d.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[p>0?(0,w.jsx)(R.C,{}):null,(0,w.jsx)(L.oi,{icon:"search",value:t,onChange:function(e){return o(e.target.value)},placeholder:"Filter by schedule name\u2026",style:{width:"340px"}})]}),v&&!p?(0,w.jsx)(d.x,{padding:64,children:(0,w.jsx)(I.$,{purpose:"page"})}):(0,w.jsxs)(w.Fragment,{children:["InstigationStates"===(null===g||void 0===g?void 0:g.unloadableInstigationStatesOrError.__typename)?(0,w.jsx)(ue,{count:g.unloadableInstigationStatesOrError.results.length}):null,(0,w.jsx)(d.x,{padding:{vertical:16,horizontal:24},border:{side:"top",width:1,color:O.w.KeylineGray},children:(0,w.jsx)(ae.K,{daemonHealth:null===g||void 0===g?void 0:g.instance.daemonHealth})}),function(){if(v&&!g)return(0,w.jsx)(d.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,w.jsxs)(d.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,w.jsx)(I.$,{purpose:"body-text"}),(0,w.jsx)("div",{style:{color:O.w.Gray600},children:"Loading schedules\u2026"})]})});var e=a.length>h.length;return S.length?(0,w.jsx)(ce,{repos:S}):C?(0,w.jsx)(d.x,{padding:{top:20},children:(0,w.jsx)(u.t,{icon:"search",title:"No matching schedules",description:e?(0,w.jsxs)("div",{children:["No schedules matching ",(0,w.jsx)("strong",{children:t})," were found in the selected code locations"]}):(0,w.jsxs)("div",{children:["No schedules matching ",(0,w.jsx)("strong",{children:t})," were found in your definitions"]})})}):(0,w.jsx)(d.x,{padding:{top:20},children:(0,w.jsx)(u.t,{icon:"search",title:"No schedules",description:e?"No schedules were found in the selected code locations":"No schedules were found in your definitions"})})}()]})]})},ue=function(e){var n=e.count,t=r.useState(!1),o=(0,A.Z)(t,2),i=o[0],s=o[1];if(!n)return null;var a=1===n?"1 unloadable schedule":"".concat(n," unloadable schedules");return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(d.x,{padding:{vertical:16,horizontal:24},border:{side:"top",width:1,color:O.w.KeylineGray},children:(0,w.jsx)(h.b,{intent:"warning",title:a,description:(0,w.jsxs)(d.x,{flex:{direction:"column",gap:12,alignItems:"flex-start"},children:[(0,w.jsx)("div",{children:"Schedules were previously started but now cannot be loaded. They may be part of a code locations that no longer exist. You can turn them off, but you cannot turn them back on."}),(0,w.jsx)(oe.zx,{onClick:function(){return s(!0)},children:1===n?"View unloadable schedule":"View unloadable schedules"})]})})}),(0,w.jsxs)(ie.Vq,{isOpen:i,title:"Unloadable schedules",style:{width:"90vw",maxWidth:"1200px"},children:[(0,w.jsx)(d.x,{padding:{bottom:8},children:(0,w.jsx)(he,{})}),(0,w.jsx)(ie.cN,{children:(0,w.jsx)(oe.zx,{intent:"primary",onClick:function(){return s(!1)},children:"Done"})})]})]})},he=function(){var e=(0,s.a)(xe).data;return e?"InstigationStates"===(null===e||void 0===e?void 0:e.unloadableInstigationStatesOrError.__typename)?(0,w.jsx)(se.Y,{scheduleStates:e.unloadableInstigationStatesOrError.results,showSubheading:!1}):(0,w.jsx)(f.T9,{error:null===e||void 0===e?void 0:e.unloadableInstigationStatesOrError}):(0,w.jsx)(I.$,{purpose:"section"})},pe=function(e){if("Workspace"!==(null===e||void 0===e?void 0:e.workspaceOrError.__typename))return[];var n,t=e.workspaceOrError.locationEntries.map((function(e){return e.locationOrLoadError})),r=[],o=(0,_.Z)(t);try{for(o.s();!(n=o.n()).done;){var i=n.value;if("RepositoryLocation"===(null===i||void 0===i?void 0:i.__typename)){var s,a=(0,_.Z)(i.repositories);try{for(a.s();!(s=a.n()).done;){var l=s.value,c=l.name,d=l.schedules,u=(0,P.kQ)(c,i.name),h=d.map((function(e){return e.name}));h.length>0&&r.push({repoAddress:u,schedules:h})}}catch(p){a.e(p)}finally{a.f()}}}}catch(p){o.e(p)}finally{o.f()}return X(r)},fe=(0,g.B)("\n  query OverviewSchedulesQuery {\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                schedules {\n                  id\n                  name\n                  description\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    unloadableInstigationStatesOrError(instigationType: SCHEDULE) {\n      ... on InstigationStates {\n        results {\n          id\n        }\n      }\n    }\n    instance {\n      ...InstanceHealthFragment\n    }\n  }\n"),xe=(0,g.B)("\n  query UnloadableSchedulesQuery {\n    unloadableInstigationStatesOrError(instigationType: SCHEDULE) {\n      ... on InstigationStates {\n        results {\n          id\n          ...InstigationStateFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n"),me=t(57466),ge=t(19377),ve=function(e){var n=e.repos,t=r.useRef(null),o=r.useMemo((function(){return n.map((function(e){var n=e.repoAddress;return(0,F.Uz)(n)}))}),[n]),i=q(J,o),s=i.expandedKeys,a=i.onToggle,l=i.onToggleAll,c=r.useMemo((function(){var e=[];return n.forEach((function(n){var t=n.repoAddress,r=n.sensors;e.push({type:"header",repoAddress:t,sensorCount:r.length});var o=(0,F.Uz)(t);s.includes(o)&&r.forEach((function(n){e.push({type:"sensor",repoAddress:t,name:n})}))})),e}),[n,s]),d=$(n.map((function(e){return e.repoAddress.name}))),u=(0,U.useVirtualizer)({count:c.length,getScrollElement:function(){return t.current},estimateSize:function(e){var n=c[e];return"header"===(null===n||void 0===n?void 0:n.type)?32:64},overscan:10}),h=u.getTotalSize(),p=u.getVirtualItems();return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(ge.K,{}),(0,w.jsx)("div",{style:{overflow:"hidden"},children:(0,w.jsx)(G.W2,{ref:t,children:(0,w.jsx)(G.Nh,{$totalHeight:h,children:p.map((function(e){var n=e.index,t=e.key,r=e.size,o=e.start,i=c[n];return"header"===i.type?(0,w.jsx)(V.vG,{repoAddress:i.repoAddress,height:r,start:o,onToggle:a,onToggleAll:l,expanded:s.includes((0,F.Uz)(i.repoAddress)),showLocation:d.has(i.repoAddress.name),rightElement:(0,w.jsx)(M.u,{content:1===i.sensorCount?"1 sensor":"".concat(i.sensorCount," sensors"),placement:"top",children:(0,w.jsx)(D.V,{children:i.sensorCount})})},t):(0,w.jsx)(ge.R,{name:i.name,repoAddress:i.repoAddress,height:r,start:o},t)}))})})})]})},je=function(){(0,m.Px)();var e=r.useState(""),n=(0,A.Z)(e,2),t=n[0],o=n[1],i=r.useContext(z.C5),a=i.allRepos,h=i.visibleRepos,p=a.length,f=(0,s.a)(ke,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),g=f.data,v=f.loading,j=(0,x.C4)(f,x.dT),y=r.useMemo((function(){var e=ee(h);return be(g).filter((function(n){var t=n.repoAddress;return e.has((0,F.Uz)(t))}))}),[g,h]),k=t.trim().toLocaleLowerCase(),C=k.length>0,S=r.useMemo((function(){var e=k.toLocaleLowerCase();return y.map((function(n){return{repoAddress:n.repoAddress,sensors:n.sensors.filter((function(n){return n.toLocaleLowerCase().includes(e)}))}})).filter((function(e){return e.sensors.length>0}))}),[y,k]);return(0,w.jsxs)(d.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,w.jsx)(l.m,{title:(0,w.jsx)(c.X6,{children:"Overview"}),tabs:(0,w.jsx)(b,{tab:"sensors",refreshState:j})}),(0,w.jsxs)(d.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[p>0?(0,w.jsx)(R.C,{}):null,(0,w.jsx)(L.oi,{icon:"search",value:t,onChange:function(e){return o(e.target.value)},placeholder:"Filter by sensor name\u2026",style:{width:"340px"}})]}),v&&!p?(0,w.jsx)(d.x,{padding:64,children:(0,w.jsx)(I.$,{purpose:"page"})}):(0,w.jsxs)(w.Fragment,{children:["InstigationStates"===(null===g||void 0===g?void 0:g.unloadableInstigationStatesOrError.__typename)?(0,w.jsx)(ye,{count:g.unloadableInstigationStatesOrError.results.length}):null,(0,w.jsx)(me.F,{daemonHealth:null===g||void 0===g?void 0:g.instance.daemonHealth,padding:{vertical:16,horizontal:24},border:{side:"top",width:1,color:O.w.KeylineGray}}),function(){if(v&&!g)return(0,w.jsx)(d.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,w.jsxs)(d.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,w.jsx)(I.$,{purpose:"body-text"}),(0,w.jsx)("div",{style:{color:O.w.Gray600},children:"Loading sensors\u2026"})]})});var e=a.length>h.length;return S.length?(0,w.jsx)(ve,{repos:S}):C?(0,w.jsx)(d.x,{padding:{top:20},children:(0,w.jsx)(u.t,{icon:"search",title:"No matching sensors",description:e?(0,w.jsxs)("div",{children:["No sensors matching ",(0,w.jsx)("strong",{children:t})," were found in the selected code locations"]}):(0,w.jsxs)("div",{children:["No sensors matching ",(0,w.jsx)("strong",{children:t})," were found in your definitions"]})})}):(0,w.jsx)(d.x,{padding:{top:20},children:(0,w.jsx)(u.t,{icon:"search",title:"No sensors",description:e?"No sensors were found in the selected code locations":"No sensors were found in your definitions"})})}()]})]})},ye=function(e){var n=e.count,t=r.useState(!1),o=(0,A.Z)(t,2),i=o[0],s=o[1];if(!n)return null;var a=1===n?"1 unloadable sensor":"".concat(n," unloadable sensors");return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(d.x,{padding:{vertical:16,horizontal:24},border:{side:"top",width:1,color:O.w.KeylineGray},children:(0,w.jsx)(h.b,{intent:"warning",title:a,description:(0,w.jsxs)(d.x,{flex:{direction:"column",gap:12,alignItems:"flex-start"},children:[(0,w.jsx)("div",{children:"Sensors were previously started but now cannot be loaded. They may be part of a code location that no longer exists. You can turn them off, but you cannot turn them back on."}),(0,w.jsx)(oe.zx,{onClick:function(){return s(!0)},children:1===n?"View unloadable sensor":"View unloadable sensors"})]})})}),(0,w.jsxs)(ie.Vq,{isOpen:i,title:"Unloadable schedules",style:{width:"90vw",maxWidth:"1200px"},children:[(0,w.jsx)(d.x,{padding:{bottom:8},children:(0,w.jsx)(we,{})}),(0,w.jsx)(ie.cN,{children:(0,w.jsx)(oe.zx,{intent:"primary",onClick:function(){return s(!1)},children:"Done"})})]})]})},we=function(){var e=(0,s.a)(Ce).data;return e?"InstigationStates"===(null===e||void 0===e?void 0:e.unloadableInstigationStatesOrError.__typename)?(0,w.jsx)(se.e,{sensorStates:e.unloadableInstigationStatesOrError.results,showSubheading:!1}):(0,w.jsx)(f.T9,{error:null===e||void 0===e?void 0:e.unloadableInstigationStatesOrError}):(0,w.jsx)(I.$,{purpose:"section"})},be=function(e){if("Workspace"!==(null===e||void 0===e?void 0:e.workspaceOrError.__typename))return[];var n,t=e.workspaceOrError.locationEntries.map((function(e){return e.locationOrLoadError})),r=[],o=(0,_.Z)(t);try{for(o.s();!(n=o.n()).done;){var i=n.value;if("RepositoryLocation"===(null===i||void 0===i?void 0:i.__typename)){var s,a=(0,_.Z)(i.repositories);try{for(a.s();!(s=a.n()).done;){var l=s.value,c=l.name,d=l.sensors,u=(0,P.kQ)(c,i.name),h=d.map((function(e){return e.name}));h.length>0&&r.push({repoAddress:u,sensors:h})}}catch(p){a.e(p)}finally{a.f()}}}}catch(p){o.e(p)}finally{o.f()}return X(r)},ke=(0,g.B)("\n  query OverviewSensorsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                sensors {\n                  id\n                  name\n                  description\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    unloadableInstigationStatesOrError(instigationType: SENSOR) {\n      ... on InstigationStates {\n        results {\n          id\n        }\n      }\n    }\n    instance {\n      ...InstanceHealthFragment\n    }\n  }\n"),Ce=(0,g.B)("\n  query UnloadableSensorsQuery {\n    unloadableInstigationStatesOrError(instigationType: SENSOR) {\n      ... on InstigationStates {\n        results {\n          id\n          ...InstigationStateFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n"),Se=t(87011),Te=t(16798),Ee=t(922),Ne=t(8546),_e=t(24971),Ae=t(14198),Ie=t(762),Oe=t(74549),Le=t(68156),Ze=t(28797),Re=t(37971),ze=t(7489),Pe=t(36114),Fe=t(35815),Me=t(59549),De=t(34653),Ue=t(32460),Ge=function(e,n){return!(e.end<n.start||n.end<e.start)},$e=function(e,n,t,r){var o=e.left,i=e.left+Math.max(e.width,t),s=n.left,a=n.left+Math.max(n.width,t),l=Math.min(e.left,n.left),c=Math.max(e.left+Math.max(e.width,t),n.left+Math.max(n.width,t));return Ge({start:o,end:i},{start:s,end:a})&&(l>r||c<r)},Ke=function(e){switch(e){case"queued":case"scheduled":return O.w.Blue200;case"inProgress":return O.w.Blue500;case"failed":return O.w.Red500;case"succeeded":return O.w.Green500}},Be=function(e){var n={scheduled:0,queued:0,inProgress:0,failed:0,succeeded:0};e.forEach((function(e){var t=e.status;"SCHEDULED"===t?n.scheduled++:De.sy.has(t)?n.queued++:De.Ys.has(t)?n.inProgress++:De.hd.has(t)?n.failed++:De._m.has(t)&&n.succeeded++}));var t=Object.keys(n).filter((function(e){return n[e]>0}));if(1===t.length){var r=(0,A.Z)(t,1)[0];return Ke(r)}for(var o=e.length,i=[n.failed>0?{status:"failed",pct:100*n.failed/o}:null,n.succeeded>0?{status:"succeeded",pct:100*n.succeeded/o}:null,n.inProgress>0?{status:"inProgress",pct:100*n.inProgress/o}:null,n.queued>0?{status:"queued",pct:100*n.queued/o}:null,n.scheduled>0?{status:"scheduled",pct:100*n.scheduled/o}:null].filter(Boolean),s="",a=0,l=0,c=0;c<i.length;c++){var d=i[c];if(d){var u=d.status,h=d.pct;l=a,a+=h;var p=Ke(u);0===c?s+="".concat(p," ").concat(h.toFixed(1),"%, "):c===i.length-1?s+="".concat(p," ").concat(l.toFixed(1),"%"):s+="".concat(p," ").concat(l.toFixed(1),"% ").concat(a.toFixed(1),"%, ")}}return"linear-gradient(to right, ".concat(s,")")},We=32,qe=function(e){var n=e.loading,t=void 0!==n&&n,o=e.jobs,s=e.range,a=r.useState(null),l=(0,A.Z)(a,2),c=l[0],u=l[1],h=Date.now(),p=(0,A.Z)(s,2),f=(p[0],h<=p[1]),x=o.reduce((function(e,n){var t=n.repoAddress,r=(0,F.Qj)(t),o=e[r]||[];return(0,i.Z)((0,i.Z)({},e),{},(0,Te.Z)({},r,[].concat((0,Y.Z)(o),[n])))}),{}),m=Object.keys(x),g=q(J,m),v=g.expandedKeys,j=g.onToggle,y=g.onToggleAll,b=r.useRef(null),k=r.useCallback((function(e){var n;e?(b.current=new ResizeObserver((function(e){var n=e[0];u(n.contentRect.width)})),b.current.observe(e)):null===(n=b.current)||void 0===n||n.disconnect()}),[]);if(!c)return(0,w.jsx)(hn,{$height:174,ref:k,children:(0,w.jsx)("div",{})});var C=Object.keys(x).sort((function(e,n){return e.localeCompare(n)})),S=64,T=C.filter((function(e){return v.includes(e)})).reduce((function(e,n){return e+x[n].length}),0),E=C.length*Fe.l+We*T,N=$(C.map((function(e){var n;return(null===(n=(0,Pe.g)(e))||void 0===n?void 0:n.name)||""}))),_=C.length>0,I=64+(_?E:110);return(0,w.jsxs)(hn,{$height:I,ref:k,children:[(0,w.jsx)(d.x,{padding:{left:24},flex:{direction:"column",justifyContent:"center"},style:{fontSize:"16px",height:64},border:{side:"top",width:1,color:O.w.KeylineGray},children:"Jobs"}),(0,w.jsx)(nn,{interval:36e5,range:s,height:_?E:0}),C.length?C.map((function(e){var n,t=null===(n=(0,Pe.g)(e))||void 0===n?void 0:n.name,r=x[e],o=S,i=v.includes(e);return S=o+Fe.l+(i?r.length*We:0),(0,w.jsx)(He,{expanded:i,range:s,top:o,repoKey:e,isDuplicateRepoName:!(!t||!N.has(t)),jobs:x[e],onToggle:j,onToggleAll:y,width:c},e)})):(0,w.jsx)(un,{loading:t,includesTicks:f})]})},He=function(e){var n=e.expanded,t=e.onToggle,o=e.onToggleAll,i=e.repoKey,s=e.isDuplicateRepoName,a=e.jobs,l=e.range,c=e.top,d=e.width,u=(0,Pe.g)(i),h=(null===u||void 0===u?void 0:u.name)||"Unknown repo",p=(null===u||void 0===u?void 0:u.location)||"Unknown location",f=r.useCallback((function(e){e.getModifierState("Shift")?o(!n):u&&t(u)}),[n,t,o,u]);return(0,w.jsxs)("div",{children:[(0,w.jsx)(Qe,{$top:c,children:(0,w.jsx)(Fe.L,{expanded:n,repoName:h,repoLocation:p,onClick:f,showLocation:s,rightElement:(0,w.jsx)(Ve,{jobs:a})})}),n?a.map((function(e,n){return(0,w.jsx)(dn,{job:e,top:c+Fe.l+n*We,range:l,width:d},e.key)})):null]})},Ve=r.memo((function(e){var n=e.jobs,t=r.useMemo((function(){var e=0,t=0,r=0;return n.forEach((function(n){n.runs.forEach((function(n){var o=n.status;"SCHEDULED"!==o&&(De.Ys.has(o)?e++:De.hd.has(o)?t++:De._m.has(o)&&r++)}))})),{inProgressCount:e,failedCount:t,succeededCount:r}}),[n]),o=t.inProgressCount,i=t.failedCount,s=t.succeededCount,a=1===o?"1 run in progress":"".concat(o," runs in progress"),l=1===s?"1 run succeeded":"".concat(s," runs succeeded"),c=1===i?"1 run failed":"".concat(i," runs failed");return(0,w.jsxs)(d.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[o>0?(0,w.jsx)(M.u,{content:(0,w.jsx)(Je,{children:a}),placement:"top",children:(0,w.jsx)(D.V,{intent:"primary",children:o})}):null,s>0?(0,w.jsx)(M.u,{content:(0,w.jsx)(Je,{children:l}),placement:"top",children:(0,w.jsx)(D.V,{intent:"success",children:s})}):null,i>0?(0,w.jsx)(M.u,{content:(0,w.jsx)(Je,{children:c}),placement:"top",children:(0,w.jsx)(D.V,{intent:"danger",children:i})}):null]})})),Je=Ee.ZP.span.withConfig({displayName:"RunTimeline__StatusSpan",componentId:"sc-1k6kbha-0"})(["white-space:nowrap;"]),Qe=Ee.ZP.div.withConfig({displayName:"RunTimeline__SectionHeaderContainer",componentId:"sc-1k6kbha-1"})(["position:absolute;top:0;left:0;right:0;",""],(function(e){var n=e.$top;return"transform: translateY(".concat(n,"px);")})),Ye={month:"numeric",day:"numeric",year:"numeric"},Xe={month:"numeric",day:"numeric",year:"numeric",timeZoneName:"short"},en={hour:"numeric"},nn=function(e){var n=e.interval,t=e.range,o=e.height,s=(0,A.Z)(t,2),a=s[0],l=s[1],c=function(){var e=r.useContext(Re.jA),n=(0,A.Z)(e,1)[0],t="Automatic"===n?(0,ze.cw)():n;return r.useCallback((function(e,n){return Intl.DateTimeFormat(navigator.language,(0,i.Z)({timeZone:t},n)).format(e)}),[t])}(),u=r.useMemo((function(){for(var e=l-a,n=new Date(a),t=c(n,Xe),r=[],o=new Date(t);o.valueOf()<l;){var i=o.getTime(),s=new Date(i).setDate(o.getDate()+1);o=new Date(s),r.push({dayStart:i,dayEnd:s})}return r.map((function(n){var t=n.dayStart,r=n.dayEnd,o=new Date(t),i=t-a,s=i+(r-t),l=Math.max(0,i/e*100),d=Math.min(100,s/e*100);return{label:c(o,Ye),key:o.toString(),left:l,width:d-l}}))}),[l,c,a]),h=r.useMemo((function(){var e=l-a,t=a-a%n,r=Math.ceil(e/n)+1;return(0,Y.Z)(new Array(r)).map((function(r,o){var i=t+o*n,s=new Date(i);return{label:c(s,en).replace(" ",""),key:s.toString(),left:(i-a)/e*100}})).filter((function(e){return e.left>0}))}),[l,a,n,c]),p=Date.now(),f="".concat(((p-a)/(l-a)*100).toPrecision(3),"%");return(0,w.jsxs)(tn,{style:{height:"".concat(o,"px")},children:[(0,w.jsx)(rn,{children:u.map((function(e){return(0,w.jsx)(on,{style:{left:"".concat(e.left.toPrecision(3),"%"),width:"".concat(e.width.toPrecision(3),"%")},children:e.width>10?(0,w.jsx)(d.x,{flex:{justifyContent:"center"},children:e.label}):null},e.key)}))}),(0,w.jsx)(rn,{children:h.map((function(e){return(0,w.jsx)(sn,{style:{left:"".concat(e.left.toPrecision(3),"%")},children:e.label},e.key)}))}),(0,w.jsxs)(an,{children:[(0,w.jsx)(ln,{style:{left:0,backgroundColor:O.w.Gray200}}),h.map((function(e){return(0,w.jsx)(ln,{style:{left:"".concat(e.left.toPrecision(3),"%")}},e.key)})),p>=a&&p<=l?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(cn,{style:{left:f},children:"Now"}),(0,w.jsx)(ln,{style:{left:f,backgroundColor:O.w.Blue500,zIndex:1}})]}):null]})]})},tn=Ee.ZP.div.withConfig({displayName:"RunTimeline__DividerContainer",componentId:"sc-1k6kbha-2"})(["position:absolute;top:0;left:","px;right:0;font-family:",";color:",";"],320,Ne.b.monospace,O.w.Gray800),rn=Ee.ZP.div.withConfig({displayName:"RunTimeline__DividerLabels",componentId:"sc-1k6kbha-3"})(["display:flex;align-items:center;box-shadow:inset 1px 0 0 ",",inset 0 1px 0 ",",inset -1px 0 0 ",";height:","px;position:relative;user-select:none;font-size:12px;width:100%;overflow:hidden;"],O.w.KeylineGray,O.w.KeylineGray,O.w.KeylineGray,32),on=Ee.ZP.div.withConfig({displayName:"RunTimeline__DateLabel",componentId:"sc-1k6kbha-4"})(["position:absolute;padding:8px 0;box-shadow:inset 1px 0 0 ",";white-space:nowrap;"],O.w.KeylineGray),sn=Ee.ZP.div.withConfig({displayName:"RunTimeline__TimeLabel",componentId:"sc-1k6kbha-5"})(["position:absolute;padding:8px;box-shadow:inset 1px 0 0 ",";white-space:nowrap;"],O.w.KeylineGray),an=Ee.ZP.div.withConfig({displayName:"RunTimeline__DividerLines",componentId:"sc-1k6kbha-6"})(["height:100%;position:relative;width:100%;box-shadow:inset 1px 0 0 ",",inset -1px 0 0 ",";"],O.w.KeylineGray,O.w.KeylineGray),ln=Ee.ZP.div.withConfig({displayName:"RunTimeline__DividerLine",componentId:"sc-1k6kbha-7"})(["background-color:",";height:100%;position:absolute;top:0;width:1px;"],O.w.KeylineGray),cn=Ee.ZP.div.withConfig({displayName:"RunTimeline__NowMarker",componentId:"sc-1k6kbha-8"})(["background-color:",";border-radius:1px;color:",";cursor:default;font-size:12px;line-height:12px;margin-left:-12px;padding:1px 4px;position:absolute;top:-14px;user-select:none;"],O.w.Blue500,O.w.White),dn=function(e){var n=e.job,t=e.top,o=e.range,i=e.width,s=(0,A.Z)(o,2),a=s[0],l=s[1],c=i-320,u=n.runs,h=r.useMemo((function(){var e=function(e){for(var n=e.runs,t=e.start,r=e.end,o=e.width,i=e.minChunkWidth,s=e.minMultipleWidth,a=r-t,l=(Date.now()-t)/(r-t)*o,c=n.map((function(e){var n=e.startTime,r=e.endTime||Date.now();return{runs:[e],startTime:n,endTime:r,left:Math.max(0,Math.floor((n-t)/a*o)),width:Math.max(i,Math.min(Math.ceil((r-n)/a*o),Math.ceil((r-t)/a*o)))}})).sort((function(e,n){return n.left-e.left})),d=[];c.length;){var u=c.shift(),h=c[0];if(u)if(h&&$e(u,h,s,l)){c.shift(),u.runs=[].concat((0,Y.Z)(u.runs),(0,Y.Z)(h.runs)),u.startTime=Math.min(u.startTime,h.startTime),u.endTime=Math.max(u.endTime,h.endTime);var p=Math.max(u.left+s,u.left+u.width,h.left+h.width),f=Math.min(u.left,h.left);u.width=p-f,u.left=f,c.unshift(u)}else d.push(u)}return d}({runs:u,start:a,end:l,width:c,minChunkWidth:2,minMultipleWidth:12});return e}),[u,a,l,c]);return n.runs.length?(0,w.jsxs)(pn,{$top:t,children:[(0,w.jsxs)(fn,{children:[(0,w.jsx)(_e.JO,{name:"asset"===n.jobType?"asset":"job"}),(0,w.jsx)("div",{style:{width:268},children:"asset"===n.jobType?(0,w.jsx)("span",{style:{color:O.w.Gray900},children:(0,w.jsx)(Ae.g,{text:n.jobName})}):(0,w.jsx)(Oe.rU,{to:n.path,children:(0,w.jsx)(Ae.g,{text:n.jobName})})})]}),(0,w.jsx)(xn,{children:h.map((function(e){var t=e.left,r=e.width,o=e.runs.length;return(0,w.jsx)(mn,{$background:Be(e.runs),$multiple:o>1,style:{left:"".concat(t,"px"),width:"".concat(r,"px")},children:(0,w.jsx)(Ie.J,{content:(0,w.jsx)(vn,{job:n,batch:e}),position:"top",interactionKind:"hover",className:"chunk-popover-target",children:(0,w.jsx)(d.x,{flex:{direction:"row",justifyContent:"center",alignItems:"center"},style:{height:"100%"},children:o>1?(0,w.jsx)(gn,{children:e.runs.length}):null})})},e.runs[0].id)}))})]}):null},un=function(e){var n=e.loading,t=e.includesTicks;return(0,w.jsx)(d.x,{background:O.w.White,padding:{vertical:24},flex:{direction:"row",justifyContent:"center"},border:{side:"horizontal",width:1,color:O.w.KeylineGray},children:n?(0,w.jsxs)(d.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,w.jsx)(I.$,{purpose:"body-text"}),t?"Loading runs and scheduled ticks":"Loading runs"]}):(0,w.jsxs)(d.x,{flex:{direction:"column",gap:12,alignItems:"center"},children:[(0,w.jsx)("div",{children:t?"No runs or scheduled ticks in this time period.":"No runs in this time period."}),(0,w.jsxs)(d.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,w.jsx)(Ze.A,{icon:(0,w.jsx)(_e.JO,{name:"add_circle"}),to:"/overview/jobs",children:"Launch a run"}),(0,w.jsx)("span",{children:"or"}),(0,w.jsx)(Ze.A,{icon:(0,w.jsx)(_e.JO,{name:"materialization"}),to:"/asset-groups",children:"Materialize an asset"})]})]})})},hn=Ee.ZP.div.withConfig({displayName:"RunTimeline__Timeline",componentId:"sc-1k6kbha-9"})([""," position:relative;"],(function(e){var n=e.$height;return"height: ".concat(n,"px;")})),pn=Ee.ZP.div.withConfig({displayName:"RunTimeline__Row",componentId:"sc-1k6kbha-10"})(["align-items:center;box-shadow:inset 0 -1px 0 ",";display:flex;flex-direction:row;width:100%;height:","px;padding:1px 0;position:absolute;left:0;top:0;",":first-child,:hover{box-shadow:inset 0 1px 0 ",",inset 0 -1px 0 ",";}:hover{background-color:",";}"],O.w.KeylineGray,33,(function(e){var n=e.$top;return"transform: translateY(".concat(n,"px);")}),O.w.KeylineGray,O.w.KeylineGray,O.w.Gray10),fn=Ee.ZP.div.withConfig({displayName:"RunTimeline__JobName",componentId:"sc-1k6kbha-11"})(["align-items:center;display:flex;font-size:13px;justify-content:flex-start;gap:8px;line-height:16px;overflow:hidden;padding:0 12px 0 24px;text-overflow:ellipsis;white-space:nowrap;width:","px;"],320),xn=Ee.ZP.div.withConfig({displayName:"RunTimeline__RunChunks",componentId:"sc-1k6kbha-12"})(["flex:1;position:relative;height:","px;"],We),mn=Ee.ZP.div.withConfig({displayName:"RunTimeline__RunChunk",componentId:"sc-1k6kbha-13"})(["align-items:center;background:",";border-radius:2px;height:","px;position:absolute;top:2px;",";transition:background-color 300ms linear,width 300ms ease-in-out;.chunk-popover-target{display:block;height:100%;width:100%;}"],(function(e){return e.$background}),28,(function(e){return e.$multiple?"min-width: ".concat(12,"px"):null})),gn=Ee.ZP.div.withConfig({displayName:"RunTimeline__BatchCount",componentId:"sc-1k6kbha-14"})(["color:",";cursor:default;font-family:",";font-size:14px;font-weight:600;user-select:none;"],O.w.White,Ne.b.monospace),vn=function(e){var n=e.job,t=e.batch,r=t.runs.slice(0,50),o=t.runs.length-r.length;return(0,w.jsxs)(d.x,{style:{width:"260px"},children:[(0,w.jsx)(d.x,{padding:12,border:{side:"bottom",width:1,color:O.w.KeylineGray},children:(0,w.jsx)(jn,{children:n.jobName})}),(0,w.jsx)("div",{style:{maxHeight:"240px",overflowY:"auto"},children:r.map((function(e,n){return(0,w.jsxs)(d.x,{border:n>0?{side:"top",width:1,color:O.w.KeylineGray}:null,flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},padding:{vertical:8,horizontal:12},children:[(0,w.jsxs)(d.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,w.jsx)(Me.O_,{status:e.status,size:8}),"SCHEDULED"===e.status?"Scheduled":(0,w.jsx)(Oe.rU,{to:"/runs/".concat(e.id),children:(0,w.jsx)(c.fv,{children:e.id.slice(0,8)})})]}),(0,w.jsx)(c.fv,{children:"SCHEDULED"===e.status?(0,w.jsx)(Le.v,{timestamp:e.startTime/1e3}):(0,w.jsx)(Ue.Q,{startUnix:e.startTime/1e3,endUnix:e.endTime/1e3})})]},e.id)}))}),o>0?(0,w.jsx)(d.x,{padding:12,border:{side:"top",width:1,color:O.w.KeylineGray},children:(0,w.jsxs)(Oe.rU,{to:"".concat(n.path,"runs"),children:["+ ",o," more"]})}):null]})},jn=Ee.ZP.strong.withConfig({displayName:"RunTimeline__HoverContentJobName",componentId:"sc-1k6kbha-15"})(["display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%;"]),yn=t(43913),wn=t(25582),bn=function(e,n){return"".concat(n,"-").concat((0,F.Uz)(e))},kn=(0,g.B)("\n  query RunTimelineQuery(\n    $inProgressFilter: RunsFilter!\n    $terminatedFilter: RunsFilter!\n    $tickCursor: Float\n    $ticksUntil: Float\n  ) {\n    unterminated: runsOrError(filter: $inProgressFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          repositoryOrigin {\n            id\n            repositoryName\n            repositoryLocationName\n          }\n          ...RunTimeFragment\n        }\n      }\n    }\n    terminated: runsOrError(filter: $terminatedFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          repositoryOrigin {\n            id\n            repositoryName\n            repositoryLocationName\n          }\n          ...RunTimeFragment\n        }\n      }\n    }\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          name\n          loadStatus\n          displayMetadata {\n            key\n            value\n          }\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n                schedules {\n                  id\n                  name\n                  pipelineName\n                  scheduleState {\n                    id\n                    status\n                  }\n                  ...ScheduleFutureTicksFragment\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"),Cn=36e5,Sn=function(e){switch(e){case"1":return Cn;case"6":return 216e5;case"12":return 432e5;case"24":return 864e5}},Tn=function(){(0,m.Px)(),(0,v.j)("Runs");var e=r.useContext(z.C5),n=e.allRepos,t=e.visibleRepos,o=r.useState(""),u=(0,A.Z)(o,2),h=u[0],p=u[1],f=function(e){var n=r.useCallback((function(n){switch(n){case"1":case"6":case"12":case"24":return n;default:return e}}),[e]),t=(0,B.U)("dagit.run-timeline-hour-window",n),o=(0,A.Z)(t,2),i=o[0],s=o[1],a=r.useCallback((function(n){s(n||e)}),[e,s]);return r.useMemo((function(){return[i,a]}),[i,a])}("12"),g=(0,A.Z)(f,2),j=g[0],y=g[1],k=r.useState((function(){return Date.now()})),C=(0,A.Z)(k,2),S=C[0],T=C[1],E=r.useState((function(){return 0})),N=(0,A.Z)(E,2),I=N[0],O=N[1];r.useEffect((function(){T(Date.now());var e=setInterval((function(){T(Date.now())}),6e4);return function(){clearInterval(e)}}),[j]);var F=r.useCallback((function(){O((function(e){return e-Sn(j)}))}),[j]),M=r.useCallback((function(){O((function(e){return e+Sn(j)}))}),[j]),D=r.useCallback((function(){O(0)}),[]),U=r.useMemo((function(){return[S-Number(j)*Cn+I,S+36e5+I]}),[j,S,I]),G=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,A.Z)(e,2),o=t[0],a=t[1],l=o/1e3,c=a/1e3,d=(0,s.a)(kn,{fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0,variables:{inProgressFilter:(0,i.Z)((0,i.Z)({},n),{},{statuses:[yn.VOA.CANCELING,yn.VOA.STARTED],createdBefore:c}),terminatedFilter:(0,i.Z)((0,i.Z)({},n),{},{statuses:Array.from(De.cv),createdBefore:c,updatedAfter:l}),tickCursor:l,ticksUntil:c}}),u=d.data,h=d.previousData,p=d.loading&&!u,f=u||h||{},x=f.unterminated,m=f.terminated,g=f.workspaceOrError,v=r.useMemo((function(){var e={},n=Date.now();return[].concat((0,Y.Z)("Runs"===(null===x||void 0===x?void 0:x.__typename)?x.results:[]),(0,Y.Z)("Runs"===(null===m||void 0===m?void 0:m.__typename)?m.results:[])).forEach((function(t){if(t.startTime&&t.repositoryOrigin&&Ge({start:o,end:a},{start:1e3*t.startTime,end:t.endTime?1e3*t.endTime:n})){var r=bn({name:t.repositoryOrigin.repositoryName,location:t.repositoryOrigin.repositoryLocationName},t.pipelineName);e[r]=[].concat((0,Y.Z)(e[r]||[]),[{id:t.id,status:t.status,startTime:1e3*t.startTime,endTime:t.endTime?1e3*t.endTime:n}])}})),e}),[a,x,m,o]),j=r.useMemo((function(){if(!g||"Workspace"!==g.__typename)return[];var e,n=[],t=(0,_.Z)(g.locationEntries);try{var r=function(){var t,r=e.value;if("WorkspaceLocationEntry"!==r.__typename||"RepositoryLocation"!==(null===(t=r.locationOrLoadError)||void 0===t?void 0:t.__typename))return"continue";var i,s=Date.now(),l=(0,_.Z)(r.locationOrLoadError.repositories);try{for(l.s();!(i=l.n()).done;){var c,d=i.value,u=(0,P.kQ)(d.name,r.locationOrLoadError.name),h=(0,_.Z)(d.pipelines);try{var p=function(){var e,t=c.value,r=(d.schedules||[]).filter((function(e){return e.pipelineName===t.name})),i=[],l=(0,_.Z)(r);try{var h=function(){var n=e.value;n.scheduleState.status===yn.ynu.RUNNING&&n.futureTicks.results.forEach((function(e){var t=e.timestamp,r=1e3*t;r>s&&Ge({start:o,end:a},{start:r,end:r})&&i.push({id:"".concat(n.pipelineName,"-future-run-").concat(t),status:"SCHEDULED",startTime:r,endTime:r+5e3})}))};for(l.s();!(e=l.n()).done;)h()}catch(g){l.e(g)}finally{l.f()}var p=(0,Z.pv)(t.name),f=bn(u,t.name),x=p?"Ad hoc materializations":t.name,m=v[f]||[];(i.length||m.length)&&n.push({key:f,jobName:x,jobType:p?"asset":"job",repoAddress:u,path:(0,wn.jT)({repoName:u.name,repoLocation:u.location,pipelineName:t.name,isJob:t.isJob}),runs:[].concat((0,Y.Z)(m),i)})};for(h.s();!(c=h.n()).done;)p()}catch(f){h.e(f)}finally{h.f()}}}catch(f){l.e(f)}finally{l.f()}};for(t.s();!(e=t.n()).done;)r()}catch(l){t.e(l)}finally{t.f()}var s=n.reduce((function(e,n){var t=n.runs.map((function(e){return e.startTime}));return(0,i.Z)((0,i.Z)({},e),{},(0,Te.Z)({},n.key,Math.min.apply(Math,(0,Y.Z)(t))))}),{});return n.sort((function(e,n){return s[e.key]-s[n.key]}))}),[g,v,o,a]);return r.useMemo((function(){return{jobs:j,initialLoading:p,queryData:d}}),[p,j,d])}(U),$=G.jobs,K=G.initialLoading,W=G.queryData,q=(0,x.C4)(W,x.dT),H=r.useMemo((function(){var e=h.toLocaleLowerCase().trim(),n=t.flatMap((function(n){var t=(0,P.kQ)(n.repository.name,n.repositoryLocation.name);return n.repository.pipelines.filter((function(n){return n.name.toLocaleLowerCase().includes(e)})).map((function(e){return bn(t,e.name)}))}));return new Set(n)}),[t,h]),V=r.useMemo((function(){return $.filter((function(e){var n=e.key;return H.has(n)}))}),[$,H]);return(0,w.jsxs)(a.T,{children:[(0,w.jsx)(l.m,{title:(0,w.jsx)(c.X6,{children:"Overview"}),tabs:(0,w.jsx)(b,{tab:"timeline",refreshState:q})}),(0,w.jsxs)(d.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",justifyContent:"space-between"},children:[(0,w.jsxs)(d.x,{flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[n.length>1&&(0,w.jsx)(R.C,{}),(0,w.jsx)(L.oi,{icon:"search",value:h,onChange:function(e){return p(e.target.value)},placeholder:"Filter by job name\u2026",style:{width:"200px"}})]}),(0,w.jsxs)(d.x,{flex:{direction:"row",gap:16,alignItems:"center"},children:[(0,w.jsx)(Se.h,{activeItems:new Set([j]),buttons:[{id:"1",label:"1hr"},{id:"6",label:"6hr"},{id:"12",label:"12hr"},{id:"24",label:"24hr"}],onClick:function(e){return y(e)}}),(0,w.jsxs)(d.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,w.jsx)(oe.zx,{onClick:F,children:"\u2190"}),(0,w.jsx)(oe.zx,{onClick:D,children:"Now"}),(0,w.jsx)(oe.zx,{onClick:M,children:"\u2192"})]})]})]}),(0,w.jsx)(qe,{loading:K,range:U,jobs:V})]})},En=function(){return(0,w.jsxs)(o.rs,{children:[(0,w.jsx)(o.AW,{path:"/overview/timeline",children:(0,w.jsx)(Tn,{})}),(0,w.jsx)(o.AW,{path:"/overview/jobs",children:(0,w.jsx)(ne,{})}),(0,w.jsx)(o.AW,{path:"/overview/schedules",children:(0,w.jsx)(de,{})}),(0,w.jsx)(o.AW,{path:"/overview/sensors",children:(0,w.jsx)(je,{})}),(0,w.jsx)(o.AW,{path:"/overview/backfills",children:(0,w.jsx)(T,{})}),(0,w.jsx)(o.AW,{path:"*",render:function(){return(0,w.jsx)(o.l_,{to:"/overview/timeline"})}})]})},Nn=En},79422:function(e,n,t){var r=t(88567);e.exports=function(e,n){return!!(null==e?0:e.length)&&r(e,n,0)>-1}},7849:function(e){e.exports=function(e,n,t){for(var r=-1,o=null==e?0:e.length;++r<o;)if(t(n,e[r]))return!0;return!1}},72983:function(e,n,t){var r=t(6031);e.exports=function(e,n,t){"__proto__"==n&&r?r(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t}},20611:function(e){e.exports=function(e,n,t,r){for(var o=e.length,i=t+(r?1:-1);r?i--:++i<o;)if(n(e[i],i,e))return i;return-1}},88567:function(e,n,t){var r=t(20611),o=t(5760),i=t(83328);e.exports=function(e,n,t){return n===n?i(e,n,t):r(e,o,t)}},5760:function(e){e.exports=function(e){return e!==e}},33976:function(e,n,t){var r=t(7124),o=t(79422),i=t(7849),s=t(4294),a=t(19077),l=t(46138);e.exports=function(e,n,t){var c=-1,d=o,u=e.length,h=!0,p=[],f=p;if(t)h=!1,d=i;else if(u>=200){var x=n?null:a(e);if(x)return l(x);h=!1,d=s,f=new r}else f=n?[]:p;e:for(;++c<u;){var m=e[c],g=n?n(m):m;if(m=t||0!==m?m:0,h&&g===g){for(var v=f.length;v--;)if(f[v]===g)continue e;n&&f.push(g),p.push(m)}else d(f,g,t)||(f!==p&&f.push(g),p.push(m))}return p}},19077:function(e,n,t){var r=t(1465),o=t(19715),i=t(46138),s=r&&1/i(new r([,-0]))[1]==1/0?function(e){return new r(e)}:o;e.exports=s},83328:function(e){e.exports=function(e,n,t){for(var r=t-1,o=e.length;++r<o;)if(e[r]===n)return r;return-1}},19715:function(e){e.exports=function(){}}}]);
//# sourceMappingURL=201.1350cb39.chunk.js.map