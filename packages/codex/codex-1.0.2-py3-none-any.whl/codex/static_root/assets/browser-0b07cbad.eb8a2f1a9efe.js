import{ak as W,a as S,L as p,c as y,o as a,e as m,w as u,g as i,j as l,t as h,al as D,D as v,b as C,f as w,am as be,z as T,A as x,an as J,ao as F,ap as U,d as g,i as s,aq as ye,ar as Z,p as O,q as L,_ as ee,v as te,as as ve,l as N,at as we,au as Se,n as M,r as P,F as I,av as Be,aw as Ce,V as A,ax as ke,ay as Te,az as V,aA as $e,aB as xe,aC as Ve,B as G,aD as Me,aE as Ie,aF as Re,aG as Pe,k as j,aH as Fe,aI as Ne,aJ as Oe,aK as Le,C as B,aL as De,aM as Ue,aN as oe,aO as z,aP as Ae,aQ as Ge,aR as je,aS as qe,J as q,aT as Ee,aU as He,aV as se,aW as ze,aX as Qe,aY as Xe,aZ as Q,a_ as X,a$ as Ye,b0 as Ke,M as We,b1 as Je,b2 as Ze,b3 as et,b4 as tt,b5 as ot,b6 as st,S as nt,b7 as rt,b8 as at,b9 as it,ba as lt,bb as ne,bc as re,bd as ut}from"./admin-55157290.js";import{_ as ae,a as ie,b as le,t as dt,h as Y,c as ct,d as ue,g as mt,P as de}from"./metadata-dialog-3caa9cc7.js";const pt={name:"BrowserNavButton",components:{PaginationNavButton:ae},props:{back:{type:Boolean,required:!0}},data(){return{mdiChevronLeft:W}},computed:{...S(p,{numPages:e=>e.page.numPages}),increment(){return this.back?-1:1},toPage(){return+this.$route.params.page+this.increment},title(){return"to page"+this.toPage},toRoute(){return{params:{...this.$route.params,page:this.toPage}}},disabled(){return this.back&&+this.$route.params.page<=1||!this.back&&+this.$route.params.page>=this.numPages}}};function _t(e,t,n,_,r,o){const c=ae;return a(),m(c,{disabled:o.disabled,title:o.title,to:o.toRoute},{default:u(()=>[i(v,{class:D({flipHoriz:!n.back})},{default:u(()=>[l(h(r.mdiChevronLeft),1)]),_:1},8,["class"])]),_:1},8,["disabled","title","to"])}const ce=y(pt,[["render",_t],["__scopeId","data-v-7b8e4ba4"]]),ht={name:"BrowserNavToolbar",components:{BrowserNavButton:ce,PaginationSlider:ie,PaginationToolbar:le},computed:{...S(p,{numPages:e=>e.page.numPages})},methods:{...C(p,["routeToPage"]),onUpdate(e){this.routeToPage(e)}}};function ft(e,t,n,_,r,o){const c=ce,d=ie,f=le;return e.numPages>1?(a(),m(f,{key:0},{default:u(()=>[i(c,{back:!0}),i(d,{"model-value":+e.$route.params.page,min:1,max:e.numPages,step:1,"onUpdate:modelValue":t[0]||(t[0]=$=>e.routeToPage($))},null,8,["model-value","max"]),i(c,{back:!1})]),_:1})):w("",!0)}const me=y(ht,[["render",ft]]);const gt={name:"BrowserHeader",data(){return{mdiArrowUp:be}},head(){return{meta:[{hid:"description",name:"description",content:["browse comics",this.longBrowserTitlePrefix,this.longBrowseTitleMain,this.longBrowseTitleSuffix].filter(Boolean).join(" ")}]}},computed:{...S(p,{groupNames:e=>e.choices.static.groupNames,browserTitle:e=>e.page.browserTitle,modelGroup:e=>e.page.modelGroup,upRoute:e=>e.page.routes.up}),...T(x,["isCodexViewable","isUserAdmin"]),showUpButton:function(){return this.upRoute&&"group"in this.upRoute},longBrowserTitlePrefix:function(){return this.$route.params.group==="f"?this.browserTitle.parentName:""},longBrowseTitleMain:function(){let e;if(Number(this.$route.params.pk)===0)e="All";else{let t=[];const{parentName:n,groupName:_,groupCount:r}=this.browserTitle;n&&t.push(n);const o=this.$route.params.group,c=o==="v"?J(_):_;if(c&&t.push(c),r){const f=`of ${r}`;t.push(f)}const d=o==="f"?"/":" ";e=t.join(d)}return e},longBrowseTitleSuffix:function(){return this.$route.params.group==="f"?"":this.groupNames[this.modelGroup]},upTitle(){const e=this.$route.params.group||"";return`Up to ${this.groupNames[e]||"All"}`}}},pe=e=>(O("data-v-519a68a0"),e=e(),L(),e),bt={key:0,id:"titleToolbarPrefix"},yt=pe(()=>s("br",null,null,-1)),vt={id:"titleToolbarMain"},wt={key:1,id:"titleToolbarSuffix"},St=pe(()=>s("br",null,null,-1));function Bt(e,t,n,_,r,o){return a(),m(Z,{id:"titleToolbar",elevation:"8"},{default:u(()=>[e.isCodexViewable?(a(),m(F,{key:0},{default:u(()=>[i(U,{id:"upButton",icon:"",size:"x-large",class:D({invisible:!o.showUpButton}),disabled:!o.showUpButton,title:o.upTitle,to:{params:e.upRoute}},{default:u(()=>[i(v,null,{default:u(()=>[l(h(r.mdiArrowUp),1)]),_:1})]),_:1},8,["class","disabled","title","to"])]),_:1})):w("",!0),i(ye,{class:"codexToolbarTitle"},{default:u(()=>[o.longBrowserTitlePrefix?(a(),g("span",bt,[l(h(o.longBrowserTitlePrefix)+" ",1),yt])):w("",!0),s("span",vt,h(o.longBrowseTitleMain),1),o.longBrowseTitleSuffix?(a(),g("span",wt,[St,l(" "+h(o.longBrowseTitleSuffix),1)])):w("",!0)]),_:1})]),_:1})}const _e=y(gt,[["render",Bt],["__scopeId","data-v-519a68a0"]]);const Ct=[["community_rating","Decimal",""],["characters","CSV","character"],["country","String",""],["created_at","DateTime","created"],["creators","CSV","creator"],["critical_rating","Decimal",""],["day","Integer",""],["date","Date",""],["decade","Integer",""],["description","String",""],["format","String",""],["genres","CSV","genre"],["imprint","String",""],["in_progress","Boolean","reading"],["issue","Decimal",""],["language","String",""],["locations","CSV","location"],["maturity_rating","String",""],["month","Integer",""],["read_ltr","Boolean","ltr"],["name","String","title"],["notes","String",""],["page_count","Integer",""],["publisher","String",""],["scan_info","String","scan"],["series","String",""],["series_groups","CSV","series_group"],["size","Integer",""],["story_arcs","CSV","story_arc"],["summary","String",""],["tags","CSV","tag"],["teams","CSV","team"],["updated_at","Date","updated"],["unread","Boolean","finished, read"],["volume","String",""],["web","String",""],["year","Integer",""]],kt={name:"SearchHelp",components:{CloseButton:ee},data(){return{mdiOpenInNew:te,mdiArchiveSearchOutline:ve,dialog:!1,FIELD_ROWS:Ct}}},b=e=>(O("data-v-f6f34e57"),e=e(),L(),e),Tt={id:"searchHelp"},$t=b(()=>s("h1",null,"Search Syntax Help",-1)),xt={id:"fieldTableContainer"},Vt=b(()=>s("h2",null,"Search Fields",-1)),Mt={id:"fieldTable",class:"highlight-table"},It=b(()=>s("thead",null,[s("tr",null,[s("th",null,"Field"),s("th",null,"Type"),s("th",null,"Aliases")])],-1)),Rt={id:"textContainer"},Pt=b(()=>s("h2",null,"Xapian Query Parser",-1)),Ft={href:"https://xapian.org/docs/queryparser.html",target:"_blank"},Nt=b(()=>s("h2",null,"Searching Fields",-1)),Ot=b(()=>s("p",null,[l(" Like Codex's filter selector menu, but more powerful, you may search on individual comic metadata fields. using a search token like "),s("code",null,"field:value"),l(". ")],-1)),Lt=b(()=>s("h3",null,"Dates and DateTimes",-1)),Dt={href:"https://en.wikipedia.org/wiki/ISO_8601",target:"_blank"},Ut=b(()=>s("h3",null,"Size Byte Multipliers",-1)),At=b(()=>s("p",null,[l(" The size field can make use of convenient byte multiplier suffixes like "),s("code",null,"kb"),l(" and "),s("code",null,"mb"),l(" as well as binary suffixes like "),s("code",null,"gib"),l(" and "),s("code",null,"tib"),l(". ")],-1)),Gt=b(()=>s("h3",null,"Ranges of Fields",-1)),jt=b(()=>s("p",null,[l(" Codex uses two dots "),s("code",null,".."),l(" to delineate a range search in a field value. If you leave out the upper or lower bound, the wildcard "),s("code",null,"*"),l(" will tacitily take it's place. Range tokens look like "),s("code",null,"field:lower..upper"),l(" Be careful your range search doesn't contain three or more dots. This will cause codex to discard the upper bound value. ")],-1)),qt=b(()=>s("h3",null,"Multi Value Field",-1)),Et=b(()=>s("p",null,[l(" Fields marked type "),s("code",null,"CSV"),l(" may contain comma separated values. This filters by all the supplied values. Multi Value tokens look like: "),s("code",null,"field:term1,term2,term3")],-1)),Ht=b(()=>s("h2",null,"Example Search",-1)),zt=b(()=>s("p",null," This example search is more convoluted than most searches but uses many features for demonstration: ",-1)),Qt=b(()=>s("code",null,' Holmes AND Tesla date:1999-1-2.. size:10mib..1gb Gadzooks NEAR "Captain Nemo" -Quartermain ',-1)),Xt=b(()=>s("p",{style:{"margin-top":"1em"}},' Search for comics that contain Holmes and Tesla published after the second day of 1999 that are between 10 Mebibytes and 10 Gigabytes that also contain the word "Gadzooks" near the phrase "Captain Nemo" but do not contain the word "Quartermain". ',-1)),Yt=b(()=>s("h2",null,"Group and Sorting Behavior",-1)),Kt=b(()=>s("p",null," If the search field is empty and then you supply a search query for the first time, Codex navigates you to the to All Issues view and your sets your Sorted By selection to Search Score. If you prefer a different view you may change the group and sort selections after your you make your first search. ",-1)),Wt=b(()=>s("h2",null,"Filter Behavior",-1)),Jt=b(()=>s("p",null,[l(" Codex applies "),s("em",null,"both"),l(" the Filter selection menu filters "),s("em",null,"and"),l(" the search query field filters to the search. Be sure to clear the filter selector or the search field if you prefer to apply only one of them. ")],-1));function Zt(e,t,n,_,r,o){const c=ee;return a(),m(Be,{modelValue:r.dialog,"onUpdate:modelValue":t[2]||(t[2]=d=>r.dialog=d),fullscreen:"",transition:"dialog-bottom-transition","content-class":"browserSearchHelp"},{activator:u(({props:d})=>[i(M,we(Se(d)),{default:u(()=>[i(N,null,{default:u(()=>[i(v,null,{default:u(()=>[l(h(r.mdiArchiveSearchOutline),1)]),_:1}),l("Search Syntax Help ")]),_:1})]),_:2},1040)]),default:u(()=>[s("div",Tt,[i(c,{class:"closeButton",title:"Close Help (esc)",size:"x-large",onClick:t[0]||(t[0]=d=>r.dialog=!1)}),$t,s("div",xt,[Vt,s("table",Mt,[It,s("tbody",null,[(a(!0),g(I,null,P(r.FIELD_ROWS,d=>(a(),g("tr",{key:d[0]},[s("td",null,h(d[0]),1),s("td",null,h(d[1]),1),s("td",null,h(d[2]),1)]))),128))])])]),s("div",Rt,[Pt,s("p",null,[l(" Codex uses the Xapian search backend to execute your text search queries. Xapian operates much like other familiar search engines. As such, I document only some special features on this page. I encourage users looking to understand its full power to read the "),s("a",Ft,[l("Xapian Query Parser Syntax documentation "),i(v,{size:"small"},{default:u(()=>[l(h(r.mdiOpenInNew),1)]),_:1})]),l(". ")]),Nt,Ot,Lt,s("p",null,[l(" Codex parses Dates and DateTime values liberally. If the format you enter fails, the "),s("a",Dt,[l("ISO 8601 format"),i(v,{size:"small"},{default:u(()=>[l(h(r.mdiOpenInNew),1)]),_:1})]),l(" is reliable. ")]),Ut,At,Gt,jt,qt,Et,Ht,zt,Qt,Xt,Yt,Kt,Wt,Jt]),i(c,{class:"closeButton",title:"Close Help (esc)",size:"x-large",onClick:t[1]||(t[1]=d=>r.dialog=!1)})])]),_:1},8,["modelValue"])}const he=y(kt,[["render",Zt],["__scopeId","data-v-f6f34e57"]]);const eo={name:"BrowserSettingsPanel",components:{SearchHelp:he},computed:{...T(x,["isCodexViewable"]),...S(p,{groupChoices:e=>e.choices.static.settingsGroup,showSettings:e=>e.settings.show})},methods:{...C(p,["setSettings"]),setShow:function(e,t){const n={show:{[e]:t===!0}};this.setSettings(n)}}},to=e=>(O("data-v-1828e6e1"),e=e(),L(),e),oo=to(()=>s("div",{id:"groupCaption",class:"text-caption"}," Show these groups when navigating the browse tree. ",-1));function so(e,t,n,_,r,o){const c=he;return a(),g(I,null,[oo,(a(!0),g(I,null,P(e.groupChoices,d=>(a(),m(Ce,{key:d.title,class:"browserGroupCheckbox",density:"compact","hide-details":"auto","model-value":e.showSettings[d.value],"true-value":!0,label:`Show ${d.title}`,"onUpdate:modelValue":f=>o.setShow(d.value,f)},null,8,["model-value","label","onUpdate:modelValue"]))),128)),i(A),i(c)],64)}const no=y(eo,[["render",so],["__scopeId","data-v-1828e6e1"]]);const ro={name:"ToolbarSelect",props:{selectLabel:{type:String,default:""},maxSelectLen:{type:Number,default:0},mobileLenAdj:{type:Number,default:0},variant:{type:String,default:"plain"}},computed:{style(){const e=this.$vuetify.display.smAndDown?this.mobileLenAdj:0,n=this.maxSelectLen+e+"em";return`width: ${n}; min-width: ${n}; max-width: ${n}`}}};function ao(e,t,n,_,r,o){return a(),m($e,V(e.$attrs,{label:n.selectLabel,"aria-label":n.selectLabel,class:"toolbarSelect",density:"compact","full-width":"","hide-details":"auto",style:o.style,variant:n.variant}),ke({_:2},[P(e.$slots,(c,d)=>({name:d,fn:u(f=>[Te(e.$slots,d,V({props:c},f),void 0,!0)])}))]),1040,["label","aria-label","style","variant"])}const k=y(ro,[["render",ao],["__scopeId","data-v-40f584fc"]]);const io=new Set(["",-1]),lo={name:"BrowserFilterSubMenu",props:{name:{type:String,required:!0}},emits:["selected"],data(){return{mdiChevronLeft:W,mdiChevronRight:xe,mdiChevronRightCircle:Ve,query:""}},computed:{...S(p,{choices:function(e){return e.choices.dynamic[this.name]},filter:function(e){return e.settings.filters[this.name]}}),...G(p,["filterMode"]),vuetifyItems(){return dt(this.choices,this.query,Ie.includes(this.name),Me.includes(this.name))},title:function(){let e=this.name.replaceAll(/[A-Z]/g,t=>` ${t}`);return e=e.replace("Ltr","LTR"),e=e[0].toUpperCase()+e.slice(1),e},lowerTitle:function(){return this.title.toLowerCase()}},methods:{...C(p,["loadFilterChoices"]),setUIFilterMode(e){this.filterMode=e,this.query="",e!=="base"&&typeof this.choices!="object"&&this.loadFilterChoices(e)},isNullPk:e=>io.has(e),selected(e){const t={filters:{[this.name]:e}};this.$emit("selected",t)},itemTitle(e){return this.isNullPk(e.value)?"None":e.title}}},uo={key:0},co={class:"filterHeader"};function mo(e,t,n,_,r,o){return a(),g("div",null,[i(Re,{"hide-on-leave":""},{default:u(()=>[e.filterMode==="base"?(a(),m(M,{key:0,onClick:t[0]||(t[0]=c=>o.setUIFilterMode(n.name))},{default:u(()=>[i(N,{class:"filterMenu"},{default:u(()=>[l(h(o.title)+" ",1),e.filter&&e.filter.length>0?(a(),m(v,{key:0,class:"nameChevron"},{default:u(()=>[l(h(r.mdiChevronRightCircle),1)]),_:1})):(a(),m(v,{key:1,class:"nameChevron"},{default:u(()=>[l(h(r.mdiChevronRight),1)]),_:1}))]),_:1})]),_:1})):w("",!0)]),_:1}),i(Ne,{"hide-on-leave":""},{default:u(()=>[e.filterMode===n.name?(a(),g("div",uo,[s("header",co,[i(M,{onClick:t[1]||(t[1]=c=>o.setUIFilterMode("base"))},{default:u(()=>[i(N,{class:"filterTitle"},{default:u(()=>[i(v,null,{default:u(()=>[l(h(r.mdiChevronLeft),1)]),_:1}),l(h(o.lowerTitle),1)]),_:1})]),_:1}),typeof e.choices=="object"?(a(),m(Pe,{key:0,modelValue:r.query,"onUpdate:modelValue":t[2]||(t[2]=c=>r.query=c),placeholder:"Filter","full-width":"",density:"compact",filled:"",rounded:"","hide-details":"auto",onFocus:t[3]||(t[3]=c=>e.filterMode=n.name)},null,8,["modelValue"])):(a(),m(j,{key:1,class:"filterValuesProgress",rounded:"",indeterminate:""}))]),typeof e.choices=="object"?(a(),m(Fe,{key:0,"model-value":e.filter,class:"filterGroup overflow-y-auto",density:"compact",multiple:"",items:o.vuetifyItems,"onUpdate:selected":o.selected},null,8,["model-value","items","onUpdate:selected"])):w("",!0)])):w("",!0)]),_:1})])}const po=y(lo,[["render",mo],["__scopeId","data-v-307c08e8"]]);const _o={name:"BrowserFilterBySelect",components:{BrowserFilterSubMenu:po,ToolbarSelect:k},extends:k,data(){return{mdiFilterMultipleOutline:Oe,menu:!1}},computed:{...T(p,["filterByChoicesMaxLen","isDefaultBookmarkValueSelected"]),...S(p,{bookmarkChoices:e=>e.choices.static.bookmark,bookmarkFilter:e=>e.settings.filters.bookmark||e.choices.static.bookmark[0],filters:e=>e.settings.filters,isDynamicFiltersSelected:function(e){for(const[t,n]of Object.entries(e.settings.filters))if(t!=="bookmark"&&n&&n.length>0)return!0;return!1},isFiltersClearable:function(){return!this.isDefaultBookmarkValueSelected||this.isDynamicFiltersSelected},filterMenuClass:function(e){let t="filterMenu";return e.filterMode!=="base"&&(t+="Hidden"),t},dynamicChoiceNames:function(e){const t=[];for(const[n,_]of Object.entries(e.choices.dynamic))_&&t.push(n);return t}}),...G(p,["filterMode"]),filterInnerIcon:function(){return this.isFiltersClearable?Le:""}},methods:{...C(p,["clearFilters","loadAvailableFilterChoices","setSettings"]),onUpdateModelValue(e){const t={filters:{bookmark:e}};this.onSubMenuSelected(t)},onSubMenuSelected(e){this.menu=!1,this.setSettings(e),this.filterMode="base"},onClear(){this.clearFilters()},onMenu(e){e&&this.dynamicChoiceNames.length===0&&this.loadAvailableFilterChoices()}}},ho={key:0};function fo(e,t,n,_,r,o){const c=B("BrowserFilterSubMenu"),d=k;return a(),m(d,{menu:r.menu,"onUpdate:menu":[t[0]||(t[0]=f=>r.menu=f),o.onMenu],class:"filterBySelect","select-label":"filter by",clearable:e.isFiltersClearable,items:e.bookmarkChoices,"menu-props":{contentClass:e.filterMenuClass},"model-value":e.bookmarkFilter,"max-select-len":e.filterByChoicesMaxLen+1.5,"mobile-len-adj":-1.5,variant:"solo","onClick:clear":o.onClear,"onUpdate:modelValue":o.onUpdateModelValue},{selection:u(({item:f})=>[l(h(f.title)+" ",1),e.isDynamicFiltersSelected?(a(),m(v,{key:0,class:"filterSuffix"},{default:u(()=>[l(h(r.mdiFilterMultipleOutline),1)]),_:1})):w("",!0)]),"append-item":u(()=>[i(A),e.dynamicChoiceNames&&e.dynamicChoiceNames.length>0?(a(),g("div",ho,[(a(!0),g(I,null,P(e.dynamicChoiceNames,f=>(a(),m(c,{key:f,name:f,onSelected:o.onSubMenuSelected},null,8,["name","onSelected"]))),128))])):(a(),m(M,{key:1},{default:u(()=>[i(j,{indeterminate:"",rounded:""})]),_:1}))]),_:1},8,["menu","clearable","items","menu-props","model-value","max-select-len","mobile-len-adj","onClick:clear","onUpdate:modelValue","onUpdate:menu"])}const go=y(_o,[["render",fo],["__scopeId","data-v-df9de4ed"]]),bo={name:"BrowseOrderBySelect",components:{ToolbarSelect:k},extends:k,computed:{...T(p,["orderByChoices","orderByChoicesMaxLen"]),...S(p,{orderBySetting:e=>e.settings.orderBy}),orderBy:{get(){return this.orderBySetting},set(e){const t={orderBy:e};this.setSettings(t)}}},methods:{...C(p,["setSettings"])}};function yo(e,t,n,_,r,o){const c=k;return a(),m(c,V({modelValue:o.orderBy,"onUpdate:modelValue":t[0]||(t[0]=d=>o.orderBy=d),class:"orderBySelect","select-label":"order by",items:e.orderByChoices,"max-select-len":e.orderByChoicesMaxLen-3.5,"mobile-len-adj":-2},e.$attrs),null,16,["modelValue","items","max-select-len"])}const vo=y(bo,[["render",yo]]);const wo={name:"BrowseOrderReverseButton",computed:{...S(p,{orderReverseSetting:e=>e.settings.orderReverse,orderIcon:e=>e.settings.orderReverse?De:Ue}),density(){return this.$vuetify.display.smAndDown?"compact":"default"},title(){return this.orderReverseSetting?"order descending":"order ascending"}},methods:{...C(p,["setSettings"]),toggleOrderReverse(){const e={orderReverse:!this.orderReverseSetting};this.setSettings(e)}}};function So(e,t,n,_,r,o){return a(),m(U,V({class:"orderReverseButton",density:o.density,height:"46",icon:"",variant:"text"},e.$attrs,{title:o.title,onClick:o.toggleOrderReverse}),{default:u(()=>[i(v,null,{default:u(()=>[l(h(e.orderIcon),1)]),_:1})]),_:1},16,["density","title","onClick"])}const Bo=y(wo,[["render",So],["__scopeId","data-v-44032796"]]),Co={name:"BrowserSearchCombobox",data(){return{mdiMagnify:oe,menu:!1,query:""}},computed:{...S(p,{queries:e=>e.page.queries,stateQ:e=>e.settings.q})},watch:{menu(e){e||this.doSearch(this.query)},stateQ(e){this.query=e}},methods:{...C(p,["setSettings"]),doSearch(){this.menu=!1;const e=this.query?this.query.trim():"";this.setSettings({q:e})}}};function ko(e,t,n,_,r,o){return a(),m(Ae,{ref:"searchbox",modelValue:r.query,"onUpdate:modelValue":t[0]||(t[0]=c=>r.query=c),menu:r.menu,"onUpdate:menu":t[1]||(t[1]=c=>r.menu=c),items:e.queries,autofocus:"","aria-label":"search",clearable:"",density:"compact","full-width":"","hide-details":"auto","hide-selected":"","no-filter":"","prepend-inner-icon":r.mdiMagnify,variant:"solo","onClick:clear":o.doSearch,"onClick:prependInner":o.doSearch,onKeydown:[z(o.doSearch,["enter"]),t[2]||(t[2]=z(c=>r.menu=!1,["esc"]))]},null,8,["modelValue","menu","items","prepend-inner-icon","onClick:clear","onClick:prependInner","onKeydown"])}const To=y(Co,[["render",ko]]);const $o={params:{group:"f",pk:0,page:1}},xo={name:"BrowserTopGroupSelect",components:{ToolbarSelect:k},extends:k,data(){return{FOLDER_ROUTE:$o}},computed:{...S(p,{topGroupSetting:e=>e.settings.topGroup,enableFolderView:e=>e.page.adminFlags.enableFolderView}),...T(p,["topGroupChoices","topGroupChoicesMaxLen"]),topGroup:{get(){return this.topGroupSetting},set(e){const t={topGroup:e};if(this.topGroupSetting==="f"&&e!=="f"||this.topGroupSetting!=="f"&&e==="f"){const _={params:{group:e==="f"?"f":"r",pk:0,page:1}};this.$router.push(_).then(()=>this.setSettings(t)).catch(console.error)}else this.setSettings(t)}}},methods:{...C(p,["setSettings"])}};function Vo(e,t,n,_,r,o){const c=k;return a(),m(c,V(e.$attrs,{modelValue:o.topGroup,"onUpdate:modelValue":t[0]||(t[0]=d=>o.topGroup=d),class:"topGroupSelect","select-label":"top group",items:e.topGroupChoices,"max-select-len":e.topGroupChoicesMaxLen-1,"mobile-len-adj":-2.5}),{item:u(({item:d,props:f})=>[d.value==="f"?(a(),m(A,{key:0})):w("",!0),i(M,V({value:d.value,title:d.title},f),null,16,["value","title"])]),_:1},16,["modelValue","items","max-select-len","mobile-len-adj"])}const Mo=y(xo,[["render",Vo],["__scopeId","data-v-2a9f1094"]]);const Io=Ge("flex-grow-1","div","VSpacer"),Ro={name:"BrowserHeader",components:{BrowserFilterBySelect:go,BrowserTopGroupSelect:Mo,BrowserSearchCombobox:To,BrowserOrderBySelect:vo,BrowserOrderReverseButton:Bo,SettingsDrawerButton:je},data(){return{mdiMagnify:oe,mdiFamilyTree:qe,browseMode:"filter"}},computed:{...T(x,["isCodexViewable"]),...G(q,["isSettingsDrawerOpen"])}};function Po(e,t,n,_,r,o){const c=B("BrowserTopGroupSelect"),d=B("BrowserOrderBySelect"),f=B("BrowserOrderReverseButton"),$=B("SettingsDrawerButton"),R=B("BrowserFilterBySelect"),H=B("BrowserSearchCombobox");return a(),m(Z,{id:"browserToolbar",class:"toolbar",density:"compact","extension-height":"48px"},{extension:u(()=>[e.isCodexViewable?(a(),m(F,{key:0,id:"searchToolbarItems"},{default:u(()=>[i(R,{id:"filterSelect"}),i(H,{id:"searchField"})]),_:1})):w("",!0)]),default:u(()=>[e.isCodexViewable?(a(),m(F,{key:0,id:"browserToolbarLeftItems"},{default:u(()=>[i(c,{id:"topGroupSelect"}),i(d,{id:"orderBySelect"}),i(f,{id:"orderReverseButton"})]),_:1})):w("",!0),i(Io),i(F,{id:"browserToolbarRightItems"},{default:u(()=>[i($,{onClick:t[0]||(t[0]=Ms=>e.isSettingsDrawerOpen=!0)})]),_:1})]),_:1})}const Fo=y(Ro,[["render",Po],["__scopeId","data-v-8be2e094"]]);const No=new Set(["community_rating","critical_rating"]),Oo=new Set(["date"]),Lo=new Set(["created_at","updated_at"]),Do={name:"OrderByCaption",props:{item:{type:Object,required:!0}},computed:{...S(p,{orderBy:e=>e.settings.orderBy}),orderValue(){let e=this.item.orderValue;if(this.orderBy===void 0||this.orderBy===null||this.orderBy==="sort_name"||this.orderBy==="path"&&this.item.group==="f"||e===null||e===void 0)e="";else if(this.orderBy=="page_count")e=`${Y.numberFormat(Number.parseInt(e,10),0)} pages`;else if(this.orderBy=="size")e=Y.filesize(Number.parseInt(e,10),1024,1);else if(No.has(this.orderBy))e=`★  ${e}`;else if(Oo.has(this.orderBy)){const t=new Date(e);e=Ee.format(t)}else if(Lo.has(this.orderBy)){const t=new Date(e);e=He.format(t).replace(", ","<br />")}return e}}},Uo=["innerHTML"];function Ao(e,t,n,_,r,o){return o.orderValue?(a(),g("div",{key:0,class:"orderCaption text-caption",innerHTML:o.orderValue},null,8,Uo)):w("",!0)}const fe=y(Do,[["render",Ao],["__scopeId","data-v-75759a53"]]),Go={name:"BrowserContainerMenu",components:{ConfirmDialog:se},props:{item:{type:Object,required:!0}},data(){return{mdiDotsVertical:ze,showMenu:!1}},computed:{...S(p,{groupNames:e=>e.choices.static.groupNames}),verb(){return this.item.finished?"Unread":"Read"},confirmText(){return`Mark ${this.verb}`},markReadText(){const e=["Mark"];this.item.group!="c"&&e.push("Entire");let t=this.groupNames[this.item.group];return this.item.group!=="s"&&(t=t.slice(0,-1)),e.push(t,this.verb),e.join(" ")}},methods:{...C(p,["setBookmarkFinished"]),...C(q,["downloadIOSPWAFix"]),toggleRead:function(){this.setBookmarkFinished(this.item,!this.item.finished),this.showMenu=!1}}},jo={class:"background-soft-highlight"};function qo(e,t,n,_,r,o){const c=se;return a(),m(Xe,{modelValue:r.showMenu,"onUpdate:modelValue":t[2]||(t[2]=d=>r.showMenu=d),"offset-y":"",top:""},{activator:u(({props:d})=>[i(U,V({"aria-label":"action menu",class:"browserCardMenuIcon cardControlButton",icon:"",title:"Action Menu",variant:"text"},d,{onClick:t[0]||(t[0]=Qe(()=>{},["prevent"]))}),{default:u(()=>[i(v,null,{default:u(()=>[l(h(r.mdiDotsVertical),1)]),_:1})]),_:2},1040)]),default:u(()=>[s("div",jo,[n.item.group==="c"?(a(),m(M,{key:0,onClick:o.toggleRead},{default:u(()=>[i(N,null,{default:u(()=>[l(h(o.markReadText),1)]),_:1})]),_:1},8,["onClick"])):(a(),m(c,{key:1,"button-text":o.markReadText,"title-text":o.markReadText,"confirm-text":o.confirmText,"object-name":n.item.name,onConfirm:o.toggleRead,onCancel:t[1]||(t[1]=d=>r.showMenu=!1)},null,8,["button-text","title-text","confirm-text","object-name","onConfirm"]))])]),_:1},8,["modelValue"])}const ge=y(Go,[["render",qo]]);const Eo={name:"BrowserCardControls",components:{BrowserCardMenu:ge,MetadataButton:ct},props:{item:{type:Object,required:!0},eyeOpen:{type:Boolean,required:!0}},data(){return{mdiEye:Q,mdiEyeOff:X}},computed:{eyeIcon:function(){return this.eyeOpen?Q:X}}},Ho={class:"cardControls"};function zo(e,t,n,_,r,o){const c=B("MetadataButton"),d=ge;return a(),g("div",Ho,[n.item.group==="c"?(a(),m(v,{key:0,class:"eye"},{default:u(()=>[l(h(o.eyeIcon),1)]),_:1})):w("",!0),i(c,{group:n.item.group,pk:n.item.pk,children:n.item.childCount},null,8,["group","pk","children"]),i(d,{item:n.item},null,8,["item"])])}const Qo=y(Eo,[["render",zo],["__scopeId","data-v-dc469596"]]);const Xo={name:"BrowserCardSubtitle",props:{item:{type:Object,required:!0}},orderByCache:"sort_name",computed:{...S(p,{orderBy:e=>e.settings.orderBy,zeroPad:e=>e.page.zeroPad}),headerName:function(){let e;switch(this.item.group){case"i":e=this.item.publisherName;break;case"v":e=this.item.seriesName;break;case"c":e=this.$route.params.group==="f"?Ye(this.item,this.zeroPad):Ke(this.item,this.zeroPad);break;default:e=""}return e},displayName:function(){return this.item.group==="v"?J(this.item.name):this.item.name},linkLabel:function(){let e="";return e+=this.item.group==="c"?"Read":"Browse to",e+=" "+this.headerName,e}}},Yo={class:"browserLink cardSubtitle text-caption"},Ko={key:0,class:"headerName"},Wo={class:"displayName"};function Jo(e,t,n,_,r,o){return a(),g("div",Yo,[o.headerName?(a(),g("div",Ko,h(o.headerName),1)):w("",!0),s("div",Wo,h(o.displayName),1)])}const Zo=y(Xo,[["render",Jo],["__scopeId","data-v-2485e87e"]]),es=new Set(["iPad","iPad Simulator","iPhone","iPhone Simulator","iPod","iPod Simulator"]),ts=es.has(navigator.platform),os="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;const ss=We({name:"VLazy",directives:{intersect:Je},props:{modelValue:Boolean,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},...Ze(),...et(),...tt({transition:"fade-transition"})},emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{dimensionStyles:_}=ot(e),r=st(e,"modelValue");function o(c){r.value||(r.value=c)}return nt(()=>{var c;return rt(i(e.tag,{class:"v-lazy",style:_.value},{default:()=>[r.value&&i(it,{transition:e.transition,appear:!0},{default:()=>[(c=n.default)==null?void 0:c.call(n)]})]}),[[at("intersect"),o,e.options]])}),{}}}),K=100,ns=-170,rs={name:"BrowserCard",components:{BookCover:ue,BrowserCardControls:Qo,BrowserCardSubtitle:Zo,OrderByCaption:fe},props:{item:{type:Object,required:!0}},data(){return{doubleTapHovered:!os||ts}},computed:{linkLabel:function(){let e="";return e+=this.item.group==="c"?"Read":"Browse to",e+=" "+this.item.headerName,e},toRoute:function(){return this.doubleTapHovered?this.item.group==="c"?mt(this.item):{name:"browser",params:{group:this.item.group,pk:this.item.pk,page:1}}:{}},progressBackgroundColor:function(){return this.item.progress?this.$vuetify.theme.current.colors.row:"inherit"}},mounted(){this.scrollToMe()},methods:{scrollToMe:function(){if(!this.$route.hash||this.$route.hash.split("-")[1]!==String(this.item.pk))return;const e=this.$el;if(!e){console.warn("No element found to scroll to!");return}setTimeout(function(){e.scrollIntoView(),setTimeout(function(){window.scrollBy(0,ns)},K)},K)}}},as={class:"browserCardTop"},is={key:1,class:"cardCoverOverlay"};function ls(e,t,n,_,r,o){const c=ue,d=B("BrowserCardControls"),f=B("router-link"),$=B("BrowserCardSubtitle"),R=fe;return a(),m(ss,{id:`card-${n.item.pk}`,transition:"scale-transition"},{default:u(()=>[s("div",{class:"browserCardCoverWrapper",onClick:t[0]||(t[0]=H=>r.doubleTapHovered=!0)},[s("div",as,[i(c,{"cover-pk":n.item.coverPk,group:n.item.group,"child-count":n.item.childCount,finished:n.item.finished},null,8,["cover-pk","group","child-count","finished"]),o.toRoute?(a(),m(f,{key:0,class:"cardCoverOverlay",to:o.toRoute,"aria-label":o.linkLabel},{default:u(()=>[i(d,{item:n.item,"eye-open":!0},null,8,["item"])]),_:1},8,["to","aria-label"])):(a(),g("div",is,[i(d,{item:n.item,"eye-open":!1},null,8,["item"])])),i(j,{class:"bookCoverProgress","background-color":o.progressBackgroundColor,"model-value":n.item.progress,"aria-label":`${n.item.progress}% read`,rounded:"",height:"2"},null,8,["background-color","model-value","aria-label"]),i($,{item:n.item},null,8,["item"])]),i(R,{item:n.item},null,8,["item"])])]),_:1},8,["id"])}const us=y(rs,[["render",ls],["__scopeId","data-v-99e7b856"]]);const ds={name:"BrowserMain",components:{BrowserCard:us,PlaceholderLoading:de},data(){return{mdiMenu:lt,mdiOpenInNew:te}},computed:{...S(x,{enableNonUsers:e=>e.adminFlags.enableNonUsers,enableRegister:e=>e.adminFlags.enableRegistration}),...T(x,["isUserAdmin","isCodexViewable"]),...S(p,{objList:e=>e.page.objList,librariesExist:e=>e.page.librariesExist,padFooter:e=>e.page.numPages>1,showBrowseItems:function(e){return e.page.objList&&e.page.objList.length>0&&this.isCodexViewable&&!this.showPlaceHolder},showPlaceHolder:function(e){return this.enableNonUsers===void 0||this.isCodexViewable&&(this.librariesExist==null||!e.browserPageLoaded)}})}},E=e=>(O("data-v-2579c0ad"),e=e(),L(),e),cs={key:0,id:"browsePaneContainer"},ms={key:1,id:"announce"},ps={key:2,id:"announce"},_s={key:0},hs={key:0},fs={key:3,id:"announce"},gs=E(()=>s("div",{id:"noComicsFound"},"No comics found for these filters",-1)),bs=[gs],ys={key:4,id:"announce"},vs=E(()=>s("h1",null,"No libraries have been added to Codex yet",-1)),ws={key:0},Ss={key:1},Bs=E(()=>s("h2",null," An administrator must login to add some libraries that contain comics ",-1)),Cs={href:"https://github.com/ajslater/codex#-administration",target:"_blank"};function ks(e,t,n,_,r,o){const c=B("BrowserCard"),d=de;return a(),m(ne,{id:"browsePane",class:D({padFooter:e.padFooter})},{default:u(()=>[e.showBrowseItems?(a(),g("div",cs,[(a(!0),g(I,null,P(e.objList,f=>(a(),m(c,{key:`${f.group}${f.pk}`,item:f},null,8,["item"]))),128))])):e.showPlaceHolder?(a(),g("div",ms,[i(d,{class:"placeholder"})])):e.isCodexViewable?e.librariesExist?(a(),g("div",fs,bs)):(a(),g("div",ys,[vs,e.isUserAdmin?(a(),g("h2",ws,[l(" Use the top right "),i(v,null,{default:u(()=>[l(h(r.mdiMenu),1)]),_:1}),l(" menu to navigate to the admin panel and add a comic library. ")])):(a(),g("div",Ss,[Bs,s("h3",null,[l(" You may log in or register with the top right "),i(v,null,{default:u(()=>[l(h(r.mdiMenu),1)]),_:1}),l("menu ")])])),s("a",Cs,[l("See the README "),i(v,null,{default:u(()=>[l(h(r.mdiOpenInNew),1)]),_:1})]),l(" for detailed instructions. ")])):(a(),g("div",ps,[s("h1",null,[l(" You may log in "),e.enableRegister?(a(),g("span",_s,"or register")):w("",!0),l(" with the top right "),i(v,null,{default:u(()=>[l(h(r.mdiMenu),1)]),_:1}),l(" menu ")]),e.enableRegister?w("",!0):(a(),g("h1",hs,"Registration is disabled"))]))]),_:1},8,["class"])}const Ts=y(ds,[["render",ks],["__scopeId","data-v-2579c0ad"]]);const $s={name:"MainBrowser",components:{BrowserFilterToolbar:Fo,BrowserMain:Ts,BrowserNavToolbar:me,BrowserTitleToolbar:_e,SettingsDrawer:re},data(){return{BrowserSettingsPanel:ut(no)}},computed:{...S(x,{user:e=>e.user}),...T(x,["isCodexViewable"])},watch:{$route:function(){window.scrollTo(0,0),this.loadBrowserPage()},user:function(){this.loadSettings()},isCodexViewable:function(){this.loadSettings()}},created(){q().isSettingsDrawerOpen=!1,this.loadSettings()},methods:{...C(p,["loadBrowserPage","loadSettings","getVersions"])}},xs={class:"codexToolbar"};function Vs(e,t,n,_,r,o){const c=B("BrowserFilterToolbar"),d=_e,f=B("BrowserMain"),$=me,R=re;return a(),g(I,null,[i(ne,{id:"browser"},{default:u(()=>[s("header",xs,[i(c),i(d)]),i(f),i($)]),_:1}),i(R,{title:"Browser Settings",panel:r.BrowserSettingsPanel,temporary:""},null,8,["panel"])],64)}const Ps=y($s,[["render",Vs],["__scopeId","data-v-12003fe0"]]);export{Ps as default};
