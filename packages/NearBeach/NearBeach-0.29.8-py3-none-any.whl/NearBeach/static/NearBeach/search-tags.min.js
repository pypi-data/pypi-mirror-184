"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[1807],{3744:(t,a)=>{a.Z=(t,a)=>{const e=t.__vccOpts||t;for(const[t,l]of a)e[t]=l;return e}},7736:(t,a,e)=>{e.r(a),e.d(a,{default:()=>G});var l=e(6252),o=e(3577);const s={class:"card"},i={class:"card-body"},n=(0,l._)("h1",null,"Search Tags",-1),d=(0,l._)("hr",null,null,-1),c={class:"row"},g={class:"col-md-4"},r=(0,l._)("strong",null,"Tags",-1),u=(0,l._)("p",{class:"text-instructions"}," Use the search bar to help you find any tags. ",-1),m={class:"text-instructions"},h=(0,l.Uk)(" Click on the icon "),p=(0,l.Uk)(" to edit the tag. "),T=(0,l._)("p",{class:"text-instructions"},' To add in any new tags - please click on the "New Tag" button. ',-1),_={class:"col-md-8 tag-list"},f=["onDblclick"],b=["onClick"],k=(0,l._)("hr",null,null,-1),C={class:"row submit-row"},v={class:"col-md-12"};var y=e(5808),w=e(5169),I=e(6542),Z=e(9963);const M={class:"modal fade",id:"editTagModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"editTagModalLabel","aria-hidden":"true"},N={class:"modal-dialog"},U={class:"modal-content"},x=(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title",id:"editTagModalLabel"},"Edit Tag"),(0,l._)("button",{type:"button",id:"editTagCloseModal",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),D={class:"modal-body"},S={class:"row"},R=(0,l._)("div",{class:"col-md-4"},[(0,l._)("strong",null,"Edit Tags"),(0,l._)("p",{class:"text-instructions"}," Please give the tag an appropriate name. Please do not pick an existing tag name. ")],-1),E={class:"col-md-8"},$=(0,l._)("label",null,"Tag Name",-1),A=(0,l._)("hr",null,null,-1),B={class:"row"},P=(0,l._)("div",{class:"col-md-4"},[(0,l._)("strong",null,"Pick Colour"),(0,l._)("p",{class:"text-instructions"}," Please click on a preferred colour. This will be tags colour. ")],-1),L={class:"colour-picker col-md-8"},O=["onClick"],W={class:"modal-footer"},q=(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),z=["disabled"];var j=e(4250);const H=e(9669),K={name:"EditTagModal",props:{existingTags:{type:Array,default:()=>[]},tagColour:{type:String,default:"/"},tagId:{type:Number,default:0},tagName:{type:String,default:""}},data(){return{colourList:["#37cbd2","#8b8295","#6f84bb","#1fc4b5","#651794","#7ea52c","#6df79e","#53ef5f","#79c121","#91fbde","#e01059","#33ae24"],tagColourModel:this.tagColour,tagNameModel:this.tagName}},watch:{tagColour:function(){this.tagColourModel=this.tagColour},tagName:function(){this.tagNameModel=this.tagName}},computed:{...(0,j.Se)({rootUrl:"getRootUrl"}),canSave:function(){return 0===this.existingTags.filter((t=>t.fields.tag_name.toUpperCase()===this.tagNameModel.toUpperCase()&&t.pk!==this.tagId)).length}},methods:{deleteTag:function(){H.post(`${this.rootUrl}tag/delete/${this.tagId}/`).then((t=>{this.$emit("delete_tag",{tag_id:this.tagId}),document.getElementById("editTagCloseModal").click()})).catch((t=>{}))},getClasses:function(t){let a="single-colour";return t==this.tagColourModel&&(a+=" selected-colour"),a},newTag:function(t){H.post(`${this.rootUrl}tag/new/`,t).then((t=>{this.$emit("new_tag",t.data),document.getElementById("editTagCloseModal").click()})).catch((t=>{}))},saveTag:function(){const t=new FormData;t.set("tag_id",this.tagId),t.set("tag_name",this.tagNameModel),t.set("tag_colour",this.tagColourModel),0===this.tagId?this.newTag(t):this.updateTag(t)},updateColour:function(t){this.tagColourModel=t},updateTag:function(t){H.post(`${this.rootUrl}tag/save/`,t).then((t=>{this.$emit("update_tags",{tag_id:this.tagId,tag_name:this.tagNameModel,tag_colour:this.tagColourModel}),document.getElementById("editTagCloseModal").click()})).catch((t=>{}))}}};var Y=e(3744);const F={name:"SearchTags",components:{EditTagModal:(0,Y.Z)(K,[["render",function(t,a,e,s,i,n){return(0,l.wg)(),(0,l.iD)("div",M,[(0,l._)("div",N,[(0,l._)("div",U,[x,(0,l._)("div",D,[(0,l._)("div",S,[R,(0,l._)("div",E,[$,(0,l.wy)((0,l._)("input",{class:"form-control","onUpdate:modelValue":a[0]||(a[0]=t=>i.tagNameModel=t)},null,512),[[Z.vModelText,i.tagNameModel]])])]),A,(0,l._)("div",B,[P,(0,l._)("div",L,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.colourList,(t=>((0,l.wg)(),(0,l.iD)("div",{key:t,class:(0,o.normalizeClass)(n.getClasses(t)),style:(0,o.normalizeStyle)(`background-color: ${t};`),onClick:a=>n.updateColour(t)},null,14,O)))),128))])])]),(0,l._)("div",W,[0!==e.tagId?((0,l.wg)(),(0,l.iD)("button",{key:0,type:"button",class:"btn btn-danger delete-tag",onClick:a[1]||(a[1]=(...t)=>n.deleteTag&&n.deleteTag(...t))},"Delete Tag")):(0,l.kq)("v-if",!0),q,(0,l._)("button",{type:"button",class:"btn btn-primary",disabled:!n.canSave,onClick:a[2]||(a[2]=(...t)=>n.saveTag&&n.saveTag(...t))},"Save Tag",8,z)])])])])}]]),Icon:I.JO},props:{rootUrl:{type:String,default:"/"},tagResults:{type:Array,default:()=>[]}},data(){return{singleTagColour:"",singleTagId:0,singleTagName:"",localTagResults:this.tagResults}},mixins:[y.Z],methods:{addTag:function(){this.singleTagName="default tag",this.singleTagId=0,this.singleTagColour="#37cbd2",new w.u_(document.getElementById("editTagModal")).show()},deleteTag:function(t){this.localTagResults=this.localTagResults.filter((a=>a.pk!==t.tag_id))},editTag:function(t){let a=this.localTagResults.filter((a=>a.pk==t))[0];this.singleTagName=a.fields.tag_name,this.singleTagId=t,this.singleTagColour=a.fields.tag_colour,new w.u_(document.getElementById("editTagModal")).show()},newTag:function(t){this.localTagResults.push(t[0])},updateTags:function(t){let a=this.localTagResults.findIndex((a=>a.pk===t.tag_id));this.localTagResults[a].fields.tag_name=t.tag_name,this.localTagResults[a].fields.tag_colour=t.tag_colour}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl})}},G=(0,Y.Z)(F,[["render",function(t,a,e,y,w,I){const Z=(0,l.up)("Icon"),M=(0,l.up)("edit-tag-modal");return(0,l.wg)(),(0,l.iD)("div",s,[(0,l._)("div",i,[n,d,(0,l._)("div",c,[(0,l._)("div",g,[r,u,(0,l._)("p",m,[h,(0,l.Wm)(Z,{icon:t.icons.infoCircle},null,8,["icon"]),p]),T]),(0,l._)("div",_,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(w.localTagResults,(a=>((0,l.wg)(),(0,l.iD)("div",{key:a.pk,style:(0,o.normalizeStyle)(`background-color: ${a.fields.tag_colour};`),onDblclick:t=>I.editTag(a.pk),class:"single-tag"},[(0,l.Uk)((0,o.toDisplayString)(a.fields.tag_name)+" ",1),(0,l._)("span",{onClick:t=>I.editTag(a.pk)},[(0,l.Wm)(Z,{icon:t.icons.infoCircle},null,8,["icon"])],8,b)],44,f)))),128))]),(0,l.kq)(" ADD NEW TAG BUTTON "),k,(0,l._)("div",C,[(0,l._)("div",v,[(0,l._)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:a[0]||(a[0]=(...t)=>I.addTag&&I.addTag(...t))},"Add Tag")])])]),(0,l.kq)(" MODALS "),(0,l.Wm)(M,{"existing-tags":w.localTagResults,"tag-colour":w.singleTagColour,"tag-id":w.singleTagId,"tag-name":w.singleTagName,onNew_tag:I.newTag,onDelete_tag:a[1]||(a[1]=t=>I.deleteTag(t)),onUpdate_tags:I.updateTags},null,8,["existing-tags","tag-colour","tag-id","tag-name","onNew_tag","onUpdate_tags"])])])}]])},5808:(t,a,e)=>{e.d(a,{Z:()=>N});var l=e(3985),o=e(5555),s=e(1826),i=e(6443),n=e(1327),d=e(8521),c=e(1056),g=e(4324),r=e(9672),u=e(9867),m=e(1239),h=e(5004),p=e(1321),T=e(1216),_=e(5550),f=e(7702),b=e(7903),k=e(2606),C=e(3843),v=e(2393),y=e(3360),w=e(9714),I=e(1323),Z=e(2610),M=e(5968);const N={data:()=>({icons:{arrowUp:l.Z,bugIcon:o.Z,bxBriefcase:s.Z,cardChecklist:i.Z,clipboardIcon:n.Z,documentPdf:d.Z,documentText:c.Z,folderIcon:g.Z,groupPresentation:r.Z,imageIcon:u.Z,infoCircle:m.Z,linkIcon:h.Z,linkIcon2:p.Z,linkOut:T.Z,mailIcon:_.Z,microsoftExcel:f.Z,microsoftPowerpoint:b.Z,microsoftWord:k.Z,noteAdd:C.Z,objectStorage:v.Z,passwordIcon:y.Z,trashCan:w.Z,userIcon:I.Z,usersIcon:Z.Z,xCircle:M.Z}})}}}]);