"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[3350],{3744:(e,t)=>{t.Z=(e,t)=>{const r=e.__vccOpts||e;for(const[e,s]of t)r[e]=s;return r}},4410:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var s=r(6252),o=r(9963);const a={class:"card"},c={class:"card-body"},i=(0,s._)("h1",null,"Search Customers",-1),n=(0,s._)("br",null,null,-1),l={class:"form-group"},u=(0,s._)("label",null,"Search:",-1),m=(0,s._)("hr",null,null,-1),h={key:0,class:"alert alert-warning"};var d=r(9113),f=r(3577);const g={class:"organisation-details"},p=["src"],Z={class:"organisation-name"},_=["href"],U={class:"organisation-email"},S=(0,s.Uk)(" Email: "),v=["href"];var k=r(5808),T=r(6542),I=r(4250);const w={name:"ListCustomers",components:{Icon:T.JO},props:{customerResults:{type:Array,default:function(){return[]}}},computed:{...(0,I.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[k.Z],methods:{getProfilePicture:function(e){const t=e.fields.customer_profile_picture;return""===t||null===t?`${this.staticUrl}/NearBeach/images/placeholder/product_tour.svg`:`${this.rootUrl}private/${t}`}}};var y=r(3744);const C=(0,y.Z)(w,[["render",function(e,t,r,o,a,c){const i=(0,s.up)("Icon");return(0,s.wg)(),(0,s.iD)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.customerResults,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"row",key:t.pk},[(0,s._)("div",g,[(0,s._)("img",{src:c.getProfilePicture(t),alt:"Stakeholder Logo",class:"organisation-image"},null,8,p),(0,s._)("div",Z,[(0,s._)("a",{href:`${e.rootUrl}customer_information/${t.pk}/`},(0,f.toDisplayString)(t.fields.customer_first_name)+" "+(0,f.toDisplayString)(t.fields.customer_last_name),9,_)]),(0,s._)("div",U,[(0,s.Wm)(i,{icon:e.icons.mailIcon},null,8,["icon"]),S,(0,s._)("a",{href:`mailto:${t.fields.customer_email}`},(0,f.toDisplayString)(t.fields.customer_email),9,v)])])])))),128))])}]]),R=r(9669),D={name:"SearchCustomers",components:{ListCustomers:C},props:{customerResults:{type:Array,default:()=>[]},staticUrl:{type:String,default:"/"},rootUrl:{type:String,default:"/"}},mixins:[d.Z],data(){return{localCustomerResults:this.customerResults,searchModel:"",searchTimeout:""}},methods:{getSearchResults:function(){const e=new FormData;e.set("search",this.searchModel),R.post(`${this.rootUrl}search/customer/data/`,e).then((e=>{this.localCustomerResults=e.data})).catch((e=>{}))}},watch:{searchModel:function(){this.searchTrigger({return_function:this.getSearchResults,searchTimeout:this.searchTimeout})}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl})}},b=(0,y.Z)(D,[["render",function(e,t,r,d,f,g){const p=(0,s.up)("list-customers");return(0,s.wg)(),(0,s.iD)("div",a,[(0,s._)("div",c,[(0,s.kq)(" HEADING "),i,n,(0,s.kq)(" SEARCH FIELD "),(0,s._)("div",l,[u,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control search-organisation","onUpdate:modelValue":t[0]||(t[0]=e=>f.searchModel=e)},null,512),[[o.vModelText,f.searchModel]])]),(0,s.kq)(" LIST OUT RESULTS "),m,(0,s.Wm)(p,{"customer-results":f.localCustomerResults},null,8,["customer-results"]),(0,s.kq)(" SHOW IF NO RESULTS "),0==f.localCustomerResults.length?((0,s.wg)(),(0,s.iD)("div",h,"There are no customers with the search parameters used. Please try again.")):(0,s.kq)("v-if",!0)])])}]])},5808:(e,t,r)=>{r.d(t,{Z:()=>R});var s=r(3985),o=r(5555),a=r(1826),c=r(6443),i=r(1327),n=r(8521),l=r(1056),u=r(4324),m=r(9672),h=r(9867),d=r(1239),f=r(5004),g=r(1321),p=r(1216),Z=r(5550),_=r(7702),U=r(7903),S=r(2606),v=r(3843),k=r(2393),T=r(3360),I=r(9714),w=r(1323),y=r(2610),C=r(5968);const R={data:()=>({icons:{arrowUp:s.Z,bugIcon:o.Z,bxBriefcase:a.Z,cardChecklist:c.Z,clipboardIcon:i.Z,documentPdf:n.Z,documentText:l.Z,folderIcon:u.Z,groupPresentation:m.Z,imageIcon:h.Z,infoCircle:d.Z,linkIcon:f.Z,linkIcon2:g.Z,linkOut:p.Z,mailIcon:Z.Z,microsoftExcel:_.Z,microsoftPowerpoint:U.Z,microsoftWord:S.Z,noteAdd:v.Z,objectStorage:k.Z,passwordIcon:T.Z,trashCan:I.Z,userIcon:w.Z,usersIcon:y.Z,xCircle:C.Z}})}},9113:(e,t,r)=>{r.d(t,{Z:()=>s});const s={methods:{searchTrigger:function(e){""!=e.searchTimeout&&clearTimeout(e.searchTimeout),void 0===e.search?this.searchUndefined(e):this.searchDefined(e)},searchDefined:function(e){e.search.length>=3&&(e.searchTimeout=setTimeout(e.return_function,500,e.search,e.loading))},searchUndefined:function(e){e.searchTimeout=setTimeout(e.return_function,500)}}}}}]);