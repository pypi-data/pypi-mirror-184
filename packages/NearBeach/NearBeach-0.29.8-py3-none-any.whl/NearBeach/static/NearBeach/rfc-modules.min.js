"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[645],{7325:(t,e,a)=>{a.d(e,{Z:()=>b});var s=a(6252),l=a(3577);const n={class:"row"},i={class:"col-md-4"},o=(0,s._)("strong",null,"Between Dates",-1),r={class:"text-instructions"},d={class:"col-md-4"},c={class:"form-group"},u={key:0,class:"error"},h={class:"col-md-4"},p={class:"form-group"},m={key:0,class:"error"};var f=a(9974),g=a(4028),_=a(2587),k=a(431);const v={name:"BetweenDates",setup:()=>({v$:(0,g.ZP)()}),components:{NDatePicker:f.Z},mixins:[k.Z],props:{destination:{type:String,default:""},endDateModel:{type:Number,default:()=>{let t=new Date;return t.setHours(16),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),new Date(t.setDate(t.getDate()+14)),t.getTime()}},noBackDating:{type:Boolean,default:!0},startDateModel:{type:Number,default:()=>{let t=new Date;return t.setHours(9),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.getTime()}}},validations:{localEndDateModel:{required:_.C1},localStartDateModel:{required:_.C1}},data(){return{localEndDateModel:this.endDateModel,localStartDateModel:this.startDateModel}},methods:{emitDates:function(){this.$emit("update_dates",{start_date:this.localStartDateModel,end_date:this.localEndDateModel})},endDateDisabled:function(t){let e=!1;return this.noBackDating||(e=this.disableDate(t)),t<=this.startDateModel-864e5||e},startDateDisabled:function(t){let e=!1;return this.noBackDating||(e=this.disableDate(t)),t>this.endDateModel||e}},watch:{localEndDateModel:function(){this.localEndDateModel<this.localStartDateModel&&(this.localEndDateModel=this.localStartDateModel()),this.emitDates()},localStartDateModel:function(){this.localEndDateModel<this.localStartDateModel&&(this.localStartDateModel=this.localEndDateModel()),this.emitDates()}},mounted(){this.emitDates()}},b=(0,a(3744).Z)(v,[["render",function(t,e,a,f,g,_){const k=(0,s.up)("n-date-picker");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",i,[o,(0,s._)("p",r," Choose the start and end date of the "+(0,l.toDisplayString)(a.destination)+". Please note the end date can not be earlier than the start date. They can be equal. ",1)]),(0,s._)("div",d,[(0,s._)("div",c,[(0,s._)("label",null,[(0,s.Uk)((0,l.toDisplayString)(a.destination)+" Start Date: ",1),f.v$.localStartDateModel.$error.length>0?((0,s.wg)(),(0,s.iD)("span",u," Please select a date.")):(0,s.kq)("v-if",!0)]),(0,s.Wm)(k,{type:"datetime",value:g.localStartDateModel,"onUpdate:value":e[0]||(e[0]=t=>g.localStartDateModel=t),class:"form-control","is-date-disabled":_.startDateDisabled,"is-time-disabled":_.startDateDisabled},null,8,["value","is-date-disabled","is-time-disabled"])])]),(0,s._)("div",h,[(0,s._)("div",p,[(0,s._)("label",null,[(0,s.Uk)((0,l.toDisplayString)(a.destination)+" End Date: ",1),f.v$.localEndDateModel.$error.length>0?((0,s.wg)(),(0,s.iD)("span",m," Please select a date.")):(0,s.kq)("v-if",!0)]),(0,s.Wm)(k,{type:"datetime",value:g.localEndDateModel,"onUpdate:value":e[1]||(e[1]=t=>g.localEndDateModel=t),class:"form-control","is-date-disabled":_.endDateDisabled,"is-time-disabled":_.endDateDisabled},null,8,["value","is-date-disabled","is-time-disabled"])])])])}]])},4195:(t,e,a)=>{a.r(e),a.d(e,{default:()=>ke});var s=a(6252);const l={class:"card"},n={class:"card-body"},i=(0,s._)("ul",{class:"nav nav-tabs",id:"misc_module_tabs",role:"tablist"},[(0,s.kq)(" GROUPS AND USERS "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"group-and-users-tab","data-bs-toggle":"tab","data-bs-target":"#group-and-users",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"},"Group and Users")]),(0,s.kq)(" RISK "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"rfc-risk-tab","data-bs-toggle":"tab","data-bs-target":"#rfc-risk",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"},"Risk")]),(0,s.kq)(" IMPLEMENTATION "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"rfc-implementation-tab","data-bs-toggle":"tab","data-bs-target":"#rfc-implementation",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"},"Implementation")]),(0,s.kq)(" BACKOUT PLAN "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"rfc-backout-tab","data-bs-toggle":"tab","data-bs-target":"#rfc-backout",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"},"Backout Plan")]),(0,s.kq)(" TEST PLAN "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"rfc-test-plan-tab","data-bs-toggle":"tab","data-bs-target":"#rfc-test",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"},"Test Plan")]),(0,s.kq)(" RUN SHEET "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link active",id:"rfc-run-sheet-tab","data-bs-toggle":"tab","data-bs-target":"#rfc-run-sheet",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"},"Run Sheet")])],-1),o=(0,s._)("hr",null,null,-1),r={class:"tab-content",id:"misc_module_content"},d={class:"tab-pane fade",id:"group-and-users",role:"tabpanel","aria-labelledby":"contact-tab"},c={class:"tab-pane fade",id:"rfc-risk",role:"tabpanel","aria-labelledby":"home-tab"},u={key:0},h={key:1,class:"row submit-row"},p={class:"col-md-12"},m={class:"tab-pane fade",id:"rfc-implementation",role:"tabpanel","aria-labelledby":"home-tab"},f={key:0},g={key:1,class:"row submit-row"},_={class:"col-md-12"},k={class:"tab-pane fade",id:"rfc-backout",role:"tabpanel","aria-labelledby":"home-tab"},v={key:0},b={key:1,class:"row submit-row"},D={class:"col-md-12"},y={class:"tab-pane fade",id:"rfc-test",role:"tabpanel","aria-labelledby":"home-tab"},w={key:0},M={key:1,class:"row submit-row"},S={class:"col-md-12"},T={class:"tab-pane fade active show",id:"rfc-run-sheet",role:"tabpanel","aria-labelledby":"home-tab"};var R=a(2424),U=a(6297),I=a(7810),C=a(3577);const q={class:"row"},E=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Run Sheet List"),(0,s._)("p",{class:"text-instructions"},[(0,s.Uk)(" The run sheet will specify specific tasks for each user to implement. Each run item can be specified to; "),(0,s._)("ul",null,[(0,s._)("li",null,"Block other run items"),(0,s._)("li",null,"Block out downtime")])])],-1),L={class:"col-md-8"},N={key:0,class:"table"},P=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("td",{style:{width:"20%"}},"Timings"),(0,s._)("td",{style:{width:"55%"}},"Title"),(0,s._)("td",{style:{width:"25%"}},"Assigned Users")])],-1),B=(0,s._)("div",null,"Start Time:",-1),O={class:"small-text"},$=(0,s._)("div",{class:"spacer"},null,-1),x=(0,s._)("div",null,"End Time:",-1),A={class:"small-text"},F=["href"],Z=(0,s._)("div",null,"Assigned User:",-1),V={class:"small-text"},W=(0,s._)("div",{class:"spacer"},null,-1),j=(0,s._)("div",null,"QA User:",-1),H={class:"small-text"},G=(0,s._)("div",{class:"spacer"},null,-1),K=(0,s._)("div",null,"Status:",-1),Q={key:0,class:"small-text"},Y={key:1},z=["onClick"],J=["onClick"],X={key:2,href:"javascript:void(0)",class:"btn btn-success change-task-button"},tt={key:3,href:"javascript:void(0)",class:"btn btn-danger change-task-button"},et={key:1,class:"alert alert-primary"},at={key:0},st={key:1,class:"row submit-row"},lt={class:"col-md-12"},nt={key:2,class:"row submit-row"},it={class:"col-md-12"};var ot=a(5169),rt=a(9963);const dt={class:"modal fade",id:"newRunItemModal",tabindex:"-1","aria-labelledby":"newRunItemModalLabel","aria-hidden":"true"},ct={class:"modal-dialog modal-xl modal-fullscreen-xl-down"},ut={class:"modal-content"},ht=(0,s._)("div",{class:"modal-header"},[(0,s._)("h2",{class:"modal-title",id:"newRunItemModalLabel"},"New Change Task"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"newRunItemCloseButton"},[(0,s._)("span",{"aria-hidden":"true"})])],-1),pt={class:"modal-body"},mt={class:"row"},ft=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Change Task Title"),(0,s._)("p",{class:"text-instructions"}," Please write a short title of the description for this task. i.e Backup of Database ")],-1),gt={class:"col-md-8"},_t={class:"form-group"},kt=(0,s._)("label",null,"Change Title:",-1),vt=(0,s._)("hr",null,null,-1),bt={class:"row"},Dt=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Date Restrictions"),(0,s._)("p",{class:"text-instructions"}," Start and End dates of the RFC ")],-1),yt={class:"col-md-4"},wt=(0,s.Uk)(" Start Date: "),Mt={class:"col-md-4"},St=(0,s.Uk)(" End Date: "),Tt=(0,s._)("hr",null,null,-1),Rt=(0,s._)("hr",null,null,-1),Ut={class:"row"},It=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Implementation & QA User"),(0,s._)("p",{class:"text-instructions"}," Please indicate which user will be implementing the work, and the user who will QA. ")],-1),Ct={class:"col-md-8"},qt={class:"row"},Et={class:"col-md-6"},Lt={class:"form-group"},Nt=(0,s._)("label",null,"Implementation User",-1),Pt={class:"col-md-6"},Bt={class:"form-group"},Ot=(0,s._)("label",null,"QA User",-1),$t=(0,s._)("hr",null,null,-1),xt={class:"row"},At=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Description"),(0,s._)("p",{class:"text-instructions"}," Write a detail description of this particular task. ")],-1),Ft={class:"col-md-8"},Zt=(0,s._)("label",null,"Change Task Description (Optional):",-1),Vt=(0,s._)("hr",null,null,-1),Wt={class:"row"},jt=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Misc"),(0,s._)("p",{class:"text-instructions"},' Please fill in the stakeholders for this particular change task. Default value will be "Stakeholders". '),(0,s._)("p",{class:"text-instructions"},' To state if there is downtime, please click the "No Downtime" to change it\'s statue. ')],-1),Ht={class:"col-md-8"},Gt={class:"form-group"},Kt=(0,s._)("label",null,"Stakeholders:",-1),Qt=(0,s._)("br",null,null,-1),Yt={class:"btn-group",role:"group","aria-label":"Basic checkbox toggle button group"},zt={class:"btn btn-outline-primary",for:"isDowntime"},Jt={class:"modal-footer"},Xt=(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1);var te=a(7267),ee=a(7325),ae=a(9860),se=a(3058),le=a(4250);const ne=a(9669),ie={name:"RfcNewRunItem",components:{BetweenDates:ee.Z,editor:te.Z,NSelect:ae.Z},props:{locationId:{type:Number,default:0},userList:{type:Array,default:()=>[]}},mixins:[se.Z],data:()=>({assignedUserModel:"",changeDescriptionModel:"",changeEndDateModel:"",changeIsDowntimeModel:!1,changeStakeholderModel:"Stakeholder(s)",changeStartDateModel:"",changeTitleModel:"",qaUserModel:"",userListFixed:[]}),computed:{...(0,le.Se)({rfcEndDate:"getEndDate",rfcStartDate:"getStartDate",rootUrl:"getRootUrl"})},methods:{formatDate:function(t){let e=new Date(t);e=e.toISOString().split("T");const a=e[1].split(".");return`${e[0]} ${a[0]}`},isDowntime:function(){return this.changeIsDowntimeModel?"Downtime Scheduled":"No Downtime"},submitChangeTask:function(t){t.preventDefault();var e=parseInt(this.changeEndDateModel)-parseInt(this.changeStartDateModel);const a=new FormData;a.set("request_for_change",this.locationId.toString()),a.set("change_task_title",this.changeTitleModel),a.set("change_task_description",this.changeDescriptionModel),a.set("change_task_start_date",new Date(this.changeStartDateModel).toISOString()),a.set("change_task_end_date",new Date(this.changeEndDateModel).toISOString()),a.set("change_task_seconds",e.toString()),a.set("change_task_assigned_user",this.assignedUserModel),a.set("change_task_qa_user",this.qaUserModel),a.set("change_task_required_by",this.changeStakeholderModel),a.set("is_downtime",this.changeIsDowntimeModel),ne.post(`${this.rootUrl}rfc_information/${this.locationId}/new_change_task/`,a).then((t=>{this.$emit("update_change_task_list",t.data),this.changeDescriptionModel="",this.changeIsDowntimeModel=!1,this.changeStakeholderModel="Stakeholder(s)",this.changeTitleModel="",document.getElementById("newRunItemCloseButton").click()})).catch((t=>{this.showErrorModal(t,"Change Task")}))},updateDates:function(t){this.changeStartDateModel=t.start_date,this.changeEndDateModel=t.end_date}},mounted(){this.userListFixed=this.userList.map((t=>({label:`${t.username}: ${t.first_name} ${t.last_name}`,value:t.id})))}};var oe=a(3744);const re=(0,oe.Z)(ie,[["render",function(t,e,a,l,n,i){const o=(0,s.up)("between-dates"),r=(0,s.up)("n-select"),d=(0,s.up)("editor");return(0,s.wg)(),(0,s.iD)("div",dt,[(0,s._)("div",ct,[(0,s._)("div",ut,[ht,(0,s._)("div",pt,[(0,s.kq)(" CHANGE TASK TITLE "),(0,s._)("div",mt,[ft,(0,s._)("div",gt,[(0,s._)("div",_t,[kt,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=e=>t.changeTitleModel=e)},null,512),[[rt.vModelText,t.changeTitleModel]])])])]),(0,s.kq)(" NOTIFY USERS OF DATE RESTRICTIONS "),vt,(0,s._)("div",bt,[Dt,(0,s._)("div",yt,[wt,(0,s._)("span",null,(0,C.toDisplayString)(i.formatDate(t.rfcStartDate)),1)]),(0,s._)("div",Mt,[St,(0,s._)("span",null,(0,C.toDisplayString)(i.formatDate(t.rfcEndDate)),1)])]),(0,s.kq)(" START DATE & END DATE "),Tt,(0,s.Wm)(o,{destination:"Change Task",onUpdate_dates:e[1]||(e[1]=t=>i.updateDates(t)),"no-back-dating":!1}),(0,s.kq)(" IMPLEMENTATION USER & QA USER "),Rt,(0,s._)("div",Ut,[It,(0,s._)("div",Ct,[(0,s._)("div",qt,[(0,s._)("div",Et,[(0,s._)("div",Lt,[Nt,(0,s.Wm)(r,{options:t.userListFixed,value:t.assignedUserModel,"onUpdate:value":e[2]||(e[2]=e=>t.assignedUserModel=e)},null,8,["options","value"])])]),(0,s._)("div",Pt,[(0,s._)("div",Bt,[Ot,(0,s.Wm)(r,{value:t.qaUserModel,"onUpdate:value":e[3]||(e[3]=e=>t.qaUserModel=e),options:t.userListFixed},null,8,["value","options"])])])])])]),(0,s.kq)(" DESCRIPTION OPTIONAL "),$t,(0,s._)("div",xt,[At,(0,s._)("div",Ft,[Zt,(0,s.Wm)(d,{init:{height:300,menubar:!1,plugins:["lists","table"],toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | table | bullist numlist outdent indent | removeformat"]},content_css:!1,skin:!1,modelValue:t.changeDescriptionModel,"onUpdate:modelValue":e[4]||(e[4]=e=>t.changeDescriptionModel=e)},null,8,["modelValue"])])]),(0,s.kq)(" MISC "),Vt,(0,s._)("div",Wt,[jt,(0,s._)("div",Ht,[(0,s._)("div",Gt,[Kt,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=e=>t.changeStakeholderModel=e)},null,512),[[rt.vModelText,t.changeStakeholderModel]])]),Qt,(0,s._)("div",Yt,[(0,s.wy)((0,s._)("input",{type:"checkbox",id:"isDowntime",class:"btn-check",autocomplete:"off","onUpdate:modelValue":e[6]||(e[6]=e=>t.changeIsDowntimeModel=e)},null,512),[[rt.vModelCheckbox,t.changeIsDowntimeModel]]),(0,s._)("label",zt,(0,C.toDisplayString)(i.isDowntime()),1)])])])]),(0,s._)("div",Jt,[Xt,(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:e[7]||(e[7]=t=>i.submitChangeTask(t))}," Add Change Task ")])])])])}]]);var de=a(431);const ce=a(9669),ue={name:"RfcRunSheetList",components:{RfcNewRunItem:re},props:{isReadOnly:{type:Boolean,default:!1},locationId:{type:Number,default:0},rfcId:{type:Number,default:0},rfcStatus:{type:Number,default:0},userList:{type:Array,default:()=>[]}},mixins:[de.Z,se.Z],data:()=>({changeTaskList:[]}),computed:{...(0,le.Se)({userLevel:"getUserLevel",rootUrl:"getRootUrl"}),isCompleted:function(){return 0===this.changeTaskList.filter((t=>{const e=t.fields.change_task_status;return 5!==e&&6!==e})).length&&(3===this.rfcStatus||4===this.rfcStatus)}},methods:{addNewChangeItem:function(){new ot.u_(document.getElementById("newRunItemModal")).show()},closeRfc:function(){const t=new FormData;t.set("rfc_status",5),ce.post(`${this.rootUrl}rfc_information/${this.rfcId}/update_status/`,t).then((t=>{window.location.reload(!0)})).catch((t=>{this.showErrorModal(t,"request_for_change")}))},getRunSheetList:function(){ce.post(`${this.rootUrl}rfc_information/${this.locationId}/change_task_list/`).then((t=>{this.changeTaskList=t.data,this.$store.commit({type:"updateChangeTaskCount",changeTaskCount:t.data.length})})).catch((t=>{this.showErrorModal(t,"request_for_change")}))},getStatus:function(t){switch(t){case 1:return"Draft";case 2:return"Waiting for approval";case 3:return"Waiting to start";case 4:return"Task Started";case 5:return"Task Finished";case 6:return"Task FAILED";default:return"---"}},getUserName:function(t){var e=this.userList.filter((e=>e.id==t));return 0==e.length?"---":`${e[0].username}: ${e[0].first_name} ${e[0].last_name}`},updateChangeTaskList:function(t){this.changeTaskList=t,this.$store.commit({type:"updateChangeTaskCount",changeTaskCount:t.length})},updateChangeTaskStatus:function(t,e){const a=new FormData;a.set("change_task_status",e),ce.post(`${this.rootUrl}change_task_update_status/${t}/`,a).then((a=>{this.changeTaskList=this.changeTaskList.map((a=>a.pk==t?(a.fields.change_task_status=e,a):a))})).catch((t=>{this.showErrorModal(t,"request_for_change")}))}},mounted(){this.getRunSheetList()}},he=(0,oe.Z)(ue,[["render",function(t,e,a,l,n,i){const o=(0,s.up)("rfc-new-run-item");return(0,s.wg)(),(0,s.iD)("div",q,[E,(0,s._)("div",L,[t.changeTaskList.length>0?((0,s.wg)(),(0,s.iD)("table",N,[P,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.changeTaskList,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.pk},[(0,s._)("td",null,[B,(0,s._)("div",O,(0,C.toDisplayString)(t.getNiceDate(e.fields.change_task_start_date)),1),$,x,(0,s._)("div",A,(0,C.toDisplayString)(t.getNiceDate(e.fields.change_task_end_date)),1)]),(0,s._)("td",null,[(0,s._)("a",{href:`${t.rootUrl}change_task_information/${e.pk}/`},(0,C.toDisplayString)(e.fields.change_task_title),9,F)]),(0,s._)("td",null,[Z,(0,s._)("div",V,(0,C.toDisplayString)(i.getUserName(e.fields.change_task_assigned_user)),1),W,j,(0,s._)("div",H,(0,C.toDisplayString)(i.getUserName(e.fields.change_task_qa_user)),1),G,K,4!==a.rfcStatus?((0,s.wg)(),(0,s.iD)("div",Q,(0,C.toDisplayString)(i.getStatus(e.fields.change_task_status)),1)):((0,s.wg)(),(0,s.iD)("div",Y,[(0,s.kq)(" START BUTTON "),3==e.fields.change_task_status&&t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary change-task-button",onClick:t=>i.updateChangeTaskStatus(e.pk,4)},"Start Task",8,z)):(0,s.kq)("v-if",!0),(0,s.kq)(" FINISH BUTTON "),4==e.fields.change_task_status&&t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:1,href:"javascript:void(0)",class:"btn btn-warning change-task-button",onClick:t=>i.updateChangeTaskStatus(e.pk,5)},"Finish Task",8,J)):(0,s.kq)("v-if",!0),(0,s.kq)(" SUCCESS BUTTON "),5==e.fields.change_task_status&&t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",X,"Successful")):(0,s.kq)("v-if",!0),(0,s.kq)(" FAILED BUTTON "),6==e.fields.change_task_status&&t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",tt,"Failed")):(0,s.kq)("v-if",!0)]))])])))),128))])])):(0,s.kq)("v-if",!0),0==t.changeTaskList.length?((0,s.wg)(),(0,s.iD)("div",et," Currently there are no Change Tasks associated with this Request for Change. Please add some by clicking on the button below. ")):(0,s.kq)("v-if",!0)]),(0,s.kq)(" ADD NEW CHANGE TASK TO RUN SHEET "),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("hr",at)),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("div",st,[(0,s._)("div",lt,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[0]||(e[0]=(...t)=>i.addNewChangeItem&&i.addNewChangeItem(...t))},"New Change Item")):(0,s.kq)("v-if",!0)])])),(0,s.kq)(" If ALL Change Tasks have been completed - you can close the RFC "),i.isCompleted?((0,s.wg)(),(0,s.iD)("div",nt,[(0,s._)("div",it,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-warning save-changes",onClick:e[1]||(e[1]=(...t)=>i.closeRfc&&i.closeRfc(...t))},"Close Request for Change")):(0,s.kq)("v-if",!0)])])):(0,s.kq)("v-if",!0),(0,s.kq)(" Modal "),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.j4)(o,{key:3,"location-id":a.locationId,"user-list":a.userList,onUpdate_change_task_list:e[2]||(e[2]=t=>i.updateChangeTaskList(t))},null,8,["location-id","user-list"]))])}]]);var pe=a(5478),me=a(6612),fe=a(8416);const ge=a(9669),_e={name:"RfcModules",components:{GroupsAndUsersModule:me.Z,RfcBackoutPlan:R.Z,RfcImplementationPlan:U.Z,RfcRisk:I.Z,RfcRunSheetList:he,RfcTestPlan:pe.Z},props:{locationId:{type:Number,default:0},destination:{type:String,default:"request_for_change"},isReadOnly:{type:Boolean,default:!1},rfcResults:{type:Array,default:[]},userList:{type:Array,default:()=>[]}},mixins:[se.Z,fe.Z],data:()=>({rfcData:{rfcBackoutPlan:"",rfcImpactModel:{},rfcImplementationPlanModel:"",rfcPriorityModel:{},rfcRiskModel:{},rfcRiskSummaryModel:"",rfcTestPlanModel:"",rfcTypeModel:{}},validationData:{tab_2:!0,tab_3:!0,tab_4:!0,tab_5:!0}}),computed:{...(0,le.Se)({rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{sendData:function(t,e){this.showLoadingModal("Project"),ge.post(e,t).then((t=>{this.closeLoadingModal()})).catch((t=>{this.showErrorModal(t,this.destination)}))},updateBackoutPlan:function(){if(!1===this.validationData.tab_4)return void this.showErrorModal("Please fill out all data","Backout Plan","");const t=new FormData;t.set("text_input",this.rfcData.rfcBackoutPlan),this.sendData(t,`${this.rootUrl}rfc_information/${this.rfcResults[0].pk}/save/backout/`)},updateImplementation:function(){if(!1===this.validationData.tab_3)return void this.showErrorModal("Please fill out all data","Implementation","");const t=new FormData;t.set("text_input",this.rfcData.rfcImplementationPlanModel),this.sendData(t,`${this.rootUrl}rfc_information/${this.rfcResults[0].pk}/save/implementation/`)},updateRisk:function(){if(!1===this.validationData.tab_2)return void this.showErrorModal("Please fill out all data","Risk","");const t=new FormData;t.set("priority_of_change",this.rfcData.rfcPriorityModel),t.set("risk_of_change",this.rfcData.rfcRiskModel),t.set("impact_of_change",this.rfcData.rfcImpactModel),t.set("text_input",this.rfcData.rfcRiskSummaryModel),this.sendData(t,`${this.rootUrl}rfc_information/${this.rfcResults[0].pk}/save/risk/`)},updateValidation:function(t){this.validationData[t.tab]=t.value},updateTestPlan:function(){if(!1===this.validationData.tab_5)return void this.showErrorModal("Please fill out all data","Test Plan","");const t=new FormData;t.set("text_input",this.rfcData.rfcTestPlanModel),this.sendData(t,`${this.rootUrl}rfc_information/${this.rfcResults[0].pk}/save/test/`)},updateValues:function(t){this.rfcData[t.modelName]=t.modelValue}},mounted(){this.$store.commit({type:"updateDestination",destination:this.destination,locationId:this.locationId})}},ke=(0,oe.Z)(_e,[["render",function(t,e,a,R,U,I){const C=(0,s.up)("groups-and-users-module"),q=(0,s.up)("rfc-risk"),E=(0,s.up)("rfc-implementation-plan"),L=(0,s.up)("rfc-backout-plan"),N=(0,s.up)("rfc-test-plan"),P=(0,s.up)("rfc-run-sheet-list");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",n,[i,o,(0,s._)("div",r,[(0,s._)("div",d,[(0,s.Wm)(C,{"location-id":a.locationId,destination:a.destination},null,8,["location-id","destination"])]),(0,s._)("div",c,[(0,s.Wm)(q,{"rfc-results":a.rfcResults,"is-read-only":a.isReadOnly,onUpdate_validation:e[0]||(e[0]=t=>I.updateValidation(t)),onUpdate_values:e[1]||(e[1]=t=>I.updateValues(t))},null,8,["rfc-results","is-read-only"]),(0,s.kq)(" Update Button "),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("hr",u)),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("div",h,[(0,s._)("div",p,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[2]||(e[2]=(...t)=>I.updateRisk&&I.updateRisk(...t))},"Update Risks")):(0,s.kq)("v-if",!0)])]))]),(0,s._)("div",m,[(0,s.Wm)(E,{"rfc-results":a.rfcResults,"is-read-only":a.isReadOnly,onUpdate_validation:e[3]||(e[3]=t=>I.updateValidation(t)),onUpdate_values:e[4]||(e[4]=t=>I.updateValues(t))},null,8,["rfc-results","is-read-only"]),(0,s.kq)(" Update Button "),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("hr",f)),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("div",g,[(0,s._)("div",_,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[5]||(e[5]=(...t)=>I.updateImplementation&&I.updateImplementation(...t))},"Update Implementation Plan")):(0,s.kq)("v-if",!0)])]))]),(0,s._)("div",k,[(0,s.Wm)(L,{"rfc-results":a.rfcResults,"is-read-only":a.isReadOnly,onUpdate_validation:e[6]||(e[6]=t=>I.updateValidation(t)),onUpdate_values:e[7]||(e[7]=t=>I.updateValues(t))},null,8,["rfc-results","is-read-only"]),(0,s.kq)(" Update Button "),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("hr",v)),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("div",b,[(0,s._)("div",D,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[8]||(e[8]=(...t)=>I.updateBackoutPlan&&I.updateBackoutPlan(...t))},"Update Backout Plan")):(0,s.kq)("v-if",!0)])]))]),(0,s._)("div",y,[(0,s.Wm)(N,{"rfc-results":a.rfcResults,"is-read-only":a.isReadOnly,onUpdate_validation:e[9]||(e[9]=t=>I.updateValidation(t)),onUpdate_values:e[10]||(e[10]=t=>I.updateValues(t))},null,8,["rfc-results","is-read-only"]),(0,s.kq)(" Update Button "),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("hr",w)),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("div",M,[(0,s._)("div",S,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[11]||(e[11]=(...t)=>I.updateTestPlan&&I.updateTestPlan(...t))},"Update Test Plan")):(0,s.kq)("v-if",!0)])]))]),(0,s._)("div",T,[(0,s.Wm)(P,{"is-read-only":a.isReadOnly,"location-id":a.locationId,"user-list":a.userList,"rfc-id":a.rfcResults[0].pk,"rfc-status":a.rfcResults[0].fields.rfc_status,onUpdate_values:e[12]||(e[12]=t=>I.updateValues(t))},null,8,["is-read-only","location-id","user-list","rfc-id","rfc-status"])])])])])}]])},8416:(t,e,a)=>{a.d(e,{Z:()=>l});var s=a(5169);const l={methods:{closeLoadingModal:function(){const t=new s.u_(document.getElementById("loadingModal"));document.getElementById("loadingModalContent").innerHTML="UPDATED SUCCESSFULLY",setTimeout((()=>{t.hide()}),1e3)},showLoadingModal:function(t){new s.u_(document.getElementById("loadingModal")).show(),document.getElementById("loadingModalContent").innerHTML=`Updating your ${t} details`}}}}}]);