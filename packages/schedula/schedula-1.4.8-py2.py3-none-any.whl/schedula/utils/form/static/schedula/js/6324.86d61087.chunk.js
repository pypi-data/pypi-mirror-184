"use strict";(self.webpackChunkschedula_form=self.webpackChunkschedula_form||[]).push([[6324],{332:function(n,e,t){t.r(e),t.d(e,{default:function(){return Cn}});var i=t(74165),r=t(15861),o=t(29439),a=t(1413),s=t(4942),l=t(72791),c=t(71861),u=t(20659),d=t(58121),h=t.n(d),p=t(82279),f=t(66934),x=t(13967),j=t(54648),m=t(90752),b=t.n(m),g=t(14101),y=t.n(g),Z=t(65166),w=t(94728),v=(t(66131),t(80184)),C=function(n){var e=n.oldRevision,t=n.newRevision,i=n.type,r=n.hunks;return(0,v.jsx)(w.zI,{viewType:"split",diffType:i,hunks:r,children:function(n){return n.map((function(n){return(0,v.jsx)(w.SC,{hunk:n},n.content)}))}},e+"-"+t)};function z(n){var e=n.oldValue,t=n.newValue,i=(0,Z.formatLines)((0,Z.diffLines)(e,t),{context:3}),r=(0,w.z2)(i);return(0,v.jsx)("div",{children:r.map(C)})}var S=l.lazy((function(){return t.e(2971).then(t.bind(t,2971))})),k=l.lazy((function(){return t.e(2504).then(t.bind(t,82504))})),P=l.lazy((function(){return Promise.all([t.e(2770),t.e(4298)]).then(t.bind(t,31234))})),D=l.lazy((function(){return t.e(2044).then(t.bind(t,82044))})),R=l.lazy((function(){return t.e(5678).then(t.bind(t,95678))})),W=l.lazy((function(){return t.e(6473).then(t.bind(t,13453))})),E=l.lazy((function(){return t.e(9212).then(t.bind(t,69212))})),L=l.lazy((function(){return Promise.all([t.e(2770),t.e(8711),t.e(8654),t.e(6942)]).then(t.bind(t,26942))})),O=l.lazy((function(){return t.e(7078).then(t.bind(t,37078))})),T=l.lazy((function(){return t.e(6389).then(t.bind(t,46389))})),A=l.lazy((function(){return t.e(5182).then(t.bind(t,15182))})),H=l.lazy((function(){return t.e(5662).then(t.bind(t,45662))})),I=l.lazy((function(){return t.e(9076).then(t.bind(t,9076))})),N=l.lazy((function(){return t.e(8008).then(t.bind(t,98008))})),M=l.lazy((function(){return t.e(1009).then(t.bind(t,31009))})),V=l.lazy((function(){return t.e(8996).then(t.bind(t,38996))})),F=l.lazy((function(){return t.e(7039).then(t.bind(t,17039))})),J=l.lazy((function(){return t.e(7886).then(t.bind(t,97886))})),U=l.lazy((function(){return t.e(6108).then(t.bind(t,86108))})),G=l.lazy((function(){return t.e(8778).then(t.bind(t,38778))})),_=l.lazy((function(){return t.e(6237).then(t.bind(t,36237))})),X=l.lazy((function(){return t.e(1073).then(t.bind(t,81073))})),$=l.lazy((function(){return Promise.resolve().then(t.bind(t,44392))})),B=l.lazy((function(){return t.e(6445).then(t.bind(t,6445))})),q=l.lazy((function(){return t.e(3154).then(t.bind(t,93154))})),K=l.lazy((function(){return Promise.all([t.e(2770),t.e(8610),t.e(7639),t.e(3416)]).then(t.bind(t,95243))})),Q=l.lazy((function(){return t.e(633).then(t.bind(t,90633))})),Y=l.lazy((function(){return t.e(5029).then(t.bind(t,85029))})),nn=l.lazy((function(){return t.e(9188).then(t.bind(t,19188))})),en=l.lazy((function(){return t.e(553).then(t.bind(t,553))})),tn=l.lazy((function(){return t.e(1650).then(t.bind(t,41650))})),rn=l.lazy((function(){return t.e(7125).then(t.bind(t,97125))})),on=l.lazy((function(){return t.e(7751).then(t.bind(t,47751))})),an=l.lazy((function(){return t.e(3198).then(t.bind(t,53198))})),sn=l.lazy((function(){return Promise.all([t.e(2770),t.e(8711),t.e(1310)]).then(t.bind(t,5401))})),ln=l.lazy((function(){return t.e(7368).then(t.bind(t,77368))})),cn=l.lazy((function(){return t.e(2812).then(t.bind(t,12812))})),un=l.lazy((function(){return t.e(9056).then(t.bind(t,89056))})),dn=l.lazy((function(){return t.e(1963).then(t.bind(t,61963))})),hn=l.lazy((function(){return t.e(6711).then(t.bind(t,86711))})),pn=l.lazy((function(){return t.e(8249).then(t.bind(t,58249))}));function fn(n){var e=n.children,t=n.window,i=n.anchor,r=(0,p.Z)({target:t?t():void 0,disableHysteresis:!0,threshold:100});return(0,v.jsx)(P,{in:r,children:(0,v.jsx)(k,{onClick:function(n){i.current.scrollIntoView({block:"center"})},role:"presentation",sx:{position:"fixed",bottom:16,right:16},children:e})})}var xn=240,jn=function(n){return{width:xn,transition:n.transitions.create("width",{easing:n.transitions.easing.sharp,duration:n.transitions.duration.enteringScreen}),overflowX:"hidden"}},mn=function(n){return(0,s.Z)({transition:n.transitions.create("width",{easing:n.transitions.easing.sharp,duration:n.transitions.duration.leavingScreen}),overflowX:"hidden",width:"calc(".concat(n.spacing(7)," + 1px)")},n.breakpoints.up("sm"),{width:"calc(".concat(n.spacing(7)," + 1px)")})},bn=(0,f.ZP)("div")((function(n){var e=n.theme;return(0,a.Z)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar)})),gn=(0,f.ZP)(O,{shouldForwardProp:function(n){return"open"!==n}})((function(n){var e=n.theme,t=n.open;return(0,a.Z)({zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},t&&{marginLeft:xn,width:"calc(100% - ".concat(xn,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})})})),yn=(0,f.ZP)(L,{shouldForwardProp:function(n){return"open"!==n}})((function(n){var e=n.theme,t=n.open;return(0,a.Z)((0,a.Z)({width:xn,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box"},t&&(0,a.Z)((0,a.Z)({},jn(e)),{},{"& .MuiDrawer-paper":jn(e)})),!t&&(0,a.Z)((0,a.Z)({},mn(e)),{},{"& .MuiDrawer-paper":mn(e)}))})),Zn=function(n,e){return e.forEach((function(e){return(0,c.applyChange)(n,null,e)})),n},wn=function(n,e){return(n=n.filter((function(n,t){var i=(0,o.Z)(n,2),r=i[0];i[1];return 0===t||r<=e}))).slice(1).reduce((function(n,e){var t=(0,o.Z)(e,2),i=(t[0],t[1]);return Zn(n,i)}),h()(n[0][1]))},vn=function(n,e){var t,i=window.sessionStorage.getItem(n)||"",r=i.slice(28);return r=r?u.ZP.decompress.fromString(r):[],t=wn.bind(null,r),i.slice(0,28)===e&&(r=r.slice(0,r.length-1)),r.map((function(n){var i=(0,o.Z)(n,3),r=i[0],a=(i[1],i[2]);return[r,t,e===a]}))};function Cn(n){var e=l.useState(!1),t=(0,o.Z)(e,2),s=t[0],d=t[1],p=l.useState(!n.hasOwnProperty("savingData")||n.savingData),f=(0,o.Z)(p,2),m=f[0],g=f[1],Z=l.useState(n.current_tab||0),w=(0,o.Z)(Z,2),C=w[0],P=w[1],L=function(n,e){P(e)},xn=(0,x.Z)(),jn=l.useState(!1),mn=(0,o.Z)(jn,2),wn=mn[0],Cn=mn[1],zn="schedula-"+n.context.props.formContext.$id+"-"+n.context.props.idSchema.$id+"-formData",Sn=n.context.props.formData;(0,l.useEffect)((function(){if(m)try{!function(n,e){var t=y()(e,{algorithm:"sha1",encoding:"base64"}),i=window.sessionStorage.getItem(n)||"";if(i.slice(0,28)!==t){var r,a=i.slice(28);a=a?u.ZP.decompress.fromString(a):[];var s=Math.floor(Date.now()/6e4);if((a=a.filter((function(n,e){var t=(0,o.Z)(n,2),i=t[0];return t[1],i<s}))).length){if(!(r=(0,c.diff)(a.slice(1).reduce((function(n,e){var t=(0,o.Z)(e,2),i=(t[0],t[1]);return Zn(n,i)}),h()(a[0][1])),e)))return}else r=e;a.push([s,r,t]),window.sessionStorage.setItem(n,"".concat(t).concat(u.ZP.compress.toString(a)))}}(zn,Sn)}catch(n){g(!1),alert("Ops..".concat(m," disabling auto-saving because:\n\n").concat(n.message))}}),[zn,Sn,m]);var kn=function(){Cn(!0)},Pn=function(){Cn(!1)},Dn=function(e){if(e.preventDefault(),e.target.files.length){var t=new FileReader;t.onload=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.target,n.context.props.onChange(JSON.parse(r.result));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),t.readAsText(e.target.files[0]),e.target.value=null}},Rn=n["disable-drawer"]?O:gn,Wn=l.useState(!1),En=(0,o.Z)(Wn,2),Ln=En[0],On=En[1],Tn=l.useState(!1),An=(0,o.Z)(Tn,2),Hn=An[0],In=An[1],Nn=l.useState(null),Mn=(0,o.Z)(Nn,2),Vn=Mn[0],Fn=Mn[1],Jn=function(){In(!1),Fn(null)},Un=null;Ln&&(Un=y()(Sn,{algorithm:"sha1",encoding:"base64"}));var Gn=l.useRef(null);return(0,v.jsx)(l.Suspense,{children:(0,v.jsx)(Q,{onChange:function(){d(b().isFullscreen)},children:function(e){var t=e.ref,i=e.onToggle,r=e.isEnabled;return(0,v.jsxs)(k,{ref:t,sx:{display:"flex"},children:[(0,v.jsx)(A,{}),(0,v.jsx)(Rn,{color:"inherit",position:"fixed",open:wn,children:(0,v.jsxs)(S,{children:[n["disable-drawer"]?null:(0,v.jsx)(I,{color:"inherit","aria-label":"open drawer",onClick:kn,edge:"start",sx:(0,a.Z)({},wn&&{display:"none"}),children:(0,v.jsx)(N,{})}),(0,v.jsx)(k,{sx:{marginLeft:5},children:n["children-left"]},0),n["disable-tabs"]?null:(0,v.jsx)(W,(0,a.Z)((0,a.Z)({value:C,onChange:L,sx:{flexGrow:1}},n),{},{children:n.children.map((function(e,t){return(0,v.jsx)(E,(0,a.Z)((0,a.Z)({label:(e.props.schema||{}).title||""},(n["tabs-props"]||{})[t]||{}),function(n){return{id:"tab-".concat(n),"aria-controls":"tabpanel-".concat(n)}}(t)),t)}))}),1),(0,v.jsx)(k,{children:n["children-right"]},2)]})}),n["disable-drawer"]?null:(0,v.jsxs)(yn,{variant:"permanent",open:wn,children:[(0,v.jsx)(bn,{children:(0,v.jsx)(I,{onClick:Pn,children:"rtl"===xn.direction?(0,v.jsx)(V,{}):(0,v.jsx)(M,{})})}),(0,v.jsx)(H,{}),(0,v.jsxs)(T,{children:[r&&n["disable-fullscreen"]?null:(0,v.jsx)(K,(0,a.Z)((0,a.Z)({title:"Enable/Disable fullscreen",arrow:!0,placement:"right"},n["props-tooltip-fullscreen"]),{},{children:(0,v.jsx)(F,{disablePadding:!0,children:(0,v.jsxs)(J,(0,a.Z)((0,a.Z)({sx:{minHeight:48,justifyContent:wn?"initial":"center",px:2.5},onClick:i},n["props-fullscreen"]),{},{children:[(0,v.jsx)(U,{sx:{minWidth:0,mr:wn?3:"auto",justifyContent:"center"},children:s?(0,v.jsx)(nn,{}):(0,v.jsx)(Y,{})}),(0,v.jsx)(G,{primary:"FULLSCREEN",sx:{opacity:wn?1:0}})]}))},"fullscreen")})),n["disable-run"]?null:(0,v.jsx)(K,(0,a.Z)((0,a.Z)({title:"Run current data",arrow:!0,placement:"right"},n["props-tooltip-run"]),{},{children:(0,v.jsx)(F,{disablePadding:!0,children:(0,v.jsxs)(J,(0,a.Z)((0,a.Z)({component:"button",type:"submit",formMethod:"POST",sx:{minHeight:48,justifyContent:wn?"initial":"center",px:2.5}},n["props-run"]),{},{children:[(0,v.jsx)(U,{sx:{minWidth:0,mr:wn?3:"auto",justifyContent:"center"},children:(0,v.jsx)(q,{})}),(0,v.jsx)(G,{primary:"RUN",sx:{opacity:wn?1:0}})]}))},"run")})),n["disable-debug"]?null:(0,v.jsx)(K,(0,a.Z)((0,a.Z)({title:"Debug current data",arrow:!0,placement:"right"},n["props-tooltip-debug"]),{},{children:(0,v.jsx)(F,{disablePadding:!0,children:(0,v.jsxs)(J,(0,a.Z)((0,a.Z)({component:"button",type:"submit",formMethod:"POST",headers:JSON.stringify({Debug:"true"}),sx:{minHeight:48,justifyContent:wn?"initial":"center",px:2.5}},n["props-debug"]),{},{children:[(0,v.jsx)(U,{sx:{minWidth:0,mr:wn?3:"auto",justifyContent:"center"},children:(0,v.jsx)(pn,{})}),(0,v.jsx)(G,{primary:"DEBUG",sx:{opacity:wn?1:0}})]}))},"debug")})),n["disable-upload"]?null:(0,v.jsx)(K,(0,a.Z)((0,a.Z)({title:"Upload data",arrow:!0,placement:"right"},n["props-tooltip-upload"]),{},{children:(0,v.jsx)(F,{disablePadding:!0,children:(0,v.jsxs)(J,(0,a.Z)((0,a.Z)({component:"label",sx:{minHeight:48,justifyContent:wn?"initial":"center",px:2.5}},n["props-upload"]),{},{children:[(0,v.jsx)(U,{sx:{minWidth:0,mr:wn?3:"auto",justifyContent:"center"},children:(0,v.jsx)(B,{})}),(0,v.jsx)(G,{primary:"UPLOAD",sx:{opacity:wn?1:0}}),(0,v.jsx)("input",{accept:["json"],type:"file",hidden:!0,onChange:Dn})]}))},"upload")})),n["disable-download"]?null:(0,v.jsx)(K,(0,a.Z)((0,a.Z)({title:"Download current data",arrow:!0,placement:"right"},n["props-tooltip-download"]),{},{children:(0,v.jsx)(F,{disablePadding:!0,children:(0,v.jsxs)(J,(0,a.Z)((0,a.Z)({sx:{minHeight:48,justifyContent:wn?"initial":"center",px:2.5},onClick:function(){(0,j.exportJson)({data:n.context.props.formData,fileName:"".concat(n.context.props.name||"file",".json")})}},n["props-download"]),{},{children:[(0,v.jsx)(U,{sx:{minWidth:0,mr:wn?3:"auto",justifyContent:"center"},children:(0,v.jsx)($,{})}),(0,v.jsx)(G,{primary:"DOWNLOAD",sx:{opacity:wn?1:0}})]}))},"download")})),n["disable-datasaver"]?null:(0,v.jsx)(K,(0,a.Z)((0,a.Z)({title:(m?"Stop saving":"Save")+" data on the sessionStorage of the browser",arrow:!0,placement:"right"},n["props-tooltip-datasaver"]),{},{children:(0,v.jsx)(F,{disablePadding:!0,children:(0,v.jsxs)(J,(0,a.Z)((0,a.Z)({component:"button",sx:{minHeight:48,justifyContent:wn?"initial":"center",px:2.5},onClick:function(){g(!m)}},n["props-datasaver"]),{},{children:[(0,v.jsx)(U,{sx:{minWidth:0,mr:wn?3:"auto",justifyContent:"center"},children:m?(0,v.jsx)(en,{}):(0,v.jsx)(tn,{})}),(0,v.jsx)(G,{primary:"DATASAVER",sx:{opacity:wn?1:0}})]}))},"datasaver")})),n["disable-restore"]?null:(0,v.jsx)(K,(0,a.Z)((0,a.Z)({title:"Restore data",arrow:!0,placement:"right"},n["props-tooltip-restore"]),{},{children:(0,v.jsx)(F,{disablePadding:!0,children:(0,v.jsxs)(J,(0,a.Z)((0,a.Z)({component:"label",sx:{minHeight:48,justifyContent:wn?"initial":"center",px:2.5},onClick:function(){On(!0)}},n["props-restore"]),{},{children:[(0,v.jsx)(U,{sx:{minWidth:0,mr:wn?3:"auto",justifyContent:"center"},children:(0,v.jsx)(rn,{})}),(0,v.jsx)(G,{primary:"RESTORE DATA",sx:{opacity:wn?1:0}})]}))},"restore")})),n["disable-delete"]?null:(0,v.jsx)(K,(0,a.Z)((0,a.Z)({title:"Cleanup current data",arrow:!0,placement:"right"},n["props-tooltip-delete"]),{},{children:(0,v.jsx)(F,{disablePadding:!0,children:(0,v.jsxs)(J,(0,a.Z)((0,a.Z)({component:"label",sx:{minHeight:48,justifyContent:wn?"initial":"center",px:2.5},onClick:function(){n.context.props.onChange({})}},n["props-delete"]),{},{children:[(0,v.jsx)(U,{sx:{minWidth:0,mr:wn?3:"auto",justifyContent:"center"},children:(0,v.jsx)(hn,{})}),(0,v.jsx)(G,{primary:"CLEAN",sx:{opacity:wn?1:0}})]}))},"delete")}))]})]}),(0,v.jsxs)(k,(0,a.Z)((0,a.Z)({component:"main",sx:{bgcolor:"background.paper",flexGrow:1,py:3,pl:3,pr:"67px"}},n["props-main"]),{},{children:[(0,v.jsx)(bn,{}),(0,v.jsx)("div",{ref:Gn}),n.children.map((function(n,e){return Math.abs(C)===e?n:null}))]})),(0,v.jsx)(fn,{anchor:Gn,children:(0,v.jsx)(D,{size:"small","aria-label":"scroll back to top",children:(0,v.jsx)(R,{})})}),(0,v.jsxs)(sn,{fullWidth:!0,sx:{"z-index":1e11},maxWidth:"sm",scroll:"paper",onClose:function(){On(!1)},open:Ln,children:[(0,v.jsx)(an,{children:"Restore data"}),(0,v.jsx)(ln,{dividers:!0,children:(0,v.jsxs)(T,{sx:{pt:0},children:[Ln?vn(zn,Un).reverse().map((function(e,t){var i=(0,o.Z)(e,3),r=i[0],a=i[1],s=i[2];return(0,v.jsxs)(F,{secondaryAction:s?null:(0,v.jsx)(I,{onClick:function(){Fn([r,a(r)]),In(!0)},children:(0,v.jsx)(K,{title:"Show data difference",arrow:!0,placement:"left",children:(0,v.jsx)(on,{})})}),children:[(0,v.jsx)(_,{sx:{cursor:"pointer"},onClick:function(){On(!1),n.context.props.onChange(a(r))},children:(0,v.jsx)(K,{title:"Restore data",arrow:!0,placement:"right",children:(0,v.jsx)(X,{children:(0,v.jsx)(dn,{})})})}),(0,v.jsx)(G,{primary:new Date(6e4*r).toLocaleString()})]},t)})):null,(0,v.jsxs)(sn,{scroll:"paper",open:Hn,onClose:Jn,fullWidth:!0,maxWidth:"xl",children:[(0,v.jsx)(an,{children:"Show difference"}),(0,v.jsx)(ln,{dividers:!0,children:Vn?(0,v.jsx)(z,{rightTitle:new Date(6e4*Math.floor(Date.now()/6e4)).toLocaleString()+" (current)",leftTitle:new Date(6e4*Vn[0]).toLocaleString(),oldValue:JSON.stringify(Vn[1],null,2),newValue:JSON.stringify(n.context.props.formData,null,2)}):null}),(0,v.jsxs)(cn,{children:[(0,v.jsx)(un,{onClick:function(){On(!1),n.context.props.onChange(Vn[0]),Jn()},children:"Restore"}),(0,v.jsx)(un,{onClick:Jn,children:"Close"})]})]})]})}),(0,v.jsxs)(cn,{children:[(0,v.jsx)(un,{onClick:function(){On(!1),window.sessionStorage.removeItem(zn)},children:"Erase storage"}),(0,v.jsx)(un,{onClick:function(){On(!1)},children:"Close"})]})]})]})}})})}}}]);
//# sourceMappingURL=6324.86d61087.chunk.js.map