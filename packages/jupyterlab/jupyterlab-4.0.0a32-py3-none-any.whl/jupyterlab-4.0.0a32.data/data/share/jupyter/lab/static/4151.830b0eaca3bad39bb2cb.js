(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[4151,109,4155,9897,1552],{72382:(e,t,s)=>{"use strict";s.d(t,{JG:()=>c,UI:()=>i,Ue:()=>n,Yj:()=>a,Yu:()=>o});const n=()=>new Map;const c=e=>{const t=n();e.forEach(((e,s)=>{t.set(s,e)}));return t};const o=(e,t,s)=>{let n=e.get(t);if(n===undefined){e.set(t,n=s())}return n};const i=(e,t)=>{const s=[];for(const[n,c]of e){s.push(t(c,n))}return s};const a=(e,t)=>{for(const[s,n]of e){if(t(n,s)){return true}}return false};const r=(e,t)=>{for(const[s,n]of e){if(!t(n,s)){return false}}return true}},14247:(e,t,s)=>{"use strict";s.d(t,{Fp:()=>g,GR:()=>v,GW:()=>n,VV:()=>f,Wn:()=>o,sQ:()=>w});const n=Math.floor;const c=Math.ceil;const o=Math.abs;const i=Math.imul;const a=Math.round;const r=Math.log10;const l=Math.log2;const d=Math.log;const h=Math.sqrt;const u=(e,t)=>e+t;const f=(e,t)=>e<t?e:t;const g=(e,t)=>e>t?e:t;const p=Number.isNaN;const w=Math.pow;const m=e=>Math.pow(10,e);const y=Math.sign;const v=e=>e!==0?e<0:1/e<0},34155:e=>{var t=e.exports={};var s;var n;function c(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){s=setTimeout}else{s=c}}catch(e){s=c}try{if(typeof clearTimeout==="function"){n=clearTimeout}else{n=o}}catch(e){n=o}})();function i(e){if(s===setTimeout){return setTimeout(e,0)}if((s===c||!s)&&setTimeout){s=setTimeout;return setTimeout(e,0)}try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}function a(e){if(n===clearTimeout){return clearTimeout(e)}if((n===o||!n)&&clearTimeout){n=clearTimeout;return clearTimeout(e)}try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}var r=[];var l=false;var d;var h=-1;function u(){if(!l||!d){return}l=false;if(d.length){r=d.concat(r)}else{h=-1}if(r.length){f()}}function f(){if(l){return}var e=i(u);l=true;var t=r.length;while(t){d=r;r=[];while(++h<t){if(d){d[h].run()}}h=-1;t=r.length}d=null;l=false;a(e)}t.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var s=1;s<arguments.length;s++){t[s-1]=arguments[s]}}r.push(new g(e,t));if(r.length===1&&!l){i(f)}};function g(e,t){this.fun=e;this.array=t}g.prototype.run=function(){this.fun.apply(null,this.array)};t.title="browser";t.browser=true;t.env={};t.argv=[];t.version="";t.versions={};function p(){}t.on=p;t.addListener=p;t.once=p;t.off=p;t.removeListener=p;t.removeAllListeners=p;t.emit=p;t.prependListener=p;t.prependOnceListener=p;t.listeners=function(e){return[]};t.binding=function(e){throw new Error("process.binding is not supported")};t.cwd=function(){return"/"};t.chdir=function(e){throw new Error("process.chdir is not supported")};t.umask=function(){return 0}},1057:(e,t,s)=>{"use strict";s.d(t,{Ag:()=>f,GL:()=>u,oy:()=>w,xq:()=>g});var n=s(88534);var c=s(64485);var o=s(20817);var i=s(14247);var a=s(58290);var r=s(97027);var l=s(66350);var d=s.n(l);const h=3e4;class u extends a.y{constructor(e){super();this.doc=e;this.clientID=e.clientID;this.states=new Map;this.meta=new Map;this._checkInterval=setInterval((()=>{const e=o.ZG();if(this.getLocalState()!==null&&h/2<=e-this.meta.get(this.clientID).lastUpdated){this.setLocalState(this.getLocalState())}const t=[];this.meta.forEach(((s,n)=>{if(n!==this.clientID&&h<=e-s.lastUpdated&&this.states.has(n)){t.push(n)}}));if(t.length>0){f(this,t,"timeout")}}),i.GW(h/10));e.on("destroy",(()=>{this.destroy()}));this.setLocalState({})}destroy(){this.emit("destroy",[this]);this.setLocalState(null);super.destroy();clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const t=this.clientID;const s=this.meta.get(t);const n=s===undefined?0:s.clock+1;const c=this.states.get(t);if(e===null){this.states.delete(t)}else{this.states.set(t,e)}this.meta.set(t,{clock:n,lastUpdated:o.ZG()});const i=[];const a=[];const l=[];const d=[];if(e===null){d.push(t)}else if(c==null){if(e!=null){i.push(t)}}else{a.push(t);if(!r.Hi(c,e)){l.push(t)}}if(i.length>0||l.length>0||d.length>0){this.emit("change",[{added:i,updated:l,removed:d},"local"])}this.emit("update",[{added:i,updated:a,removed:d},"local"])}setLocalStateField(e,t){const s=this.getLocalState();if(s!==null){this.setLocalState({...s,[e]:t})}}getStates(){return this.states}}const f=(e,t,s)=>{const n=[];for(let c=0;c<t.length;c++){const s=t[c];if(e.states.has(s)){e.states.delete(s);if(s===e.clientID){const t=e.meta.get(s);e.meta.set(s,{clock:t.clock+1,lastUpdated:o.ZG()})}n.push(s)}}if(n.length>0){e.emit("change",[{added:[],updated:[],removed:n},s]);e.emit("update",[{added:[],updated:[],removed:n},s])}};const g=(e,t,s=e.states)=>{const c=t.length;const o=n.Mf();n.uE(o,c);for(let i=0;i<c;i++){const c=t[i];const a=s.get(c)||null;const r=e.meta.get(c).clock;n.uE(o,c);n.uE(o,r);n.uw(o,JSON.stringify(a))}return n._f(o)};const p=(e,t)=>{const s=decoding.createDecoder(e);const n=encoding.createEncoder();const c=decoding.readVarUint(s);encoding.writeVarUint(n,c);for(let o=0;o<c;o++){const e=decoding.readVarUint(s);const c=decoding.readVarUint(s);const o=JSON.parse(decoding.readVarString(s));const i=t(o);encoding.writeVarUint(n,e);encoding.writeVarUint(n,c);encoding.writeVarString(n,JSON.stringify(i))}return encoding.toUint8Array(n)};const w=(e,t,s)=>{const n=c.l1(t);const i=o.ZG();const a=[];const l=[];const d=[];const h=[];const u=c.yg(n);for(let o=0;o<u;o++){const t=c.yg(n);let s=c.yg(n);const o=JSON.parse(c.kf(n));const u=e.meta.get(t);const f=e.states.get(t);const g=u===undefined?0:u.clock;if(g<s||g===s&&o===null&&e.states.has(t)){if(o===null){if(t===e.clientID&&e.getLocalState()!=null){s++}else{e.states.delete(t)}}else{e.states.set(t,o)}e.meta.set(t,{clock:s,lastUpdated:i});if(u===undefined&&o!==null){a.push(t)}else if(u!==undefined&&o===null){h.push(t)}else if(o!==null){if(!r.Hi(o,f)){d.push(t)}l.push(t)}}}if(a.length>0||d.length>0||h.length>0){e.emit("change",[{added:a,updated:d,removed:h},s])}if(a.length>0||l.length>0||h.length>0){e.emit("update",[{added:a,updated:l,removed:h},s])}}},64151:(e,t,s)=>{"use strict";s.r(t);s.d(t,{WebsocketProvider:()=>Y});var n=s(66350);var c=s(72382);var o=s(65679);var i=s(62794);const a=new Map;class r{constructor(e){this.room=e;this.onmessage=null;i.z((t=>t.key===e&&this.onmessage!==null&&this.onmessage({data:o.Gh(t.newValue||"")})))}postMessage(e){i.X.setItem(this.room,o.s3(o.eh(e)))}}const l=typeof BroadcastChannel==="undefined"?r:BroadcastChannel;const d=e=>c.Yu(a,e,(()=>{const t=new Set;const s=new l(e);s.onmessage=e=>t.forEach((t=>t(e.data,"broadcastchannel")));return{bc:s,subs:t}}));const h=(e,t)=>d(e).subs.add(t);const u=(e,t)=>d(e).subs.delete(t);const f=(e,t,s=null)=>{const n=d(e);n.bc.postMessage(t);n.subs.forEach((e=>e(t,s)))};var g=s(20817);var p=s(88534);var w=s(64485);const m=0;const y=1;const v=2;const b=(e,t)=>{p.uE(e,m);const s=n.encodeStateVector(t);p.mP(e,s)};const _=(e,t,s)=>{p.uE(e,y);p.mP(e,n.encodeStateAsUpdate(t,s))};const U=(e,t,s)=>_(t,s,w.HN(e));const I=(e,t,s)=>{try{n.applyUpdate(t,w.HN(e),s)}catch(c){console.error("Caught error while handling a Yjs update",c)}};const M=(e,t)=>{p.uE(e,v);p.mP(e,t)};const k=I;const E=(e,t,s,n)=>{const c=w.yg(e);switch(c){case m:U(e,t,s);break;case y:I(e,s,n);break;case v:k(e,s,n);break;default:throw new Error("Unknown message type")}return c};const S=0;const L=(e,t)=>{encoding.writeVarUint(e,S);encoding.writeVarString(e,t)};const C=(e,t,s)=>{switch(w.yg(e)){case S:s(t,w.kf(e))}};var T=s(1057);var H=s(58290);var V=s(14247);var x=s(59735);const D=e=>{const t={};const s=e.split("?");const n=s[s.length-1].split("&");for(var c=0;c<n.length;c++){const e=n[c];if(e.length>0){const s=e.split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1]||"")}}return t};const G=e=>x.UI(e,((e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`)).join("&");var R=s(34155);const B=0;const A=3;const P=1;const N=2;const W=[];W[B]=(e,t,s,n,c)=>{p.uE(e,B);const o=E(t,e,s.doc,s);if(n&&o===y&&!s.synced){s.synced=true}};W[A]=(e,t,s,n,c)=>{p.uE(e,P);p.mP(e,T.xq(s.awareness,Array.from(s.awareness.getStates().keys())))};W[P]=(e,t,s,n,c)=>{T.oy(s.awareness,w.HN(t),s)};W[N]=(e,t,s,n,c)=>{C(t,s.doc,Z)};const q=3e4;const Z=(e,t)=>console.warn(`Permission denied to access ${e.url}.\n${t}`);const j=(e,t,s)=>{const n=w.l1(t);const c=p.Mf();const o=w.yg(n);const i=e.messageHandlers[o];if(i){i(c,n,e,s,o)}else{console.error("Unable to compute message")}return c};const J=e=>{if(e.shouldConnect&&e.ws===null){const t=new e._WS(e.url);t.binaryType="arraybuffer";e.ws=t;e.wsconnecting=true;e.wsconnected=false;e.synced=false;t.onmessage=s=>{e.wsLastMessageReceived=g.ZG();const n=j(e,new Uint8Array(s.data),true);if(p.kE(n)>1){t.send(p._f(n))}};t.onerror=t=>{e.emit("connection-error",[t,e])};t.onclose=t=>{e.emit("connection-close",[t,e]);e.ws=null;e.wsconnecting=false;if(e.wsconnected){e.wsconnected=false;e.synced=false;T.Ag(e.awareness,Array.from(e.awareness.getStates().keys()).filter((t=>t!==e.doc.clientID)),e);e.emit("status",[{status:"disconnected"}])}else{e.wsUnsuccessfulReconnects++}setTimeout(J,V.VV(V.sQ(2,e.wsUnsuccessfulReconnects)*100,e.maxBackoffTime),e)};t.onopen=()=>{e.wsLastMessageReceived=g.ZG();e.wsconnecting=false;e.wsconnected=true;e.wsUnsuccessfulReconnects=0;e.emit("status",[{status:"connected"}]);const s=p.Mf();p.uE(s,B);b(s,e.doc);t.send(p._f(s));if(e.awareness.getLocalState()!==null){const s=p.Mf();p.uE(s,P);p.mP(s,T.xq(e.awareness,[e.doc.clientID]));t.send(p._f(s))}};e.emit("status",[{status:"connecting"}])}};const O=(e,t)=>{if(e.wsconnected){e.ws.send(t)}if(e.bcconnected){f(e.bcChannel,t,e)}};class Y extends H.y{constructor(e,t,s,{connect:n=true,awareness:c=new T.GL(s),params:o={},WebSocketPolyfill:i=WebSocket,resyncInterval:a=-1,maxBackoffTime:r=2500,disableBc:l=false}={}){super();while(e[e.length-1]==="/"){e=e.slice(0,e.length-1)}const d=G(o);this.maxBackoffTime=r;this.bcChannel=e+"/"+t;this.url=e+"/"+t+(d.length===0?"":"?"+d);this.roomname=t;this.doc=s;this._WS=i;this.awareness=c;this.wsconnected=false;this.wsconnecting=false;this.bcconnected=false;this.disableBc=l;this.wsUnsuccessfulReconnects=0;this.messageHandlers=W.slice();this._synced=false;this.ws=null;this.wsLastMessageReceived=0;this.shouldConnect=n;this._resyncInterval=0;if(a>0){this._resyncInterval=setInterval((()=>{if(this.ws){const e=p.Mf();p.uE(e,B);b(e,s);this.ws.send(p._f(e))}}),a)}this._bcSubscriber=(e,t)=>{if(t!==this){const t=j(this,new Uint8Array(e),false);if(p.kE(t)>1){f(this.bcChannel,p._f(t),this)}}};this._updateHandler=(e,t)=>{if(t!==this){const t=p.Mf();p.uE(t,B);M(t,e);O(this,p._f(t))}};this.doc.on("update",this._updateHandler);this._awarenessUpdateHandler=({added:e,updated:t,removed:s},n)=>{const o=e.concat(t).concat(s);const i=p.Mf();p.uE(i,P);p.mP(i,T.xq(c,o));O(this,p._f(i))};this._beforeUnloadHandler=()=>{T.Ag(this.awareness,[s.clientID],"window unload")};if(typeof window!=="undefined"){window.addEventListener("beforeunload",this._beforeUnloadHandler)}else if(typeof R!=="undefined"){R.on("exit",this._beforeUnloadHandler)}c.on("update",this._awarenessUpdateHandler);this._checkInterval=setInterval((()=>{if(this.wsconnected&&q<g.ZG()-this.wsLastMessageReceived){this.ws.close()}}),q/10);if(n){this.connect()}}get synced(){return this._synced}set synced(e){if(this._synced!==e){this._synced=e;this.emit("synced",[e]);this.emit("sync",[e])}}destroy(){if(this._resyncInterval!==0){clearInterval(this._resyncInterval)}clearInterval(this._checkInterval);this.disconnect();if(typeof window!=="undefined"){window.removeEventListener("beforeunload",this._beforeUnloadHandler)}else if(typeof R!=="undefined"){R.off("exit",this._beforeUnloadHandler)}this.awareness.off("update",this._awarenessUpdateHandler);this.doc.off("update",this._updateHandler);super.destroy()}connectBc(){if(this.disableBc){return}if(!this.bcconnected){h(this.bcChannel,this._bcSubscriber);this.bcconnected=true}const e=p.Mf();p.uE(e,B);b(e,this.doc);f(this.bcChannel,p._f(e),this);const t=p.Mf();p.uE(t,B);_(t,this.doc);f(this.bcChannel,p._f(t),this);const s=p.Mf();p.uE(s,A);f(this.bcChannel,p._f(s),this);const n=p.Mf();p.uE(n,P);p.mP(n,T.xq(this.awareness,[this.doc.clientID]));f(this.bcChannel,p._f(n),this)}disconnectBc(){const e=p.Mf();p.uE(e,P);p.mP(e,T.xq(this.awareness,[this.doc.clientID],new Map));O(this,p._f(e));if(this.bcconnected){u(this.bcChannel,this._bcSubscriber);this.bcconnected=false}}disconnect(){this.shouldConnect=false;this.disconnectBc();if(this.ws!==null){this.ws.close()}}connect(){this.shouldConnect=true;if(!this.wsconnected&&this.ws===null){J(this);this.connectBc()}}}}}]);
//# sourceMappingURL=4151.830b0eaca3bad39bb2cb.js.map?v=830b0eaca3bad39bb2cb