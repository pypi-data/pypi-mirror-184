(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[8229,109,4155,9897,1552],{26655:(t,e,s)=>{"use strict";s.r(e);s.d(e,{YBaseCell:()=>h,YCodeCell:()=>g,YDocument:()=>r,YFile:()=>l,YMarkdownCell:()=>m,YNotebook:()=>y,YRawCell:()=>f,convertYMapEventToMapChange:()=>_,createMutex:()=>v,createStandaloneCell:()=>c});var n=s(71348);var a=s(69236);var o=s(1057);var i=s(66350);class r{constructor(){this.ydoc=new i.Doc;this.ystate=this.ydoc.getMap("state");this.undoManager=new i.UndoManager([],{trackedOrigins:new Set([this]),doc:this.ydoc});this.awareness=new o.GL(this.ydoc);this.onStateChanged=t=>{const e=new Array;t.keysChanged.forEach((s=>{const n=t.changes.keys.get(s);if(n){e.push({name:s,oldValue:n.oldValue,newValue:this.ystate.get(s)})}}));this._changed.emit({stateChange:e})};this._changed=new a.Signal(this);this._isDisposed=false;this.ystate.observe(this.onStateChanged)}get changed(){return this._changed}get isDisposed(){return this._isDisposed}get state(){return n.JSONExt.deepCopy(this.ystate.toJSON())}canUndo(){return this.undoManager.undoStack.length>0}canRedo(){return this.undoManager.redoStack.length>0}dispose(){if(this._isDisposed){return}this._isDisposed=true;this.ystate.unobserve(this.onStateChanged);this.awareness.destroy();this.undoManager.destroy();this.ydoc.destroy();a.Signal.clearData(this)}getState(t){const e=this.ystate.get(t);return typeof e==="undefined"?e:n.JSONExt.deepCopy(e)}setState(t,e){if(!n.JSONExt.deepEqual(this.ystate.get(t),e)){this.ystate.set(t,e)}}undo(){this.undoManager.undo()}redo(){this.undoManager.redo()}clearUndoHistory(){this.undoManager.clear()}transact(t,e=true){this.ydoc.transact(t,e?this:null)}}class l extends r{constructor(){super();this.ysource=this.ydoc.getText("source");this._modelObserver=t=>{this._changed.emit({sourceChange:t.changes.delta})};this.undoManager.addToScope(this.ysource);this.ysource.observe(this._modelObserver)}get source(){return this.getSource()}set source(t){this.setSource(t)}dispose(){if(this.isDisposed){return}this.ysource.unobserve(this._modelObserver);super.dispose()}getSource(){return this.ysource.toString()}setSource(t){this.transact((()=>{const e=this.ysource;e.delete(0,e.length);e.insert(0,t)}))}updateSource(t,e,s=""){this.transact((()=>{const n=this.ysource;n.insert(t,s);n.delete(t+s.length,e-t)}))}}const d=(t,e={})=>{switch(t.get("cell_type")){case"code":return new g(t,t.get("source"),t.get("outputs"),e);case"markdown":return new m(t,t.get("source"),e);case"raw":return new f(t,t.get("source"),e);default:throw new Error("Found unknown cell type")}};const u=(t,e)=>{var s,a;const o=new i.Map;const r=new i.Text;o.set("source",r);o.set("metadata",{});o.set("cell_type",t.cell_type);o.set("id",(s=t.id)!==null&&s!==void 0?s:n.UUID.uuid4());let l;switch(t.cell_type){case"markdown":{l=new m(o,r,{notebook:e});if(t.attachments!=null){l.setAttachments(t.attachments)}break}case"code":{const s=new i.Array;o.set("outputs",s);l=new g(o,r,s,{notebook:e});const n=t;l.execution_count=(a=n.execution_count)!==null&&a!==void 0?a:null;if(n.outputs){l.setOutputs(n.outputs)}break}default:{l=new f(o,r,{notebook:e});if(t.attachments){l.setAttachments(t.attachments)}break}}if(t.metadata!=null){l.setMetadata(t.metadata)}if(t.source!=null){l.setSource(typeof t.source==="string"?t.source:t.source.join("\n"))}return l};const c=t=>u(t);class h{static createStandalone(t){return u({id:t,cell_type:this.prototype.cell_type})}constructor(t,e,s={}){this._modelObserver=t=>{this._changed.emit(this.getChanges(t))};this._metadataChanged=new a.Signal(this);this._notebook=null;this._changed=new a.Signal(this);this._disposed=new a.Signal(this);this._isDisposed=false;this._undoManager=null;this.ymodel=t;this._ysource=e;this._prevSourceLength=e?e.length:0;this._notebook=null;this._awareness=null;this._undoManager=null;if(s.notebook){this._notebook=s.notebook}else{const t=new i.Doc;t.getArray().insert(0,[this.ymodel]);this._awareness=new o.GL(t);this._undoManager=new i.UndoManager([this.ymodel],{trackedOrigins:new Set([this])})}this.ymodel.observeDeep(this._modelObserver)}get awareness(){var t,e,s;return(s=(t=this._awareness)!==null&&t!==void 0?t:(e=this.notebook)===null||e===void 0?void 0:e.awareness)!==null&&s!==void 0?s:null}get cell_type(){throw new Error("A YBaseCell must not be constructed")}get changed(){return this._changed}get disposed(){return this._disposed}get id(){return this.getId()}get isDisposed(){return this._isDisposed}get isStandalone(){return this._notebook!==null}get metadata(){return this.getMetadata()}set metadata(t){this.setMetadata(t)}get metadataChanged(){return this._metadataChanged}get notebook(){return this._notebook}get source(){return this.getSource()}set source(t){this.setSource(t)}get undoManager(){var t;if(!this.notebook){return this._undoManager}return((t=this.notebook)===null||t===void 0?void 0:t.disableDocumentWideUndoRedo)?this._undoManager:this.notebook.undoManager}setUndoManager(){if(this._undoManager){throw new Error("The cell undo manager is already set.")}if(this._notebook&&this._notebook.disableDocumentWideUndoRedo){this._undoManager=new i.UndoManager([this.ymodel],{trackedOrigins:new Set([this])})}}get ysource(){return this._ysource}canUndo(){return!!this.undoManager&&this.undoManager.undoStack.length>0}canRedo(){return!!this.undoManager&&this.undoManager.redoStack.length>0}clearUndoHistory(){var t;(t=this.undoManager)===null||t===void 0?void 0:t.clear()}undo(){var t;(t=this.undoManager)===null||t===void 0?void 0:t.undo()}redo(){var t;(t=this.undoManager)===null||t===void 0?void 0:t.redo()}dispose(){var t;if(this._isDisposed)return;this._isDisposed=true;this.ymodel.unobserveDeep(this._modelObserver);if(this._awareness){const t=this._awareness.doc;this._awareness.destroy();t.destroy()}if(this._undoManager){if(this._undoManager===((t=this.notebook)===null||t===void 0?void 0:t.undoManager)){this._undoManager=null}else{this._undoManager.destroy()}}this._disposed.emit();a.Signal.clearData(this)}getId(){return this.ymodel.get("id")}getSource(){return this.ysource.toString()}setSource(t){this.transact((()=>{this.ysource.delete(0,this.ysource.length);this.ysource.insert(0,t)}))}updateSource(t,e,s=""){this.transact((()=>{const n=this.ysource;n.insert(t,s);n.delete(t+s.length,e-t)}))}deleteMetadata(t){if(typeof this.getMetadata(t)==="undefined"){return}const e=n.JSONExt.deepCopy(this.ymodel.get("metadata"));delete e[t];if(t==="collapsed"&&e.jupyter){delete e.jupyter.outputs_hidden;if(Object.keys(e.jupyter).length===0){delete e.jupyter}}else if(t==="jupyter"){delete e.collapsed}this.setMetadata(e)}getMetadata(t){var e;const s=(e=this.ymodel.get("metadata"))!==null&&e!==void 0?e:{};if(typeof t==="string"){const e=s[t];return typeof e==="undefined"?undefined:n.JSONExt.deepCopy(s[t])}else{return n.JSONExt.deepCopy(s)}}setMetadata(t,e){var s,a,o;if(typeof t==="string"){if(typeof e==="undefined"){throw new TypeError(`Metadata value for ${t} cannot be 'undefined'; use deleteMetadata.`)}const o=t;if(n.JSONExt.deepEqual((s=this.getMetadata(o))!==null&&s!==void 0?s:null,e)){return}const i=this.getMetadata();i[o]=e;if(o==="collapsed"&&((a=i.jupyter)===null||a===void 0?void 0:a.outputs_hidden)!==e){i.jupyter={...i.jupyter,outputs_hidden:e}}else if(o==="jupyter"){if(typeof e["outputs_hidden"]!=="undefined"){if(i.collapsed!==e["outputs_hidden"]){i.collapsed=e["outputs_hidden"]}}else{delete i.collapsed}}this.transact((()=>{this.ymodel.set("metadata",i)}))}else{const e=n.JSONExt.deepCopy(t);if(e.collapsed!=null){e.jupyter=e.jupyter||{};e.jupyter.outputs_hidden=e.collapsed}else if(((o=e===null||e===void 0?void 0:e.jupyter)===null||o===void 0?void 0:o.outputs_hidden)!=null){e.collapsed=e.jupyter.outputs_hidden}if(!n.JSONExt.deepEqual(e,this.getMetadata())){this.transact((()=>{this.ymodel.set("metadata",e)}))}}}toJSON(){return{id:this.getId(),cell_type:this.cell_type,source:this.getSource(),metadata:this.getMetadata()}}transact(t,e=true){this.notebook&&e?this.notebook.transact(t):this.ymodel.doc==null?t():this.ymodel.doc.transact(t,this)}getChanges(t){var e;const s={};const a=t.find((t=>t.target===this.ymodel.get("source")));if(a){s.sourceChange=a.changes.delta}const o=t.find((t=>t.target===this.ymodel));if(o&&o.keysChanged.has("metadata")){const t=o.changes.keys.get("metadata");const a=s.metadataChange={oldValue:(t===null||t===void 0?void 0:t.oldValue)?t.oldValue:undefined,newValue:this.getMetadata()};const i=(e=a.oldValue)!==null&&e!==void 0?e:{};const r=Object.keys(i);const l=Object.keys(a.newValue);for(let e of new Set(r.concat(l))){if(!r.includes(e)){this._metadataChanged.emit({key:e,newValue:a.newValue[e],type:"add"})}else if(!l.includes(e)){this._metadataChanged.emit({key:e,oldValue:a.oldValue[e],type:"remove"})}else if(!n.JSONExt.deepEqual(i[e],a.newValue[e])){this._metadataChanged.emit({key:e,newValue:a.newValue[e],oldValue:a.oldValue[e],type:"change"})}}}const i=this.ymodel.get("source");if(o&&o.keysChanged.has("source")){s.sourceChange=[{delete:this._prevSourceLength},{insert:i.toString()}]}this._prevSourceLength=i.length;return s}}class g extends h{static createStandalone(t){return super.createStandalone(t)}constructor(t,e,s,n={}){super(t,e,n);this._youtputs=s}get cell_type(){return"code"}get execution_count(){return this.ymodel.get("execution_count")||null}set execution_count(t){if(this.ymodel.get("execution_count")!==t){this.transact((()=>{this.ymodel.set("execution_count",t)}))}}get outputs(){return this.getOutputs()}set outputs(t){this.setOutputs(t)}getOutputs(){return n.JSONExt.deepCopy(this._youtputs.toArray())}setOutputs(t){this.transact((()=>{this._youtputs.delete(0,this._youtputs.length);this._youtputs.insert(0,t)}),false)}updateOutputs(t,e,s=[]){const n=e<this._youtputs.length?e-t:this._youtputs.length-t;this.transact((()=>{this._youtputs.delete(t,n);this._youtputs.insert(t,s)}),false)}toJSON(){return{...super.toJSON(),outputs:this.getOutputs(),execution_count:this.execution_count}}getChanges(t){const e=super.getChanges(t);const s=t.find((t=>t.target===this.ymodel.get("outputs")));if(s){e.outputsChange=s.changes.delta}const n=t.find((t=>t.target===this.ymodel));if(n&&n.keysChanged.has("execution_count")){const t=n.changes.keys.get("execution_count");e.executionCountChange={oldValue:t.oldValue,newValue:this.ymodel.get("execution_count")}}return e}}class p extends h{get attachments(){return this.getAttachments()}set attachments(t){this.setAttachments(t)}getAttachments(){return this.ymodel.get("attachments")}setAttachments(t){this.transact((()=>{if(t==null){this.ymodel.delete("attachments")}else{this.ymodel.set("attachments",t)}}))}getChanges(t){const e=super.getChanges(t);const s=t.find((t=>t.target===this.ymodel));if(s&&s.keysChanged.has("attachments")){const t=s.changes.keys.get("attachments");e.executionCountChange={oldValue:t.oldValue,newValue:this.ymodel.get("attachments")}}return e}}class f extends p{static createStandalone(t){return super.createStandalone(t)}get cell_type(){return"raw"}toJSON(){return{id:this.getId(),cell_type:"raw",source:this.getSource(),metadata:this.getMetadata(),attachments:this.getAttachments()}}}class m extends p{static createStandalone(t){return super.createStandalone(t)}get cell_type(){return"markdown"}toJSON(){return{id:this.getId(),cell_type:"markdown",source:this.getSource(),metadata:this.getMetadata(),attachments:this.getAttachments()}}}class y extends r{constructor(t={}){var e;super();this.ymeta=this.ydoc.getMap("meta");this._onMetaChanged=t=>{var e;if(t.keysChanged.has("metadata")){const s=t.changes.keys.get("metadata");const a={oldValue:(s===null||s===void 0?void 0:s.oldValue)?s.oldValue:undefined,newValue:this.getMetadata()};const o=(e=a.oldValue)!==null&&e!==void 0?e:{};const i=Object.keys(o);const r=Object.keys(a.newValue);for(let t of new Set(i.concat(r))){if(!i.includes(t)){this._metadataChanged.emit({key:t,newValue:a.newValue[t],type:"add"})}else if(!r.includes(t)){this._metadataChanged.emit({key:t,oldValue:a.oldValue[t],type:"remove"})}else if(!n.JSONExt.deepEqual(o[t],a.newValue[t])){this._metadataChanged.emit({key:t,newValue:a.newValue[t],oldValue:a.oldValue[t],type:"change"})}}this._changed.emit({metadataChange:a})}if(t.keysChanged.has("nbformat")){const e=t.changes.keys.get("nbformat");const s={key:"nbformat",oldValue:(e===null||e===void 0?void 0:e.oldValue)?e.oldValue:undefined,newValue:this.nbformat};this._changed.emit({nbformatChanged:s})}if(t.keysChanged.has("nbformat_minor")){const e=t.changes.keys.get("nbformat_minor");const s={key:"nbformat_minor",oldValue:(e===null||e===void 0?void 0:e.oldValue)?e.oldValue:undefined,newValue:this.nbformat_minor};this._changed.emit({nbformatChanged:s})}};this._onYCellsChanged=t=>{t.changes.added.forEach((t=>{const e=t.content.type;if(!this._ycellMapping.has(e)){const t=d(e,{notebook:this});t.setUndoManager();this._ycellMapping.set(e,t)}}));t.changes.deleted.forEach((t=>{const e=t.content.type;const s=this._ycellMapping.get(e);if(s){s.dispose();this._ycellMapping.delete(e)}}));let e=0;const s=[];t.changes.delta.forEach((t=>{if(t.insert!=null){const n=t.insert.map((t=>this._ycellMapping.get(t)));s.push({insert:n});this.cells.splice(e,0,...n);e+=t.insert.length}else if(t.delete!=null){s.push(t);this.cells.splice(e,t.delete)}else if(t.retain!=null){s.push(t);e+=t.retain}}));this._changed.emit({cellsChange:s})};this._metadataChanged=new a.Signal(this);this._ycells=this.ydoc.getArray("cells");this._ycellMapping=new WeakMap;this._disableDocumentWideUndoRedo=(e=t.disableDocumentWideUndoRedo)!==null&&e!==void 0?e:false;this.cells=this._ycells.toArray().map((t=>{if(!this._ycellMapping.has(t)){this._ycellMapping.set(t,d(t,{notebook:this}))}return this._ycellMapping.get(t)}));this.undoManager.addToScope(this._ycells);this._ycells.observe(this._onYCellsChanged);this.ymeta.observe(this._onMetaChanged)}get disableDocumentWideUndoRedo(){return this._disableDocumentWideUndoRedo}get metadata(){return this.getMetadata()}set metadata(t){this.setMetadata(t)}get metadataChanged(){return this._metadataChanged}get nbformat(){return this.ymeta.get("nbformat")}set nbformat(t){this.transact((()=>{this.ymeta.set("nbformat",t)}),false)}get nbformat_minor(){return this.ymeta.get("nbformat_minor")}set nbformat_minor(t){this.transact((()=>{this.ymeta.set("nbformat_minor",t)}),false)}dispose(){if(this.isDisposed){return}this._ycells.unobserve(this._onYCellsChanged);this.ymeta.unobserve(this._onMetaChanged);super.dispose()}getCell(t){return this.cells[t]}addCell(t){return this.insertCell(this._ycells.length,t)}insertCell(t,e){return this.insertCells(t,[e])[0]}insertCells(t,e){const s=e.map((t=>{const e=u(t,this);this._ycellMapping.set(e.ymodel,e);return e}));this.transact((()=>{this._ycells.insert(t,s.map((t=>t.ymodel)))}));s.forEach((t=>{t.setUndoManager()}));return s}moveCell(t,e){this.moveCells(t,e)}moveCells(t,e,s=1){const n=new Array(s).fill(true).map(((e,s)=>this.getCell(t+s).toJSON()));this.transact((()=>{this._ycells.delete(t,s);this._ycells.insert(t>e?e:e-s+1,n.map((t=>u(t,this).ymodel)))}))}deleteCell(t){this.deleteCellRange(t,t+1)}deleteCellRange(t,e){this.transact((()=>{this._ycells.delete(t,e-t)}))}deleteMetadata(t){if(typeof this.getMetadata(t)==="undefined"){return}const e=n.JSONExt.deepCopy(this.ymeta.get("metadata"));delete e[t];this.setMetadata(e)}getMetadata(t){var e;const s=(e=this.ymeta.get("metadata"))!==null&&e!==void 0?e:{};if(typeof t==="string"){const e=s[t];return typeof e==="undefined"?undefined:n.JSONExt.deepCopy(s[t])}else{return n.JSONExt.deepCopy(s)}}setMetadata(t,e){var s;if(typeof t==="string"){if(typeof e==="undefined"){throw new TypeError(`Metadata value for ${t} cannot be 'undefined'; use deleteMetadata.`)}if(n.JSONExt.deepEqual((s=this.getMetadata(t))!==null&&s!==void 0?s:null,e)){return}const a={};a[t]=e;this.updateMetadata(a)}else{if(!n.JSONExt.deepEqual(this.metadata,t)){this.ymeta.set("metadata",n.JSONExt.deepCopy(t))}}}updateMetadata(t){this.ymeta.set("metadata",{...this.getMetadata(),...t})}fromJSON(t){this.transact((()=>{this.nbformat=t.nbformat;this.nbformat_minor=t.nbformat_minor;const e=t.metadata;if(e["orig_nbformat"]!==undefined){delete e["orig_nbformat"]}this.metadata=e;const s=t.nbformat===4&&t.nbformat_minor>=5;const n=t.cells.map((t=>{if(!s){delete t.id}return t}));this.insertCells(this.cells.length,n);this.deleteCellRange(0,this.cells.length)}))}toJSON(){const t=this.nbformat===4&&this.nbformat_minor<=4;return{metadata:this.metadata,nbformat_minor:this.nbformat_minor,nbformat:this.nbformat,cells:this.cells.map((e=>{const s=e.toJSON();if(t){delete s.id}return s}))}}}function _(t){let e=new Map;t.changes.keys.forEach(((t,s)=>{e.set(s,{action:t.action,oldValue:t.oldValue,newValue:this.ymeta.get(s)})}));return e}const v=()=>{let t=true;return e=>{if(t){t=false;try{e()}finally{t=true}}}}},72382:(t,e,s)=>{"use strict";s.d(e,{JG:()=>a,UI:()=>i,Ue:()=>n,Yj:()=>r,Yu:()=>o});const n=()=>new Map;const a=t=>{const e=n();t.forEach(((t,s)=>{e.set(s,t)}));return e};const o=(t,e,s)=>{let n=t.get(e);if(n===undefined){t.set(e,n=s())}return n};const i=(t,e)=>{const s=[];for(const[n,a]of t){s.push(e(a,n))}return s};const r=(t,e)=>{for(const[s,n]of t){if(e(n,s)){return true}}return false};const l=(t,e)=>{for(const[s,n]of t){if(!e(n,s)){return false}}return true}},14247:(t,e,s)=>{"use strict";s.d(e,{Fp:()=>p,GR:()=>v,GW:()=>n,VV:()=>g,Wn:()=>o,sQ:()=>m});const n=Math.floor;const a=Math.ceil;const o=Math.abs;const i=Math.imul;const r=Math.round;const l=Math.log10;const d=Math.log2;const u=Math.log;const c=Math.sqrt;const h=(t,e)=>t+e;const g=(t,e)=>t<e?t:e;const p=(t,e)=>t>e?t:e;const f=Number.isNaN;const m=Math.pow;const y=t=>Math.pow(10,t);const _=Math.sign;const v=t=>t!==0?t<0:1/t<0},34155:t=>{var e=t.exports={};var s;var n;function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){s=setTimeout}else{s=a}}catch(t){s=a}try{if(typeof clearTimeout==="function"){n=clearTimeout}else{n=o}}catch(t){n=o}})();function i(t){if(s===setTimeout){return setTimeout(t,0)}if((s===a||!s)&&setTimeout){s=setTimeout;return setTimeout(t,0)}try{return s(t,0)}catch(e){try{return s.call(null,t,0)}catch(e){return s.call(this,t,0)}}}function r(t){if(n===clearTimeout){return clearTimeout(t)}if((n===o||!n)&&clearTimeout){n=clearTimeout;return clearTimeout(t)}try{return n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}var l=[];var d=false;var u;var c=-1;function h(){if(!d||!u){return}d=false;if(u.length){l=u.concat(l)}else{c=-1}if(l.length){g()}}function g(){if(d){return}var t=i(h);d=true;var e=l.length;while(e){u=l;l=[];while(++c<e){if(u){u[c].run()}}c=-1;e=l.length}u=null;d=false;r(t)}e.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1){for(var s=1;s<arguments.length;s++){e[s-1]=arguments[s]}}l.push(new p(t,e));if(l.length===1&&!d){i(g)}};function p(t,e){this.fun=t;this.array=e}p.prototype.run=function(){this.fun.apply(null,this.array)};e.title="browser";e.browser=true;e.env={};e.argv=[];e.version="";e.versions={};function f(){}e.on=f;e.addListener=f;e.once=f;e.off=f;e.removeListener=f;e.removeAllListeners=f;e.emit=f;e.prependListener=f;e.prependOnceListener=f;e.listeners=function(t){return[]};e.binding=function(t){throw new Error("process.binding is not supported")};e.cwd=function(){return"/"};e.chdir=function(t){throw new Error("process.chdir is not supported")};e.umask=function(){return 0}},1057:(t,e,s)=>{"use strict";s.d(e,{Ag:()=>g,GL:()=>h,oy:()=>m,xq:()=>p});var n=s(88534);var a=s(64485);var o=s(20817);var i=s(14247);var r=s(58290);var l=s(97027);var d=s(66350);var u=s.n(d);const c=3e4;class h extends r.y{constructor(t){super();this.doc=t;this.clientID=t.clientID;this.states=new Map;this.meta=new Map;this._checkInterval=setInterval((()=>{const t=o.ZG();if(this.getLocalState()!==null&&c/2<=t-this.meta.get(this.clientID).lastUpdated){this.setLocalState(this.getLocalState())}const e=[];this.meta.forEach(((s,n)=>{if(n!==this.clientID&&c<=t-s.lastUpdated&&this.states.has(n)){e.push(n)}}));if(e.length>0){g(this,e,"timeout")}}),i.GW(c/10));t.on("destroy",(()=>{this.destroy()}));this.setLocalState({})}destroy(){this.emit("destroy",[this]);this.setLocalState(null);super.destroy();clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const e=this.clientID;const s=this.meta.get(e);const n=s===undefined?0:s.clock+1;const a=this.states.get(e);if(t===null){this.states.delete(e)}else{this.states.set(e,t)}this.meta.set(e,{clock:n,lastUpdated:o.ZG()});const i=[];const r=[];const d=[];const u=[];if(t===null){u.push(e)}else if(a==null){if(t!=null){i.push(e)}}else{r.push(e);if(!l.Hi(a,t)){d.push(e)}}if(i.length>0||d.length>0||u.length>0){this.emit("change",[{added:i,updated:d,removed:u},"local"])}this.emit("update",[{added:i,updated:r,removed:u},"local"])}setLocalStateField(t,e){const s=this.getLocalState();if(s!==null){this.setLocalState({...s,[t]:e})}}getStates(){return this.states}}const g=(t,e,s)=>{const n=[];for(let a=0;a<e.length;a++){const s=e[a];if(t.states.has(s)){t.states.delete(s);if(s===t.clientID){const e=t.meta.get(s);t.meta.set(s,{clock:e.clock+1,lastUpdated:o.ZG()})}n.push(s)}}if(n.length>0){t.emit("change",[{added:[],updated:[],removed:n},s]);t.emit("update",[{added:[],updated:[],removed:n},s])}};const p=(t,e,s=t.states)=>{const a=e.length;const o=n.Mf();n.uE(o,a);for(let i=0;i<a;i++){const a=e[i];const r=s.get(a)||null;const l=t.meta.get(a).clock;n.uE(o,a);n.uE(o,l);n.uw(o,JSON.stringify(r))}return n._f(o)};const f=(t,e)=>{const s=decoding.createDecoder(t);const n=encoding.createEncoder();const a=decoding.readVarUint(s);encoding.writeVarUint(n,a);for(let o=0;o<a;o++){const t=decoding.readVarUint(s);const a=decoding.readVarUint(s);const o=JSON.parse(decoding.readVarString(s));const i=e(o);encoding.writeVarUint(n,t);encoding.writeVarUint(n,a);encoding.writeVarString(n,JSON.stringify(i))}return encoding.toUint8Array(n)};const m=(t,e,s)=>{const n=a.l1(e);const i=o.ZG();const r=[];const d=[];const u=[];const c=[];const h=a.yg(n);for(let o=0;o<h;o++){const e=a.yg(n);let s=a.yg(n);const o=JSON.parse(a.kf(n));const h=t.meta.get(e);const g=t.states.get(e);const p=h===undefined?0:h.clock;if(p<s||p===s&&o===null&&t.states.has(e)){if(o===null){if(e===t.clientID&&t.getLocalState()!=null){s++}else{t.states.delete(e)}}else{t.states.set(e,o)}t.meta.set(e,{clock:s,lastUpdated:i});if(h===undefined&&o!==null){r.push(e)}else if(h!==undefined&&o===null){c.push(e)}else if(o!==null){if(!l.Hi(o,g)){u.push(e)}d.push(e)}}}if(r.length>0||u.length>0||c.length>0){t.emit("change",[{added:r,updated:u,removed:c},s])}if(r.length>0||d.length>0||c.length>0){t.emit("update",[{added:r,updated:d,removed:c},s])}}}}]);
//# sourceMappingURL=8229.bffa6d073f32520b5c69.js.map?v=bffa6d073f32520b5c69